if(typeof Object.assign!='function'){(function(){Object.assign=function(target){'use strict';if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}
var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}
return output;};})();}/*!jQuery v3.1.0 | (c) jQuery Foundation | jquery.org/license*/
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.0",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:f.call(this)},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"label"in b&&b.disabled===a||"form"in b&&b.disabled===a||"form"in b&&b.disabled===!1&&(b.isDisabled===a||b.isDisabled!==!a&&("label"in b||!ea(b))!==a)}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e)}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(_,aa),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=V.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(_,aa),$.test(j[0].type)&&qa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&sa(j),!a)return G.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||$.test(a)&&qa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){if(r.isFunction(b))return r.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return r.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(C.test(b))return r.filter(b,a,c);b=r.filter(b,a)}return r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType})}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/\S+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)S(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:X.test(c)?JSON.parse(c):c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),Z(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c)return c;if(c=Z(f,a),void 0!==c)return c}else this.each(function(){W.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var $=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_=new RegExp("^(?:([+-])=|)("+$+")([a-z%]*)$","i"),aa=["Top","Right","Bottom","Left"],ba=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ca=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function da(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&_.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ea={};function fa(a){var b,c=a.ownerDocument,d=a.nodeName,e=ea[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ea[d]=e,e)}function ga(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ba(d)&&(e[f]=fa(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ga(this,!0)},hide:function(){return ga(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ba(this)?r(this).show():r(this).hide()})}});var ha=/^(?:checkbox|radio)$/i,ia=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ja=/^$|\/(?:java|ecma)script/i,ka={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ka.optgroup=ka.option,ka.tbody=ka.tfoot=ka.colgroup=ka.caption=ka.thead,ka.th=ka.td;function la(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function ma(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}var na=/<|&#?\w+;/;function oa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(na.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ia.exec(f)||["",""])[1].toLowerCase(),i=ka[h]||ka._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=la(l.appendChild(f),"script"),j&&ma(g),c){k=0;while(f=g[k++])ja.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var pa=d.documentElement,qa=/^key/,ra=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,sa=/^([^.]*)(?:\.(.+)|)/;function ta(){return!0}function ua(){return!1}function va(){try{return d.activeElement}catch(a){}}function wa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)wa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ua;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(pa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--)h=sa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--)if(h=sa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?r(e,this).index(i)>-1:r.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==va()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===va()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ta:ua,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:ua,isPropagationStopped:ua,isImmediatePropagationStopped:ua,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ta,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ta,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ta,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&qa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ra.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return wa(this,a,b,c,d)},one:function(a,b,c,d){return wa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ua),this.each(function(){r.event.remove(this,a,c,b)})}});var xa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ya=/<script|<style|<link/i,za=/checked\s*(?:[^=]|=\s*.checked.)/i,Aa=/^true\/(.*)/,Ba=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ca(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Da(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ea(a){var b=Aa.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ga(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ha.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ha(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&za.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(m&&(e=oa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(la(e,"script"),Da),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,la(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ea),l=0;l<i;l++)j=h[l],ja.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ba,""),k))}return a}function Ia(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(la(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&ma(la(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(xa,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=la(h),f=la(a),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);if(b)if(c)for(f=f||la(a),g=g||la(h),d=0,e=f.length;d<e;d++)Fa(f[d],g[d]);else Fa(a,h);return g=la(h,"script"),g.length>0&&ma(g,!i&&la(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(la(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!ya.test(a)&&!ka[(ia.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(la(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(la(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ja=/^margin/,Ka=new RegExp("^("+$+")(?!px)[a-z%]+$","i"),La=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",pa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,pa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Ma(a,b,c){var d,e,f,g,h=a.style;return c=c||La(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ka.test(g)&&Ja.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Na(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Oa=/^(none|table(?!-c[ea]).+)/,Pa={position:"absolute",visibility:"hidden",display:"block"},Qa={letterSpacing:"0",fontWeight:"400"},Ra=["Webkit","Moz","ms"],Sa=d.createElement("div").style;function Ta(a){if(a in Sa)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ra.length;while(c--)if(a=Ra[c]+b,a in Sa)return a}function Ua(a,b,c){var d=_.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Va(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+aa[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+aa[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+aa[f]+"Width",!0,e))):(g+=r.css(a,"padding"+aa[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+aa[f]+"Width",!0,e)));return g}function Wa(a,b,c){var d,e=!0,f=La(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Ma(a,b,f),(d<0||null==d)&&(d=a.style[b]),Ka.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Va(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Ma(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ta(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=_.exec(c))&&e[1]&&(c=da(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ta(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Ma(a,b,d)),"normal"===e&&b in Qa&&(e=Qa[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Oa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Wa(a,b,d):ca(a,Pa,function(){return Wa(a,b,d)})},set:function(a,c,d){var e,f=d&&La(a),g=d&&Va(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=_.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ua(a,c,g)}}}),r.cssHooks.marginLeft=Na(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Ma(a,"marginLeft"))||a.getBoundingClientRect().left-ca(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+aa[d]+b]=f[d]||f[d-2]||f[0];return e}},Ja.test(a)||(r.cssHooks[a+b].set=Ua)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=La(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Xa(a,b,c,d,e){return new Xa.prototype.init(a,b,c,d,e)}r.Tween=Xa,Xa.prototype={constructor:Xa,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Xa.propHooks[this.prop];return a&&a.get?a.get(this):Xa.propHooks._default.get(this)},run:function(a){var b,c=Xa.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Xa.propHooks._default.set(this),this}},Xa.prototype.init.prototype=Xa.prototype,Xa.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Xa.propHooks.scrollTop=Xa.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Xa.prototype.init,r.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=/queueHooks$/;function ab(){Za&&(a.requestAnimationFrame(ab),r.fx.tick())}function bb(){return a.setTimeout(function(){Ya=void 0}),Ya=r.now()}function cb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=aa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function db(a,b,c){for(var d,e=(gb.tweeners[b]||[]).concat(gb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function eb(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ba(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],$a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ga([a],!0),j=a.style.display||j,k=r.css(a,"display"),ga([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ga([a],!0),m.done(function(){p||ga([a]),V.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=db(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function fb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function gb(a,b,c){var d,e,f=0,g=gb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||bb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Ya||bb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(fb(k,j.opts.specialEasing);f<g;f++)if(d=gb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,db,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(gb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return da(c.elem,a,_.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++)c=a[d],gb.tweeners[c]=gb.tweeners[c]||[],gb.tweeners[c].unshift(b)},prefilters:[eb],prefilter:function(a,b){b?gb.prefilters.unshift(a):gb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:e.duration="number"==typeof e.duration?e.duration:e.duration in r.fx.speeds?r.fx.speeds[e.duration]:r.fx.speeds._default,null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ba).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=gb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&_a.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(cb(b,!0),a,d,e)}}),r.each({slideDown:cb("show"),slideUp:cb("hide"),slideToggle:cb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Ya=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Ya=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){Za||(Za=a.requestAnimationFrame?a.requestAnimationFrame(ab):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(Za):a.clearInterval(Za),Za=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var hb,ib=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?hb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),hb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ib[b]||r.find.attr;ib[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=ib[g],ib[g]=e,e=null!=c(a,b,d)?g:null,ib[g]=f),e}});var jb=/^(?:input|select|textarea|button)$/i,kb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):jb.test(a.nodeName)||kb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});var lb=/[\t\r\n\f]/g;function mb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,mb(this)))});if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=mb(c),d=1===c.nodeType&&(" "+e+" ").replace(lb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=r.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,mb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=mb(c),d=1===c.nodeType&&(" "+e+" ").replace(lb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=r.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,mb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=mb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+mb(c)+" ").replace(lb," ").indexOf(b)>-1)return!0;return!1}});var nb=/\r/g,ob=/[\x20\t\r\n\f]+/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(nb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:r.trim(r.text(a)).replace(ob," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ha.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,""),n=(sb.test(f)?"&":"?")+"_="+rb++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=oa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=r.trim(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||pa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Na(o.pixelPosition,function(a,c){if(c)return c=Ma(a,b),Ka.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});var criterion={};criterion.modals={};window.addEventListener("DOMContentLoaded",function(){document.documentElement.classList.remove("no-js");document.documentElement.classList.add("js");var __instance=new criterion.Main();__instance.init();});/*!
* Flickity PACKAGED v2.1.2
* Touch, responsive, flickable carousels
*
* Licensed GPLv3 for open source use
* or Flickity Commercial License for commercial use
*
* https://flickity.metafizzy.co
* Copyright 2015-2018 Metafizzy
*/!function(t,e){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.jQueryBridget=e(t,t.jQuery)}(window,function(t,e){"use strict";function i(i,o,a){function l(t,e,n){var s,o="$()."+i+'("'+e+'")';return t.each(function(t,l){var h=a.data(l,i);if(!h)return void r(i+" not initialized. Cannot call methods, i.e. "+o);var c=h[e];if(!c||"_"==e.charAt(0))return void r(o+" is not a valid method");var d=c.apply(h,n);s=void 0===s?d:s}),void 0!==s?s:t}function h(t,e){t.each(function(t,n){var s=a.data(n,i);s?(s.option(e),s._init()):(s=new o(n,e),a.data(n,i,s))})}a=a||e||t.jQuery,a&&(o.prototype.option||(o.prototype.option=function(t){a.isPlainObject(t)&&(this.options=a.extend(!0,this.options,t))}),a.fn[i]=function(t){if("string"==typeof t){var e=s.call(arguments,1);return l(this,t,e)}return h(this,t),this},n(a))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var s=Array.prototype.slice,o=t.console,r="undefined"==typeof o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return n.indexOf(e)==-1&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||{};return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return n!=-1&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],s=0;s<i.length;s++){var o=i[s],r=n&&n[o];r&&(this.off(t,o),delete n[o]),o.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",e):"object"==typeof module&&module.exports?module.exports=e():t.getSize=e()}(window,function(){"use strict";function t(t){var e=parseFloat(t),i=t.indexOf("%")==-1&&!isNaN(e);return i&&e}function e(){}function i(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<h;e++){var i=l[e];t[i]=0}return t}function n(t){var e=getComputedStyle(t);return e||a("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),e}function s(){if(!c){c=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var i=document.body||document.documentElement;i.appendChild(e);var s=n(e);r=200==Math.round(t(s.width)),o.isBoxSizeOuter=r,i.removeChild(e)}}function o(e){if(s(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var o=n(e);if("none"==o.display)return i();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var c=a.isBorderBox="border-box"==o.boxSizing,d=0;d<h;d++){var u=l[d],f=o[u],p=parseFloat(f);a[u]=isNaN(p)?0:p}var g=a.paddingLeft+a.paddingRight,v=a.paddingTop+a.paddingBottom,m=a.marginLeft+a.marginRight,y=a.marginTop+a.marginBottom,b=a.borderLeftWidth+a.borderRightWidth,E=a.borderTopWidth+a.borderBottomWidth,S=c&&r,C=t(o.width);C!==!1&&(a.width=C+(S?0:g+b));var x=t(o.height);return x!==!1&&(a.height=x+(S?0:v+E)),a.innerWidth=a.width-(g+b),a.innerHeight=a.height-(v+E),a.outerWidth=a.width+m,a.outerHeight=a.height+y,a}}var r,a="undefined"==typeof console?e:function(t){console.error(t)},l=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],h=l.length,c=!1;return o}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var t=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i],s=n+"MatchesSelector";if(t[s])return s}}();return function(e,i){return e[t](i)}}),function(t,e){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("desandro-matches-selector")):t.fizzyUIUtils=e(t,t.matchesSelector)}(window,function(t,e){var i={};i.extend=function(t,e){for(var i in e)t[i]=e[i];return t},i.modulo=function(t,e){return(t%e+e)%e};var n=Array.prototype.slice;i.makeArray=function(t){if(Array.isArray(t))return t;if(null===t||void 0===t)return[];var e="object"==typeof t&&"number"==typeof t.length;return e?n.call(t):[t]},i.removeFrom=function(t,e){var i=t.indexOf(e);i!=-1&&t.splice(i,1)},i.getParent=function(t,i){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,e(t,i))return t},i.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},i.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.filterFindElements=function(t,n){t=i.makeArray(t);var s=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void s.push(t);e(t,n)&&s.push(t);for(var i=t.querySelectorAll(n),o=0;o<i.length;o++)s.push(i[o])}}),s},i.debounceMethod=function(t,e,i){i=i||100;var n=t.prototype[e],s=e+"Timeout";t.prototype[e]=function(){var t=this[s];clearTimeout(t);var e=arguments,o=this;this[s]=setTimeout(function(){n.apply(o,e),delete o[s]},i)}},i.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},i.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var s=t.console;return i.htmlInit=function(e,n){i.docReady(function(){var o=i.toDashed(n),r="data-"+o,a=document.querySelectorAll("["+r+"]"),l=document.querySelectorAll(".js-"+o),h=i.makeArray(a).concat(i.makeArray(l)),c=r+"-options",d=t.jQuery;h.forEach(function(t){var i,o=t.getAttribute(r)||t.getAttribute(c);try{i=o&&JSON.parse(o)}catch(a){return void(s&&s.error("Error parsing "+r+" on "+t.className+": "+a))}var l=new e(t,i);d&&d.data(t,n,l)})})},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=e(t,t.getSize))}(window,function(t,e){function i(t,e){this.element=t,this.parent=e,this.create()}var n=i.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-selected","false"),this.x=0,this.shift=0},n.destroy=function(){this.element.style.position="";var t=this.parent.originSide;this.element.removeAttribute("aria-selected"),this.element.style[t]=""},n.getSize=function(){this.size=e(this.element)},n.setPosition=function(t){this.x=t,this.updateTarget(),this.renderPosition(t)},n.updateTarget=n.setDefaultTarget=function(){var t="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[t]+this.size.width*this.parent.cellAlign},n.renderPosition=function(t){var e=this.parent.originSide;this.element.style[e]=this.parent.getPositionValue(t)},n.wrapShift=function(t){this.shift=t,this.renderPosition(this.x+this.parent.slideableWidth*t)},n.remove=function(){this.element.parentNode.removeChild(this.element)},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/slide",e):"object"==typeof module&&module.exports?module.exports=e():(t.Flickity=t.Flickity||{},t.Flickity.Slide=e())}(window,function(){"use strict";function t(t){this.parent=t,this.isOriginLeft="left"==t.originSide,this.cells=[],this.outerWidth=0,this.height=0}var e=t.prototype;return e.addCell=function(t){if(this.cells.push(t),this.outerWidth+=t.size.outerWidth,this.height=Math.max(t.size.outerHeight,this.height),1==this.cells.length){this.x=t.x;var e=this.isOriginLeft?"marginLeft":"marginRight";this.firstMargin=t.size[e]}},e.updateTarget=function(){var t=this.isOriginLeft?"marginRight":"marginLeft",e=this.getLastCell(),i=e?e.size[t]:0,n=this.outerWidth-(this.firstMargin+i);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},e.getLastCell=function(){return this.cells[this.cells.length-1]},e.select=function(){this.changeSelected(!0)},e.unselect=function(){this.changeSelected(!1)},e.changeSelected=function(t){var e=t?"add":"remove";this.cells.forEach(function(i){i.element.classList[e]("is-selected"),i.element.setAttribute("aria-selected",t.toString())})},e.getCellElements=function(){return this.cells.map(function(t){return t.element})},t}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=e(t,t.fizzyUIUtils))}(window,function(t,e){var i={};return i.startAnimation=function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},i.animate=function(){this.applyDragForce(),this.applySelectedAttraction();var t=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating){var e=this;requestAnimationFrame(function(){e.animate()})}},i.positionSlider=function(){var t=this.x;this.options.wrapAround&&this.cells.length>1&&(t=e.modulo(t,this.slideableWidth),t-=this.slideableWidth,this.shiftWrapCells(t)),t+=this.cursorPosition,t=this.options.rightToLeft?-t:t;var i=this.getPositionValue(t);this.slider.style.transform=this.isAnimating?"translate3d("+i+",0,0)":"translateX("+i+")";var n=this.slides[0];if(n){var s=-this.x-n.target,o=s/this.slidesWidth;this.dispatchEvent("scroll",null,[o,s])}},i.positionSliderAtSelected=function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},i.getPositionValue=function(t){return this.options.percentPosition?.01*Math.round(t/this.size.innerWidth*1e4)+"%":Math.round(t)+"px"},i.settle=function(t){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*t)||this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},i.shiftWrapCells=function(t){var e=this.cursorPosition+t;this._shiftCells(this.beforeShiftCells,e,-1);var i=this.size.innerWidth-(t+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,i,1)},i._shiftCells=function(t,e,i){for(var n=0;n<t.length;n++){var s=t[n],o=e>0?i:0;s.wrapShift(o),e-=s.size.outerWidth}},i._unshiftCells=function(t){if(t&&t.length)for(var e=0;e<t.length;e++)t[e].wrapShift(0)},i.integratePhysics=function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},i.applyForce=function(t){this.velocity+=t},i.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},i.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor())},i.applyDragForce=function(){if(this.isDraggable&&this.isPointerDown){var t=this.dragX-this.x,e=t-this.velocity;this.applyForce(e)}},i.applySelectedAttraction=function(){var t=this.isDraggable&&this.isPointerDown;if(!t&&!this.isFreeScrolling&&this.slides.length){var e=this.selectedSlide.target*-1-this.x,i=e*this.options.selectedAttraction;this.applyForce(i)}},i}),function(t,e){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(i,n,s,o,r,a){return e(t,i,n,s,o,r,a)});else if("object"==typeof module&&module.exports)module.exports=e(t,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate"));else{var i=t.Flickity;t.Flickity=e(t,t.EvEmitter,t.getSize,t.fizzyUIUtils,i.Cell,i.Slide,i.animatePrototype)}}(window,function(t,e,i,n,s,o,r){function a(t,e){for(t=n.makeArray(t);t.length;)e.appendChild(t.shift())}function l(t,e){var i=n.getQueryElement(t);if(!i)return void(d&&d.error("Bad element for Flickity: "+(i||t)));if(this.element=i,this.element.flickityGUID){var s=f[this.element.flickityGUID];return s.option(e),s}h&&(this.$element=h(this.element)),this.options=n.extend({},this.constructor.defaults),this.option(e),this._create()}var h=t.jQuery,c=t.getComputedStyle,d=t.console,u=0,f={};l.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},l.createMethods=[];var p=l.prototype;n.extend(p,e.prototype),p._create=function(){var e=this.guid=++u;this.element.flickityGUID=e,f[e]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&t.addEventListener("resize",this);for(var i in this.options.on){var n=this.options.on[i];this.on(i,n)}l.createMethods.forEach(function(t){this[t]()},this),this.options.watchCSS?this.watchCSS():this.activate()},p.option=function(t){n.extend(this.options,t)},p.activate=function(){if(!this.isActive){this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize();var t=this._filterFindCellElements(this.element.children);a(t,this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate");var e,i=this.options.initialIndex;e=this.isInitActivated?this.selectedIndex:void 0!==i&&this.cells[i]?i:0,this.select(e,!1,!0),this.isInitActivated=!0,this.dispatchEvent("ready")}},p._createSlider=function(){var t=document.createElement("div");t.className="flickity-slider",t.style[this.originSide]=0,this.slider=t},p._filterFindCellElements=function(t){return n.filterFindElements(t,this.options.cellSelector)},p.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},p._makeCells=function(t){var e=this._filterFindCellElements(t),i=e.map(function(t){return new s(t,this)},this);return i},p.getLastCell=function(){return this.cells[this.cells.length-1]},p.getLastSlide=function(){return this.slides[this.slides.length-1]},p.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},p._positionCells=function(t){t=t||0,this.maxCellHeight=t?this.maxCellHeight||0:0;var e=0;if(t>0){var i=this.cells[t-1];e=i.x+i.size.outerWidth}for(var n=this.cells.length,s=t;s<n;s++){var o=this.cells[s];o.setPosition(e),e+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=e,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},p._sizeCells=function(t){t.forEach(function(t){t.getSize()})},p.updateSlides=function(){if(this.slides=[],this.cells.length){var t=new o(this);this.slides.push(t);var e="left"==this.originSide,i=e?"marginRight":"marginLeft",n=this._getCanCellFit();this.cells.forEach(function(e,s){if(!t.cells.length)return void t.addCell(e);var r=t.outerWidth-t.firstMargin+(e.size.outerWidth-e.size[i]);n.call(this,s,r)?t.addCell(e):(t.updateTarget(),t=new o(this),this.slides.push(t),t.addCell(e))},this),t.updateTarget(),this.updateSelectedSlide()}},p._getCanCellFit=function(){var t=this.options.groupCells;if(!t)return function(){return!1};if("number"==typeof t){var e=parseInt(t,10);return function(t){return t%e!==0}}var i="string"==typeof t&&t.match(/^(\d+)%$/),n=i?parseInt(i[1],10)/100:1;return function(t,e){return e<=(this.size.innerWidth+1)*n}},p._init=p.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},p.getSize=function(){this.size=i(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var g={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return p.setCellAlign=function(){var t=g[this.options.cellAlign];this.cellAlign=t?t[this.originSide]:this.options.cellAlign},p.setGallerySize=function(){if(this.options.setGallerySize){var t=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=t+"px"}},p._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var t=this.cursorPosition,e=this.cells.length-1;this.beforeShiftCells=this._getGapCells(t,e,-1),t=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(t,0,1)}},p._getGapCells=function(t,e,i){for(var n=[];t>0;){var s=this.cells[e];if(!s)break;n.push(s),e+=i,t-=s.size.outerWidth}return n},p._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var t=this.options.rightToLeft,e=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[i],s=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[e],r=n-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(t){s?t.target=n*this.cellAlign:(t.target=Math.max(t.target,o),t.target=Math.min(t.target,r))},this)}},p.dispatchEvent=function(t,e,i){var n=e?[e].concat(i):i;if(this.emitEvent(t,n),h&&this.$element){t+=this.options.namespaceJQueryEvents?".flickity":"";var s=t;if(e){var o=h.Event(e);o.type=t,s=o}this.$element.trigger(s,i)}},p.select=function(t,e,i){if(this.isActive&&(t=parseInt(t,10),this._wrapSelect(t),(this.options.wrapAround||e)&&(t=n.modulo(t,this.slides.length)),this.slides[t])){var s=this.selectedIndex;this.selectedIndex=t,this.updateSelectedSlide(),i?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[t]),t!=s&&this.dispatchEvent("change",null,[t]),this.dispatchEvent("cellSelect")}},p._wrapSelect=function(t){var e=this.slides.length,i=this.options.wrapAround&&e>1;if(!i)return t;var s=n.modulo(t,e),o=Math.abs(s-this.selectedIndex),r=Math.abs(s+e-this.selectedIndex),a=Math.abs(s-e-this.selectedIndex);!this.isDragSelect&&r<o?t+=e:!this.isDragSelect&&a<o&&(t-=e),t<0?this.x-=this.slideableWidth:t>=e&&(this.x+=this.slideableWidth)},p.previous=function(t,e){this.select(this.selectedIndex-1,t,e)},p.next=function(t,e){this.select(this.selectedIndex+1,t,e)},p.updateSelectedSlide=function(){var t=this.slides[this.selectedIndex];t&&(this.unselectSelectedSlide(),this.selectedSlide=t,t.select(),this.selectedCells=t.cells,this.selectedElements=t.getCellElements(),this.selectedCell=t.cells[0],this.selectedElement=this.selectedElements[0])},p.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},p.selectCell=function(t,e,i){var n=this.queryCell(t);if(n){var s=this.getCellSlideIndex(n);this.select(s,e,i)}},p.getCellSlideIndex=function(t){for(var e=0;e<this.slides.length;e++){var i=this.slides[e],n=i.cells.indexOf(t);if(n!=-1)return e}},p.getCell=function(t){for(var e=0;e<this.cells.length;e++){var i=this.cells[e];if(i.element==t)return i}},p.getCells=function(t){t=n.makeArray(t);var e=[];return t.forEach(function(t){var i=this.getCell(t);i&&e.push(i)},this),e},p.getCellElements=function(){return this.cells.map(function(t){return t.element})},p.getParentCell=function(t){var e=this.getCell(t);return e?e:(t=n.getParent(t,".flickity-slider > *"),this.getCell(t))},p.getAdjacentCellElements=function(t,e){if(!t)return this.selectedSlide.getCellElements();e=void 0===e?this.selectedIndex:e;var i=this.slides.length;if(1+2*t>=i)return this.getCellElements();for(var s=[],o=e-t;o<=e+t;o++){var r=this.options.wrapAround?n.modulo(o,i):o,a=this.slides[r];a&&(s=s.concat(a.getCellElements()))}return s},p.queryCell=function(t){return"number"==typeof t?this.cells[t]:("string"==typeof t&&(t=this.element.querySelector(t)),this.getCell(t))},p.uiChange=function(){this.emitEvent("uiChange")},p.childUIPointerDown=function(t){this.emitEvent("childUIPointerDown",[t])},p.onresize=function(){this.watchCSS(),this.resize()},n.debounceMethod(l,"onresize",150),p.resize=function(){if(this.isActive){this.getSize(),this.options.wrapAround&&(this.x=n.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize");var t=this.selectedElements&&this.selectedElements[0];this.selectCell(t,!1,!0)}},p.watchCSS=function(){var t=this.options.watchCSS;if(t){var e=c(this.element,":after").content;e.indexOf("flickity")!=-1?this.activate():this.deactivate()}},p.onkeydown=function(t){var e=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!e){var i=l.keyboardHandlers[t.keyCode];i&&i.call(this)}},l.keyboardHandlers={37:function(){var t=this.options.rightToLeft?"next":"previous";this.uiChange(),this[t]()},39:function(){var t=this.options.rightToLeft?"previous":"next";this.uiChange(),this[t]()}},p.focus=function(){var e=t.pageYOffset;this.element.focus({preventScroll:!0}),t.pageYOffset!=e&&t.scrollTo(t.pageXOffset,e)},p.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(t){t.destroy()}),this.element.removeChild(this.viewport),a(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},p.destroy=function(){this.deactivate(),t.removeEventListener("resize",this),this.emitEvent("destroy"),h&&this.$element&&h.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete f[this.guid]},n.extend(p,r),l.data=function(t){t=n.getQueryElement(t);var e=t&&t.flickityGUID;return e&&f[e]},n.htmlInit(l,"flickity"),h&&h.bridget&&h.bridget("flickity",l),l.setJQuery=function(t){h=t},l.Cell=s,l}),function(t,e){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.Unipointer=e(t,t.EvEmitter)}(window,function(t,e){function i(){}function n(){}var s=n.prototype=Object.create(e.prototype);s.bindStartEvent=function(t){this._bindStartEvent(t,!0)},s.unbindStartEvent=function(t){this._bindStartEvent(t,!1)},s._bindStartEvent=function(e,i){i=void 0===i||i;var n=i?"addEventListener":"removeEventListener",s="mousedown";t.PointerEvent?s="pointerdown":"ontouchstart"in t&&(s="touchstart"),e[n](s,this)},s.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},s.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier)return i}},s.onmousedown=function(t){var e=t.button;e&&0!==e&&1!==e||this._pointerDown(t,t)},s.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])},s.onpointerdown=function(t){this._pointerDown(t,t)},s._pointerDown=function(t,e){t.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,this.pointerDown(t,e))},s.pointerDown=function(t,e){this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e])};var o={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return s._bindPostStartEvents=function(e){if(e){var i=o[e.type];i.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=i}},s._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents)},s.onmousemove=function(t){this._pointerMove(t,t)},s.onpointermove=function(t){t.pointerId==this.pointerIdentifier&&this._pointerMove(t,t)},s.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerMove(t,e)},s._pointerMove=function(t,e){this.pointerMove(t,e)},s.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])},s.onmouseup=function(t){this._pointerUp(t,t)},s.onpointerup=function(t){t.pointerId==this.pointerIdentifier&&this._pointerUp(t,t)},s.ontouchend=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerUp(t,e)},s._pointerUp=function(t,e){this._pointerDone(),this.pointerUp(t,e)},s.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])},s._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},s._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},s.pointerDone=i,s.onpointercancel=function(t){t.pointerId==this.pointerIdentifier&&this._pointerCancel(t,t)},s.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);e&&this._pointerCancel(t,e)},s._pointerCancel=function(t,e){this._pointerDone(),this.pointerCancel(t,e)},s.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])},n.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}},n}),function(t,e){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.Unidragger=e(t,t.Unipointer)}(window,function(t,e){function i(){}var n=i.prototype=Object.create(e.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(e){e=void 0===e||e;for(var i=e?"addEventListener":"removeEventListener",n=e?this._touchActionValue:"",s=0;s<this.handles.length;s++){var o=this.handles[s];this._bindStartEvent(o,e),o[i]("click",this),t.PointerEvent&&(o.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(t,e){var i=this.okayPointerDown(t);i&&(this.pointerDownPointer=e,t.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(t),this.emitEvent("pointerDown",[t,e]))};var s={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},o={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(t){var e=s[t.target.nodeName],i=o[t.target.type],n=!e||i;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var t=document.activeElement,e=t&&t.blur&&t!=document.body;e&&t.blur()},n.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.emitEvent("pointerMove",[t,e,i]),this._dragMove(t,e,i)},n._dragPointerMove=function(t,e){var i={x:e.pageX-this.pointerDownPointer.pageX,y:e.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(t,e),i},n.hasDragStarted=function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3},n.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e]),this._dragPointerUp(t,e)},n._dragPointerUp=function(t,e){this.isDragging?this._dragEnd(t,e):this._staticClick(t,e)},n._dragStart=function(t,e){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(t,e)},n.dragStart=function(t,e){this.emitEvent("dragStart",[t,e])},n._dragMove=function(t,e,i){this.isDragging&&this.dragMove(t,e,i)},n.dragMove=function(t,e,i){t.preventDefault(),this.emitEvent("dragMove",[t,e,i])},n._dragEnd=function(t,e){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(t,e)},n.dragEnd=function(t,e){this.emitEvent("dragEnd",[t,e])},n.onclick=function(t){this.isPreventingClicks&&t.preventDefault()},n._staticClick=function(t,e){this.isIgnoringMouseUp&&"mouseup"==t.type||(this.staticClick(t,e),"mouseup"!=t.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(t,e){this.emitEvent("staticClick",[t,e])},i.getPointerPoint=e.getPointerPoint,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):t.Flickity=e(t,t.Flickity,t.Unidragger,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(){return{x:t.pageXOffset,y:t.pageYOffset}}n.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var o=e.prototype;n.extend(o,i.prototype),o._touchActionValue="pan-y";var r="createTouch"in document,a=!1;o._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("childUIPointerDown",this._childUIPointerDownDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),r&&!a&&(t.addEventListener("touchmove",function(){}),a=!0)},o.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},o.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},o.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=this.slides.length>1:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},o.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},o.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},o._uiChangeDrag=function(){delete this.isFreeScrolling},o._childUIPointerDownDrag=function(t){t.preventDefault(),this.pointerDownFocus(t)},o.pointerDown=function(e,i){if(!this.isDraggable)return void this._pointerDownDefault(e,i);var n=this.okayPointerDown(e);n&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=s(),t.addEventListener("scroll",this),this._pointerDownDefault(e,i))},o._pointerDownDefault=function(t,e){this.pointerDownPointer=e,this._bindPostStartEvents(t),this.dispatchEvent("pointerDown",t,[e])};var l={INPUT:!0,TEXTAREA:!0,SELECT:!0};return o.pointerDownFocus=function(t){var e=l[t.target.nodeName];e||this.focus()},o._pointerDownPreventDefault=function(t){var e="touchstart"==t.type,i="touch"==t.pointerType,n=l[t.target.nodeName];e||i||n||t.preventDefault()},o.hasDragStarted=function(t){return Math.abs(t.x)>this.options.dragThreshold},o.pointerUp=function(t,e){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",t,[e]),this._dragPointerUp(t,e)},o.pointerDone=function(){t.removeEventListener("scroll",this),delete this.pointerDownScroll},o.dragStart=function(e,i){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),t.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[i]))},o.pointerMove=function(t,e){var i=this._dragPointerMove(t,e);this.dispatchEvent("pointerMove",t,[e,i]),this._dragMove(t,e,i)},o.dragMove=function(t,e,i){if(this.isDraggable){t.preventDefault(),this.previousDragX=this.dragX;var n=this.options.rightToLeft?-1:1;this.options.wrapAround&&(i.x=i.x%this.slideableWidth);var s=this.dragStartPosition+i.x*n;if(!this.options.wrapAround&&this.slides.length){var o=Math.max(-this.slides[0].target,this.dragStartPosition);s=s>o?.5*(s+o):s;var r=Math.min(-this.getLastSlide().target,this.dragStartPosition);s=s<r?.5*(s+r):s}this.dragX=s,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",t,[e,i])}},o.dragEnd=function(t,e){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var i=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var n=this.getRestingPosition();this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target}else this.options.freeScroll||i!=this.selectedIndex||(i+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(i),delete this.isDragSelect,this.dispatchEvent("dragEnd",t,[e])}},o.dragEndRestingSelect=function(){var t=this.getRestingPosition(),e=Math.abs(this.getSlideDistance(-t,this.selectedIndex)),i=this._getClosestResting(t,e,1),n=this._getClosestResting(t,e,-1),s=i.distance<n.distance?i.index:n.index;return s},o._getClosestResting=function(t,e,i){for(var n=this.selectedIndex,s=1/0,o=this.options.contain&&!this.options.wrapAround?function(t,e){return t<=e}:function(t,e){return t<e};o(e,s)&&(n+=i,s=e,e=this.getSlideDistance(-t,n),null!==e);)e=Math.abs(e);return{distance:s,index:n-i}},o.getSlideDistance=function(t,e){var i=this.slides.length,s=this.options.wrapAround&&i>1,o=s?n.modulo(e,i):e,r=this.slides[o];if(!r)return null;var a=s?this.slideableWidth*Math.floor(e/i):0;return t-(r.target+a)},o.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var t=this.getSlideDistance(-this.dragX,this.selectedIndex),e=this.previousDragX-this.dragX;return t>0&&e>0?1:t<0&&e<0?-1:0},o.staticClick=function(t,e){var i=this.getParentCell(t.target),n=i&&i.element,s=i&&this.cells.indexOf(i);this.dispatchEvent("staticClick",t,[e,n,s])},o.onscroll=function(){var t=s(),e=this.pointerDownScroll.x-t.x,i=this.pointerDownScroll.y-t.y;(Math.abs(e)>3||Math.abs(i)>3)&&this._pointerDone()},e}),function(t,e){"function"==typeof define&&define.amd?define("tap-listener/tap-listener",["unipointer/unipointer"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("unipointer")):t.TapListener=e(t,t.Unipointer)}(window,function(t,e){function i(t){this.bindTap(t)}var n=i.prototype=Object.create(e.prototype);return n.bindTap=function(t){t&&(this.unbindTap(),this.tapElement=t,this._bindStartEvent(t,!0))},n.unbindTap=function(){this.tapElement&&(this._bindStartEvent(this.tapElement,!0),delete this.tapElement)},n.pointerUp=function(i,n){if(!this.isIgnoringMouseUp||"mouseup"!=i.type){var s=e.getPointerPoint(n),o=this.tapElement.getBoundingClientRect(),r=t.pageXOffset,a=t.pageYOffset,l=s.x>=o.left+r&&s.x<=o.right+r&&s.y>=o.top+a&&s.y<=o.bottom+a;if(l&&this.emitEvent("tap",[i,n]),"mouseup"!=i.type){this.isIgnoringMouseUp=!0;var h=this;setTimeout(function(){delete h.isIgnoringMouseUp},400)}}},n.destroy=function(){this.pointerDone(),this.unbindTap()},i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):e(t,t.Flickity,t.TapListener,t.fizzyUIUtils)}(window,function(t,e,i,n){"use strict";function s(t,e){this.direction=t,this.parent=e,this._create()}function o(t){return"string"==typeof t?t:"M "+t.x0+",50 L "+t.x1+","+(t.y1+50)+" L "+t.x2+","+(t.y2+50)+" L "+t.x3+",50  L "+t.x2+","+(50-t.y2)+" L "+t.x1+","+(50-t.y1)+" Z"}var r="http://www.w3.org/2000/svg";s.prototype=Object.create(i.prototype),s.prototype._create=function(){this.isEnabled=!0,this.isPrevious=this.direction==-1;var t=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==t;var e=this.element=document.createElement("button");e.className="flickity-button flickity-prev-next-button",e.className+=this.isPrevious?" previous":" next",e.setAttribute("type","button"),this.disable(),e.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var i=this.createSVG();e.appendChild(i),this.on("tap",this.onTap),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.bindTap(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.element),i.prototype.destroy.call(this),this.element.removeEventListener("click",this)},s.prototype.createSVG=function(){var t=document.createElementNS(r,"svg");t.setAttribute("class","flickity-button-icon"),t.setAttribute("viewBox","0 0 100 100");var e=document.createElementNS(r,"path"),i=o(this.parent.options.arrowShape);return e.setAttribute("d",i),e.setAttribute("class","arrow"),this.isLeft||e.setAttribute("transform","translate(100, 100) rotate(180) "),t.appendChild(e),t},s.prototype.onTap=function(){if(this.isEnabled){this.parent.uiChange();var t=this.isPrevious?"previous":"next";this.parent[t]()}},s.prototype.handleEvent=n.handleEvent,s.prototype.onclick=function(t){var e=document.activeElement;e&&e==this.element&&this.onTap(t,t)},s.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},s.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},s.prototype.update=function(){var t=this.parent.slides;if(this.parent.options.wrapAround&&t.length>1)return void this.enable();var e=t.length?t.length-1:0,i=this.isPrevious?0:e,n=this.parent.selectedIndex==i?"disable":"enable";this[n]()},s.prototype.destroy=function(){this.deactivate()},n.extend(e.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),e.createMethods.push("_createPrevNextButtons");var a=e.prototype;return a._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new s((-1),this),this.nextButton=new s(1,this),this.on("activate",this.activatePrevNextButtons))},a.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},a.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},e.PrevNextButton=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","tap-listener/tap-listener","fizzy-ui-utils/utils"],function(i,n,s){return e(t,i,n,s)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("tap-listener"),require("fizzy-ui-utils")):e(t,t.Flickity,t.TapListener,t.fizzyUIUtils)}(window,function(t,e,i,n){function s(t){this.parent=t,this._create()}s.prototype=new i,s.prototype._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.on("tap",this.onTap),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},s.prototype.activate=function(){this.setDots(),this.bindTap(this.holder),this.parent.element.appendChild(this.holder)},s.prototype.deactivate=function(){this.parent.element.removeChild(this.holder),i.prototype.destroy.call(this)},s.prototype.setDots=function(){var t=this.parent.slides.length-this.dots.length;t>0?this.addDots(t):t<0&&this.removeDots(-t)},s.prototype.addDots=function(t){for(var e=document.createDocumentFragment(),i=[],n=this.dots.length,s=n+t,o=n;o<s;o++){var r=document.createElement("li");r.className="dot",r.setAttribute("aria-label","Page dot "+(o+1)),e.appendChild(r),i.push(r)}this.holder.appendChild(e),this.dots=this.dots.concat(i)},s.prototype.removeDots=function(t){var e=this.dots.splice(this.dots.length-t,t);e.forEach(function(t){this.holder.removeChild(t)},this)},s.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},s.prototype.onTap=function(t){var e=t.target;if("LI"==e.nodeName){this.parent.uiChange();var i=this.dots.indexOf(e);this.parent.select(i)}},s.prototype.destroy=function(){this.deactivate()},e.PageDots=s,n.extend(e.defaults,{pageDots:!0}),e.createMethods.push("_createPageDots");var o=e.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new s(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},e.PageDots=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],function(t,i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):e(t.EvEmitter,t.fizzyUIUtils,t.Flickity)}(window,function(t,e,i){function n(t){this.parent=t,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}n.prototype=Object.create(t.prototype),n.prototype.play=function(){if("playing"!=this.state){var t=document.hidden;if(t)return void document.addEventListener("visibilitychange",this.onVisibilityPlay);this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()}},n.prototype.tick=function(){if("playing"==this.state){var t=this.parent.options.autoPlay;t="number"==typeof t?t:3e3;var e=this;this.clear(),this.timeout=setTimeout(function(){e.parent.next(!0),e.tick()},t)}},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){var t=document.hidden;this[t?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},e.extend(i.defaults,{pauseAutoPlayOnHover:!0}),i.createMethods.push("_createPlayer");var s=i.prototype;return s._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},s.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},s.playPlayer=function(){this.player.play()},s.stopPlayer=function(){this.player.stop()},s.pausePlayer=function(){this.player.pause()},s.unpausePlayer=function(){this.player.unpause()},s.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},s.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},s.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},i.Player=n,i}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){function n(t){var e=document.createDocumentFragment();return t.forEach(function(t){e.appendChild(t.element)}),e}var s=e.prototype;return s.insert=function(t,e){var i=this._makeCells(t);if(i&&i.length){var s=this.cells.length;e=void 0===e?s:e;var o=n(i),r=e==s;if(r)this.slider.appendChild(o);else{var a=this.cells[e].element;this.slider.insertBefore(o,a)}if(0===e)this.cells=i.concat(this.cells);else if(r)this.cells=this.cells.concat(i);else{var l=this.cells.splice(e,s-e);this.cells=this.cells.concat(i).concat(l)}this._sizeCells(i),this.cellChange(e,!0)}},s.append=function(t){this.insert(t,this.cells.length)},s.prepend=function(t){this.insert(t,0)},s.remove=function(t){var e=this.getCells(t);if(e&&e.length){var n=this.cells.length-1;e.forEach(function(t){t.remove();var e=this.cells.indexOf(t);n=Math.min(e,n),i.removeFrom(this.cells,t)},this),this.cellChange(n,!0)}},s.cellSizeChange=function(t){var e=this.getCell(t);if(e){e.getSize();var i=this.cells.indexOf(e);this.cellChange(i)}},s.cellChange=function(t,e){var i=this.selectedElement;this._positionCells(t),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(i);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[t]),this.select(this.selectedIndex),e&&this.positionSliderAtSelected()},e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("./flickity"),require("fizzy-ui-utils")):e(t,t.Flickity,t.fizzyUIUtils)}(window,function(t,e,i){"use strict";function n(t){if("IMG"==t.nodeName){var e=t.getAttribute("data-flickity-lazyload"),n=t.getAttribute("data-flickity-lazyload-src"),s=t.getAttribute("data-flickity-lazyload-srcset");if(e||n||s)return[t]}var o="img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]",r=t.querySelectorAll(o);return i.makeArray(r)}function s(t,e){this.img=t,this.flickity=e,this.load()}e.createMethods.push("_createLazyload");var o=e.prototype;return o._createLazyload=function(){this.on("select",this.lazyLoad)},o.lazyLoad=function(){var t=this.options.lazyLoad;if(t){var e="number"==typeof t?t:0,i=this.getAdjacentCellElements(e),o=[];i.forEach(function(t){var e=n(t);o=o.concat(e)}),o.forEach(function(t){new s(t,this)},this)}},s.prototype.handleEvent=i.handleEvent,s.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var t=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),e=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=t,e&&this.img.setAttribute("srcset",e),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},s.prototype.onload=function(t){this.complete(t,"flickity-lazyloaded")},s.prototype.onerror=function(t){this.complete(t,"flickity-lazyerror")},s.prototype.complete=function(t,e){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var i=this.flickity.getParentCell(this.img),n=i&&i.element;this.flickity.cellSizeChange(n),this.img.classList.add(e),this.flickity.dispatchEvent("lazyLoad",t,n)},e.LazyLoader=s,e}),function(t,e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}(window,function(t){return t}),function(t,e){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],e):"object"==typeof module&&module.exports?module.exports=e(require("flickity"),require("fizzy-ui-utils")):t.Flickity=e(t.Flickity,t.fizzyUIUtils)}(window,function(t,e){function i(t,e,i){return(e-t)*i+t}t.createMethods.push("_createAsNavFor");var n=t.prototype;return n._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var t=this.options.asNavFor;if(t){var e=this;setTimeout(function(){e.setNavCompanion(t)})}},n.setNavCompanion=function(i){i=e.getQueryElement(i);var n=t.data(i);if(n&&n!=this){this.navCompanion=n;var s=this;this.onNavCompanionSelect=function(){s.navCompanionSelect()},n.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0)}},n.navCompanionSelect=function(t){if(this.navCompanion){var e=this.navCompanion.selectedCells[0],n=this.navCompanion.cells.indexOf(e),s=n+this.navCompanion.selectedCells.length-1,o=Math.floor(i(n,s,this.navCompanion.cellAlign));if(this.selectCell(o,!1,t),this.removeNavSelectedElements(),!(o>=this.cells.length)){var r=this.cells.slice(n,s+1);this.navSelectedElements=r.map(function(t){return t.element}),this.changeNavSelectedClass("add")}}},n.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},n.activateAsNavFor=function(){this.navCompanionSelect(!0)},n.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},n.onNavStaticClick=function(t,e,i,n){"number"==typeof n&&this.navCompanion.selectCell(n)},n.deactivateAsNavFor=function(){this.removeNavSelectedElements()},n.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){if(Array.isArray(t))return t;var e="object"==typeof t&&"number"==typeof t.length;return e?h.call(t):[t]}function s(t,e,o){if(!(this instanceof s))return new s(t,e,o);var r=t;return"string"==typeof t&&(r=document.querySelectorAll(t)),r?(this.elements=n(r),this.options=i({},this.options),"function"==typeof e?o=e:i(this.options,e),o&&this.on("always",o),this.getImages(),a&&(this.jqDeferred=new a.Deferred),void setTimeout(this.check.bind(this))):void l.error("Bad element for imagesLoaded "+(r||t))}function o(t){this.img=t}function r(t,e){this.url=t,this.element=e,this.img=new Image}var a=t.jQuery,l=t.console,h=Array.prototype.slice;s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var s=i[n];this.addImage(s)}if("string"==typeof this.options.background){var o=t.querySelectorAll(this.options.background);for(n=0;n<o.length;n++){var r=o[n];this.addElementBackgroundImages(r)}}}};var c={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var s=n&&n[2];s&&this.addBackground(s,t),n=i.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var i=new r(t,e);this.images.push(i)},s.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},s.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,t,e)},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o.prototype=Object.create(e.prototype),o.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},o.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},o.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype=Object.create(o.prototype),r.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},s.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(a=e,a.fn.imagesLoaded=function(t,e){var i=new s(this,t,e);return i.jqDeferred.promise(a(this))})},s.makeJQueryPlugin(),s}),function(t,e){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(i,n){return e(t,i,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("flickity"),require("imagesloaded")):t.Flickity=e(t,t.Flickity,t.imagesLoaded)}(window,function(t,e,i){"use strict";e.createMethods.push("_createImagesLoaded");var n=e.prototype;return n._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},n.imagesLoaded=function(){function t(t,i){var n=e.getParentCell(i.img);e.cellSizeChange(n&&n.element),e.options.freeScroll||e.positionSliderAtSelected()}if(this.options.imagesLoaded){var e=this;i(this.slider).on("progress",t)}},e});/*!
* @overview es6-promise - a tiny implementation of Promises/A+.
* @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
* @license Licensed under MIT license
* See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
* @version 3.2.2+39aa2571
*/(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return typeof x==='function'||(typeof x==='object'&&x!==null);}
function lib$es6$promise$utils$$isFunction(x){return typeof x==='function';}
function lib$es6$promise$utils$$isMaybeThenable(x){return typeof x==='object'&&x!==null;}
var lib$es6$promise$utils$$_isArray;if(!Array.isArray){lib$es6$promise$utils$$_isArray=function(x){return Object.prototype.toString.call(x)==='[object Array]';};}else{lib$es6$promise$utils$$_isArray=Array.isArray;}
var lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray;var lib$es6$promise$asap$$len=0;var lib$es6$promise$asap$$vertxNext;var lib$es6$promise$asap$$customSchedulerFn;var lib$es6$promise$asap$$asap=function asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback;lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg;lib$es6$promise$asap$$len+=2;if(lib$es6$promise$asap$$len===2){if(lib$es6$promise$asap$$customSchedulerFn){lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);}else{lib$es6$promise$asap$$scheduleFlush();}}}
function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn;}
function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn;}
var lib$es6$promise$asap$$browserWindow=(typeof window!=='undefined')?window:undefined;var lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{};var lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;var lib$es6$promise$asap$$isNode=typeof self==='undefined'&&typeof process!=='undefined'&&{}.toString.call(process)==='[object process]';var lib$es6$promise$asap$$isWorker=typeof Uint8ClampedArray!=='undefined'&&typeof importScripts!=='undefined'&&typeof MessageChannel!=='undefined';function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush);};}
function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);};}
function lib$es6$promise$asap$$useMutationObserver(){var iterations=0;var observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);var node=document.createTextNode('');observer.observe(node,{characterData:true});return function(){node.data=(iterations=++iterations%2);};}
function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel();channel.port1.onmessage=lib$es6$promise$asap$$flush;return function(){channel.port2.postMessage(0);};}
function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1);};}
var lib$es6$promise$asap$$queue=new Array(1000);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){var callback=lib$es6$promise$asap$$queue[i];var arg=lib$es6$promise$asap$$queue[i+1];callback(arg);lib$es6$promise$asap$$queue[i]=undefined;lib$es6$promise$asap$$queue[i+1]=undefined;}
lib$es6$promise$asap$$len=0;}
function lib$es6$promise$asap$$attemptVertx(){try{var r=require;var vertx=r('vertx');lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext;return lib$es6$promise$asap$$useVertxTimer();}catch(e){return lib$es6$promise$asap$$useSetTimeout();}}
var lib$es6$promise$asap$$scheduleFlush;if(lib$es6$promise$asap$$isNode){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useNextTick();}else if(lib$es6$promise$asap$$BrowserMutationObserver){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMutationObserver();}else if(lib$es6$promise$asap$$isWorker){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMessageChannel();}else if(lib$es6$promise$asap$$browserWindow===undefined&&typeof require==='function'){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$attemptVertx();}else{lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useSetTimeout();}
function lib$es6$promise$then$$then(onFulfillment,onRejection){var parent=this;var child=new this.constructor(lib$es6$promise$$internal$$noop);if(child[lib$es6$promise$$internal$$PROMISE_ID]===undefined){lib$es6$promise$$internal$$makePromise(child);}
var state=parent._state;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,parent._result);});}else{lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection);}
return child;}
var lib$es6$promise$then$$default=lib$es6$promise$then$$then;function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&typeof object==='object'&&object.constructor===Constructor){return object;}
var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$resolve(promise,object);return promise;}
var lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve;var lib$es6$promise$$internal$$PROMISE_ID=Math.random().toString(36).substring(16);function lib$es6$promise$$internal$$noop(){}
var lib$es6$promise$$internal$$PENDING=void 0;var lib$es6$promise$$internal$$FULFILLED=1;var lib$es6$promise$$internal$$REJECTED=2;var lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject();function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself");}
function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError('A promises callback cannot return that same promise.');}
function lib$es6$promise$$internal$$getThen(promise){try{return promise.then;}catch(error){lib$es6$promise$$internal$$GET_THEN_ERROR.error=error;return lib$es6$promise$$internal$$GET_THEN_ERROR;}}
function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler);}catch(e){return e;}}
function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=false;var error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){if(sealed){return;}
sealed=true;if(thenable!==value){lib$es6$promise$$internal$$resolve(promise,value);}else{lib$es6$promise$$internal$$fulfill(promise,value);}},function(reason){if(sealed){return;}
sealed=true;lib$es6$promise$$internal$$reject(promise,reason);},'Settle: '+(promise._label||' unknown promise'));if(!sealed&&error){sealed=true;lib$es6$promise$$internal$$reject(promise,error);}},promise);}
function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){if(thenable._state===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,thenable._result);}else if(thenable._state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,thenable._result);}else{lib$es6$promise$$internal$$subscribe(thenable,undefined,function(value){lib$es6$promise$$internal$$resolve(promise,value);},function(reason){lib$es6$promise$$internal$$reject(promise,reason);});}}
function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable,then){if(maybeThenable.constructor===promise.constructor&&then===lib$es6$promise$then$$default&&constructor.resolve===lib$es6$promise$promise$resolve$$default){lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable);}else{if(then===lib$es6$promise$$internal$$GET_THEN_ERROR){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error);}else if(then===undefined){lib$es6$promise$$internal$$fulfill(promise,maybeThenable);}else if(lib$es6$promise$utils$$isFunction(then)){lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then);}else{lib$es6$promise$$internal$$fulfill(promise,maybeThenable);}}}
function lib$es6$promise$$internal$$resolve(promise,value){if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment());}else if(lib$es6$promise$utils$$objectOrFunction(value)){lib$es6$promise$$internal$$handleMaybeThenable(promise,value,lib$es6$promise$$internal$$getThen(value));}else{lib$es6$promise$$internal$$fulfill(promise,value);}}
function lib$es6$promise$$internal$$publishRejection(promise){if(promise._onerror){promise._onerror(promise._result);}
lib$es6$promise$$internal$$publish(promise);}
function lib$es6$promise$$internal$$fulfill(promise,value){if(promise._state!==lib$es6$promise$$internal$$PENDING){return;}
promise._result=value;promise._state=lib$es6$promise$$internal$$FULFILLED;if(promise._subscribers.length!==0){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise);}}
function lib$es6$promise$$internal$$reject(promise,reason){if(promise._state!==lib$es6$promise$$internal$$PENDING){return;}
promise._state=lib$es6$promise$$internal$$REJECTED;promise._result=reason;lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise);}
function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers;var length=subscribers.length;parent._onerror=null;subscribers[length]=child;subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment;subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection;if(length===0&&parent._state){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent);}}
function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return;}
var child,callback,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail);}else{callback(detail);}}
promise._subscribers.length=0;}
function lib$es6$promise$$internal$$ErrorObject(){this.error=null;}
var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject();function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail);}catch(e){lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e;return lib$es6$promise$$internal$$TRY_CATCH_ERROR;}}
function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var hasCallback=lib$es6$promise$utils$$isFunction(callback),value,error,succeeded,failed;if(hasCallback){value=lib$es6$promise$$internal$$tryCatch(callback,detail);if(value===lib$es6$promise$$internal$$TRY_CATCH_ERROR){failed=true;error=value.error;value=null;}else{succeeded=true;}
if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn());return;}}else{value=detail;succeeded=true;}
if(promise._state!==lib$es6$promise$$internal$$PENDING){}else if(hasCallback&&succeeded){lib$es6$promise$$internal$$resolve(promise,value);}else if(failed){lib$es6$promise$$internal$$reject(promise,error);}else if(settled===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,value);}else if(settled===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value);}}
function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function resolvePromise(value){lib$es6$promise$$internal$$resolve(promise,value);},function rejectPromise(reason){lib$es6$promise$$internal$$reject(promise,reason);});}catch(e){lib$es6$promise$$internal$$reject(promise,e);}}
var lib$es6$promise$$internal$$id=0;function lib$es6$promise$$internal$$nextId(){return lib$es6$promise$$internal$$id++;}
function lib$es6$promise$$internal$$makePromise(promise){promise[lib$es6$promise$$internal$$PROMISE_ID]=lib$es6$promise$$internal$$id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[];}
function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise;}
var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all;function lib$es6$promise$promise$race$$race(entries){var Constructor=this;if(!lib$es6$promise$utils$$isArray(entries)){return new Constructor(function(resolve,reject){reject(new TypeError('You must pass an array to race.'));});}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject);}});}}
var lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race;function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$reject(promise,reason);return promise;}
var lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject;function lib$es6$promise$promise$$needsResolver(){throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');}
function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}
var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this[lib$es6$promise$$internal$$PROMISE_ID]=lib$es6$promise$$internal$$nextId();this._result=this._state=undefined;this._subscribers=[];if(lib$es6$promise$$internal$$noop!==resolver){typeof resolver!=='function'&&lib$es6$promise$promise$$needsResolver();this instanceof lib$es6$promise$promise$$Promise?lib$es6$promise$$internal$$initializePromise(this,resolver):lib$es6$promise$promise$$needsNew();}}
lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default;lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default;lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default;lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default;lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler;lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap;lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap;lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:lib$es6$promise$then$$default,'catch':function(onRejection){return this.then(null,onRejection);}};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;function lib$es6$promise$enumerator$$Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(lib$es6$promise$$internal$$noop);if(!this.promise[lib$es6$promise$$internal$$PROMISE_ID]){lib$es6$promise$$internal$$makePromise(this.promise);}
if(lib$es6$promise$utils$$isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){lib$es6$promise$$internal$$fulfill(this.promise,this._result);}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){lib$es6$promise$$internal$$fulfill(this.promise,this._result);}}}else{lib$es6$promise$$internal$$reject(this.promise,lib$es6$promise$enumerator$$validationError());}}
function lib$es6$promise$enumerator$$validationError(){return new Error('Array Methods must be provided an Array');}
lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){var length=this.length;var input=this._input;for(var i=0;this._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){this._eachEntry(input[i],i);}};lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve=c.resolve;if(resolve===lib$es6$promise$promise$resolve$$default){var then=lib$es6$promise$$internal$$getThen(entry);if(then===lib$es6$promise$then$$default&&entry._state!==lib$es6$promise$$internal$$PENDING){this._settledAt(entry._state,i,entry._result);}else if(typeof then!=='function'){this._remaining--;this._result[i]=entry;}else if(c===lib$es6$promise$promise$$default){var promise=new c(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$handleMaybeThenable(promise,entry,then);this._willSettleAt(promise,i);}else{this._willSettleAt(new c(function(resolve){resolve(entry);}),i);}}else{this._willSettleAt(resolve(entry),i);}};lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===lib$es6$promise$$internal$$PENDING){this._remaining--;if(state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value);}else{this._result[i]=value;}}
if(this._remaining===0){lib$es6$promise$$internal$$fulfill(promise,this._result);}};lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,undefined,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value);},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason);});};function lib$es6$promise$polyfill$$polyfill(){var local;if(typeof global!=='undefined'){local=global;}else if(typeof self!=='undefined'){local=self;}else{try{local=Function('return this')();}catch(e){throw new Error('polyfill failed because global object is unavailable in this environment');}}
var P=local.Promise;if(P&&Object.prototype.toString.call(P.resolve())==='[object Promise]'&&!P.cast){return;}
local.Promise=lib$es6$promise$promise$$default;}
var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill;lib$es6$promise$promise$$default.Promise=lib$es6$promise$promise$$default;lib$es6$promise$promise$$default.polyfill=lib$es6$promise$polyfill$$default;if(typeof define==='function'&&define['amd']){define(function(){return lib$es6$promise$promise$$default;});}else if(typeof module!=='undefined'&&module['exports']){module['exports']=lib$es6$promise$promise$$default;}else if(typeof this!=='undefined'){this['Promise']=lib$es6$promise$promise$$default;}
lib$es6$promise$polyfill$$default();}).call(this);!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AOS=t():e.AOS=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(1),a=(o(r),n(6)),u=o(a),c=n(7),f=o(c),s=n(8),d=o(s),l=n(9),p=o(l),m=n(10),b=o(m),v=n(11),y=o(v),g=n(14),h=o(g),w=[],k=!1,x={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(k=!0),k)return w=(0,y.default)(w,x),(0,b.default)(w,x.once),w},O=function(){w=(0,h.default)(),j()},_=function(){w.forEach(function(e,t){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay")})},S=function(e){return e===!0||"mobile"===e&&p.default.mobile()||"phone"===e&&p.default.phone()||"tablet"===e&&p.default.tablet()||"function"==typeof e&&e()===!0},z=function(e){x=i(x,e),w=(0,h.default)();var t=document.all&&!window.atob;return S(x.disable)||t?_():(document.querySelector("body").setAttribute("data-aos-easing",x.easing),document.querySelector("body").setAttribute("data-aos-duration",x.duration),document.querySelector("body").setAttribute("data-aos-delay",x.delay),"DOMContentLoaded"===x.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?j(!0):"load"===x.startEvent?window.addEventListener(x.startEvent,function(){j(!0)}):document.addEventListener(x.startEvent,function(){j(!0)}),window.addEventListener("resize",(0,f.default)(j,x.debounceDelay,!0)),window.addEventListener("orientationchange",(0,f.default)(j,x.debounceDelay,!0)),window.addEventListener("scroll",(0,u.default)(function(){(0,b.default)(w,x.once)},x.throttleDelay)),x.disableMutationObserver||(0,d.default)("[data-aos]",O),w)};e.exports={init:z,refresh:j,refreshHard:O}},function(e,t){},,,,,function(e,t){(function(t){"use strict";function n(e,t,n){function o(t){var n=b,o=v;return b=v=void 0,k=t,g=e.apply(o,n)}function r(e){return k=e,h=setTimeout(s,t),_?o(e):g}function a(e){var n=e-w,o=e-k,i=t-n;return S?j(i,y-o):i}function c(e){var n=e-w,o=e-k;return void 0===w||n>=t||n<0||S&&o>=y}function s(){var e=O();return c(e)?d(e):void(h=setTimeout(s,a(e)))}function d(e){return h=void 0,z&&b?o(e):(b=v=void 0,g)}function l(){void 0!==h&&clearTimeout(h),k=0,b=w=v=h=void 0}function p(){return void 0===h?g:d(O())}function m(){var e=O(),n=c(e);if(b=arguments,v=this,w=e,n){if(void 0===h)return r(w);if(S)return h=setTimeout(s,t),o(w)}return void 0===h&&(h=setTimeout(s,t)),g}var b,v,y,g,h,w,k=0,_=!1,S=!1,z=!0;if("function"!=typeof e)throw new TypeError(f);return t=u(t)||0,i(n)&&(_=!!n.leading,S="maxWait"in n,y=S?x(u(n.maxWait)||0,t):y,z="trailing"in n?!!n.trailing:z),m.cancel=l,m.flush=p,m}function o(e,t,o){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError(f);return i(o)&&(r="leading"in o?!!o.leading:r,a="trailing"in o?!!o.trailing:a),n(e,t,{leading:r,maxWait:t,trailing:a})}function i(e){var t="undefined"==typeof e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function r(e){return!!e&&"object"==("undefined"==typeof e?"undefined":c(e))}function a(e){return"symbol"==("undefined"==typeof e?"undefined":c(e))||r(e)&&k.call(e)==d}function u(e){if("number"==typeof e)return e;if(a(e))return s;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(l,"");var n=m.test(e);return n||b.test(e)?v(e.slice(2),n?2:8):p.test(e)?s:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f="Expected a function",s=NaN,d="[object Symbol]",l=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,b=/^0o[0-7]+$/i,v=parseInt,y="object"==("undefined"==typeof t?"undefined":c(t))&&t&&t.Object===Object&&t,g="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,h=y||g||Function("return this")(),w=Object.prototype,k=w.toString,x=Math.max,j=Math.min,O=function(){return h.Date.now()};e.exports=o}).call(t,function(){return this}())},function(e,t){(function(t){"use strict";function n(e,t,n){function i(t){var n=b,o=v;return b=v=void 0,O=t,g=e.apply(o,n)}function r(e){return O=e,h=setTimeout(s,t),_?i(e):g}function u(e){var n=e-w,o=e-O,i=t-n;return S?x(i,y-o):i}function f(e){var n=e-w,o=e-O;return void 0===w||n>=t||n<0||S&&o>=y}function s(){var e=j();return f(e)?d(e):void(h=setTimeout(s,u(e)))}function d(e){return h=void 0,z&&b?i(e):(b=v=void 0,g)}function l(){void 0!==h&&clearTimeout(h),O=0,b=w=v=h=void 0}function p(){return void 0===h?g:d(j())}function m(){var e=j(),n=f(e);if(b=arguments,v=this,w=e,n){if(void 0===h)return r(w);if(S)return h=setTimeout(s,t),i(w)}return void 0===h&&(h=setTimeout(s,t)),g}var b,v,y,g,h,w,O=0,_=!1,S=!1,z=!0;if("function"!=typeof e)throw new TypeError(c);return t=a(t)||0,o(n)&&(_=!!n.leading,S="maxWait"in n,y=S?k(a(n.maxWait)||0,t):y,z="trailing"in n?!!n.trailing:z),m.cancel=l,m.flush=p,m}function o(e){var t="undefined"==typeof e?"undefined":u(e);return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==("undefined"==typeof e?"undefined":u(e))}function r(e){return"symbol"==("undefined"==typeof e?"undefined":u(e))||i(e)&&w.call(e)==s}function a(e){if("number"==typeof e)return e;if(r(e))return f;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=p.test(e);return n||m.test(e)?b(e.slice(2),n?2:8):l.test(e)?f:+e}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c="Expected a function",f=NaN,s="[object Symbol]",d=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,b=parseInt,v="object"==("undefined"==typeof t?"undefined":u(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":u(self))&&self&&self.Object===Object&&self,g=v||y||Function("return this")(),h=Object.prototype,w=h.toString,k=Math.max,x=Math.min,j=function(){return g.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t){var n=window.document,r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,a=new r(o);i=t,a.observe(n.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function o(e){e&&e.forEach(function(e){var t=Array.prototype.slice.call(e.addedNodes),n=Array.prototype.slice.call(e.removedNodes),o=t.concat(n).filter(function(e){return e.hasAttribute&&e.hasAttribute("data-aos")}).length;o&&i()})}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){};t.default=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,a=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,u=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,c=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,f=function(){function e(){n(this,e)}return i(e,[{key:"phone",value:function(){var e=o();return!(!r.test(e)&&!a.test(e.substr(0,4)))}},{key:"mobile",value:function(){var e=o();return!(!u.test(e)&&!c.test(e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),e}();t.default=new f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,n){var o=e.node.getAttribute("data-aos-once");t>e.position?e.node.classList.add("aos-animate"):"undefined"!=typeof o&&("false"===o||!n&&"true"!==o)&&e.node.classList.remove("aos-animate")},o=function(e,t){var o=window.pageYOffset,i=window.innerHeight;e.forEach(function(e,r){n(e,i+o,t)})};t.default=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=o(i),a=function(e,t){return e.forEach(function(e,n){e.node.classList.add("aos-init"),e.position=(0,r.default)(e.node,t.offset)}),e};t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=o(i),a=function(e,t){var n=0,o=0,i=window.innerHeight,a={offset:e.getAttribute("data-aos-offset"),anchor:e.getAttribute("data-aos-anchor"),anchorPlacement:e.getAttribute("data-aos-anchor-placement")};switch(a.offset&&!isNaN(a.offset)&&(o=parseInt(a.offset)),a.anchor&&document.querySelectorAll(a.anchor)&&(e=document.querySelectorAll(a.anchor)[0]),n=(0,r.default)(e).top,a.anchorPlacement){case"top-bottom":break;case"center-bottom":n+=e.offsetHeight/2;break;case"bottom-bottom":n+=e.offsetHeight;break;case"top-center":n+=i/2;break;case"bottom-center":n+=i/2+e.offsetHeight;break;case"center-center":n+=i/2+e.offsetHeight/2;break;case"top-top":n+=i;break;case"bottom-top":n+=e.offsetHeight+i;break;case"center-top":n+=e.offsetHeight/2+i}return a.anchorPlacement||a.offset||isNaN(t)||(o=t),n+o};t.default=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!=e.tagName?e.scrollLeft:0),n+=e.offsetTop-("BODY"!=e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:n,left:t}};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e=e||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(e,function(e){return{node:e}})};t.default=n}])});/*!
* Bowser - a browser detector
* https://github.com/ded/bowser
* MIT License | (c) Dustin Diaz 2015
*/!function(name,definition){if(typeof module!='undefined'&&module.exports)module.exports=definition()
else if(typeof define=='function'&&define.amd)define(name,definition)
else this[name]=definition()}('bowser',function(){var t=true
function detect(ua){function getFirstMatch(regex){var match=ua.match(regex);return(match&&match.length>1&&match[1])||'';}
function getSecondMatch(regex){var match=ua.match(regex);return(match&&match.length>1&&match[2])||'';}
var iosdevice=getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase(),likeAndroid=/like android/i.test(ua),android=!likeAndroid&&/android/i.test(ua),nexusMobile=/nexus\s*[0-6]\s*/i.test(ua),nexusTablet=!nexusMobile&&/nexus\s*[0-9]+/i.test(ua),chromeos=/CrOS/.test(ua),silk=/silk/i.test(ua),sailfish=/sailfish/i.test(ua),tizen=/tizen/i.test(ua),webos=/(web|hpw)os/i.test(ua),windowsphone=/windows phone/i.test(ua),samsungBrowser=/SamsungBrowser/i.test(ua),windows=!windowsphone&&/windows/i.test(ua),mac=!iosdevice&&!silk&&/macintosh/i.test(ua),linux=!android&&!sailfish&&!tizen&&!webos&&/linux/i.test(ua),edgeVersion=getFirstMatch(/edge\/(\d+(\.\d+)?)/i),versionIdentifier=getFirstMatch(/version\/(\d+(\.\d+)?)/i),tablet=/tablet/i.test(ua),mobile=!tablet&&/[^-]mobi/i.test(ua),xbox=/xbox/i.test(ua),result
if(/opera|opr|opios/i.test(ua)){result={name:'Opera',opera:t,version:versionIdentifier||getFirstMatch(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}}
else if(/SamsungBrowser/i.test(ua)){result={name:'Samsung Internet for Android',samsungBrowser:t,version:versionIdentifier||getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}}
else if(/coast/i.test(ua)){result={name:'Opera Coast',coast:t,version:versionIdentifier||getFirstMatch(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}}
else if(/yabrowser/i.test(ua)){result={name:'Yandex Browser',yandexbrowser:t,version:versionIdentifier||getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}}
else if(/ucbrowser/i.test(ua)){result={name:'UC Browser',ucbrowser:t,version:getFirstMatch(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}}
else if(/mxios/i.test(ua)){result={name:'Maxthon',maxthon:t,version:getFirstMatch(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}}
else if(/epiphany/i.test(ua)){result={name:'Epiphany',epiphany:t,version:getFirstMatch(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}}
else if(/puffin/i.test(ua)){result={name:'Puffin',puffin:t,version:getFirstMatch(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}}
else if(/sleipnir/i.test(ua)){result={name:'Sleipnir',sleipnir:t,version:getFirstMatch(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}}
else if(/k-meleon/i.test(ua)){result={name:'K-Meleon',kMeleon:t,version:getFirstMatch(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}}
else if(windowsphone){result={name:'Windows Phone',windowsphone:t}
if(edgeVersion){result.msedge=t
result.version=edgeVersion}
else{result.msie=t
result.version=getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)}}
else if(/msie|trident/i.test(ua)){result={name:'Internet Explorer',msie:t,version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else if(chromeos){result={name:'Chrome',chromeos:t,chromeBook:t,chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(/chrome.+? edge/i.test(ua)){result={name:'Microsoft Edge',msedge:t,version:edgeVersion}}
else if(/vivaldi/i.test(ua)){result={name:'Vivaldi',vivaldi:t,version:getFirstMatch(/vivaldi\/(\d+(\.\d+)?)/i)||versionIdentifier}}
else if(sailfish){result={name:'Sailfish',sailfish:t,version:getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}}
else if(/seamonkey\//i.test(ua)){result={name:'SeaMonkey',seamonkey:t,version:getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)}}
else if(/firefox|iceweasel|fxios/i.test(ua)){result={name:'Firefox',firefox:t,version:getFirstMatch(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)}
if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)){result.firefoxos=t}}
else if(silk){result={name:'Amazon Silk',silk:t,version:getFirstMatch(/silk\/(\d+(\.\d+)?)/i)}}
else if(/phantom/i.test(ua)){result={name:'PhantomJS',phantom:t,version:getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)}}
else if(/slimerjs/i.test(ua)){result={name:'SlimerJS',slimer:t,version:getFirstMatch(/slimerjs\/(\d+(\.\d+)?)/i)}}
else if(/blackberry|\bbb\d+/i.test(ua)||/rim\stablet/i.test(ua)){result={name:'BlackBerry',blackberry:t,version:versionIdentifier||getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}}
else if(webos){result={name:'WebOS',webos:t,version:versionIdentifier||getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(ua)&&(result.touchpad=t)}
else if(/bada/i.test(ua)){result={name:'Bada',bada:t,version:getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)};}
else if(tizen){result={name:'Tizen',tizen:t,version:getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||versionIdentifier};}
else if(/qupzilla/i.test(ua)){result={name:'QupZilla',qupzilla:t,version:getFirstMatch(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||versionIdentifier}}
else if(/chromium/i.test(ua)){result={name:'Chromium',chromium:t,version:getFirstMatch(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||versionIdentifier}}
else if(/chrome|crios|crmo/i.test(ua)){result={name:'Chrome',chrome:t,version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}
else if(android){result={name:'Android',version:versionIdentifier}}
else if(/safari|applewebkit/i.test(ua)){result={name:'Safari',safari:t}
if(versionIdentifier){result.version=versionIdentifier}}
else if(iosdevice){result={name:iosdevice=='iphone'?'iPhone':iosdevice=='ipad'?'iPad':'iPod'}
if(versionIdentifier){result.version=versionIdentifier}}
else if(/googlebot/i.test(ua)){result={name:'Googlebot',googlebot:t,version:getFirstMatch(/googlebot\/(\d+(\.\d+))/i)||versionIdentifier}}
else{result={name:getFirstMatch(/^(.*)\/(.*) /),version:getSecondMatch(/^(.*)\/(.*) /)};}
if(!result.msedge&&/(apple)?webkit/i.test(ua)){if(/(apple)?webkit\/537\.36/i.test(ua)){result.name=result.name||"Blink"
result.blink=t}else{result.name=result.name||"Webkit"
result.webkit=t}
if(!result.version&&versionIdentifier){result.version=versionIdentifier}}else if(!result.opera&&/gecko\//i.test(ua)){result.name=result.name||"Gecko"
result.gecko=t
result.version=result.version||getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)}
if(!result.msedge&&(android||result.silk)){result.android=t}else if(iosdevice){result[iosdevice]=t
result.ios=t}else if(mac){result.mac=t}else if(xbox){result.xbox=t}else if(windows){result.windows=t}else if(linux){result.linux=t}
var osVersion='';if(result.windowsphone){osVersion=getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);}else if(iosdevice){osVersion=getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);osVersion=osVersion.replace(/[_\s]/g,'.');}else if(android){osVersion=getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i);}else if(result.webos){osVersion=getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);}else if(result.blackberry){osVersion=getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i);}else if(result.bada){osVersion=getFirstMatch(/bada\/(\d+(\.\d+)*)/i);}else if(result.tizen){osVersion=getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i);}
if(osVersion){result.osversion=osVersion;}
var osMajorVersion=osVersion.split('.')[0];if(tablet||nexusTablet||iosdevice=='ipad'||(android&&(osMajorVersion==3||(osMajorVersion>=4&&!mobile)))||result.silk){result.tablet=t}else if(mobile||iosdevice=='iphone'||iosdevice=='ipod'||android||nexusMobile||result.blackberry||result.webos||result.bada){result.mobile=t}
if(result.msedge||(result.msie&&result.version>=10)||(result.yandexbrowser&&result.version>=15)||(result.vivaldi&&result.version>=1.0)||(result.chrome&&result.version>=20)||(result.samsungBrowser&&result.version>=4)||(result.firefox&&result.version>=20.0)||(result.safari&&result.version>=6)||(result.opera&&result.version>=10.0)||(result.ios&&result.osversion&&result.osversion.split(".")[0]>=6)||(result.blackberry&&result.version>=10.1)||(result.chromium&&result.version>=20)){result.a=t;}
else if((result.msie&&result.version<10)||(result.chrome&&result.version<20)||(result.firefox&&result.version<20.0)||(result.safari&&result.version<6)||(result.opera&&result.version<10.0)||(result.ios&&result.osversion&&result.osversion.split(".")[0]<6)||(result.chromium&&result.version<20)){result.c=t}else result.x=t
return result}
var bowser=detect(typeof navigator!=='undefined'?navigator.userAgent||'':'')
bowser.test=function(browserList){for(var i=0;i<browserList.length;++i){var browserItem=browserList[i];if(typeof browserItem==='string'){if(browserItem in bowser){return true;}}}
return false;}
function getVersionPrecision(version){return version.split(".").length;}
function map(arr,iterator){var result=[],i;if(Array.prototype.map){return Array.prototype.map.call(arr,iterator);}
for(i=0;i<arr.length;i++){result.push(iterator(arr[i]));}
return result;}
function compareVersions(versions){var precision=Math.max(getVersionPrecision(versions[0]),getVersionPrecision(versions[1]));var chunks=map(versions,function(version){var delta=precision-getVersionPrecision(version);version=version+new Array(delta+1).join(".0");return map(version.split("."),function(chunk){return new Array(20-chunk.length).join("0")+chunk;}).reverse();});while(--precision>=0){if(chunks[0][precision]>chunks[1][precision]){return 1;}
else if(chunks[0][precision]===chunks[1][precision]){if(precision===0){return 0;}}
else{return-1;}}}
function isUnsupportedBrowser(minVersions,strictMode,ua){var _bowser=bowser;if(typeof strictMode==='string'){ua=strictMode;strictMode=void(0);}
if(strictMode===void(0)){strictMode=false;}
if(ua){_bowser=detect(ua);}
var version=""+_bowser.version;for(var browser in minVersions){if(minVersions.hasOwnProperty(browser)){if(_bowser[browser]){return compareVersions([version,minVersions[browser]])<0;}}}
return strictMode;}
function check(minVersions,strictMode,ua){return!isUnsupportedBrowser(minVersions,strictMode,ua);}
bowser.isUnsupportedBrowser=isUnsupportedBrowser;bowser.compareVersions=compareVersions;bowser.check=check;bowser._detect=detect;return bowser});(function($){var lastSize=0;var interval=null;$.fn.resetBreakpoints=function(){$(window).unbind('resize');if(interval){clearInterval(interval);}
lastSize=0;};$.fn.setBreakpoints=function(settings){var options=jQuery.extend({distinct:true,breakpoints:new Array(320,480,768,1024)},settings);interval=setInterval(function(){var w=$(window).width();var done=false;for(var bp in options.breakpoints.sort(function(a,b){return(b-a)})){if(!done&&w>=options.breakpoints[bp]&&lastSize<options.breakpoints[bp]){if(options.distinct){for(var x in options.breakpoints.sort(function(a,b){return(b-a)})){if($('body').hasClass('breakpoint-'+options.breakpoints[x])){$('body').removeClass('breakpoint-'+options.breakpoints[x]);$(window).trigger('exitBreakpoint'+options.breakpoints[x]);}}
done=true;}
$('body').addClass('breakpoint-'+options.breakpoints[bp]);$(window).trigger('enterBreakpoint'+options.breakpoints[bp]);}
if(w<options.breakpoints[bp]&&lastSize>=options.breakpoints[bp]){$('body').removeClass('breakpoint-'+options.breakpoints[bp]);$(window).trigger('exitBreakpoint'+options.breakpoints[bp]);}
if(options.distinct&&w>=options.breakpoints[bp]&&w<options.breakpoints[bp-1]&&lastSize>w&&lastSize>0&&!$('body').hasClass('breakpoint-'+options.breakpoints[bp])){$('body').addClass('breakpoint-'+options.breakpoints[bp]);$(window).trigger('enterBreakpoint'+options.breakpoints[bp]);}}
if(lastSize!=w){lastSize=w;}},250);};})(jQuery);/*!
* Clamp.js 0.11.1
*
* Now Maintained by Josh English http://joshengish.com
* Joseph Schmitt http://joe.sh
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/(function(root,factory){if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.$clamp=factory();}}(this,function(){function clamp(element,options){options=options||{};var self=this,win=window,opt={clamp:options.clamp||2,useNativeClamp:typeof(options.useNativeClamp)!='undefined'?options.useNativeClamp:true,splitOnChars:options.splitOnChars||['.','-','','',' '],animate:options.animate||false,truncationChar:options.truncationChar||'',truncationHTML:options.truncationHTML},sty=element.style,originalText=element.innerHTML,supportsNativeClamp=typeof(element.style.webkitLineClamp)!='undefined',clampValue=opt.clamp,isCSSValue=clampValue.indexOf&&(clampValue.indexOf('px')>-1||clampValue.indexOf('em')>-1),truncationHTMLContainer;if(opt.truncationHTML){truncationHTMLContainer=document.createElement('span');truncationHTMLContainer.innerHTML=opt.truncationHTML;}
function computeStyle(elem,prop){if(!win.getComputedStyle){win.getComputedStyle=function(el,pseudo){this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop=='float')prop='styleFloat';if(re.test(prop)){prop=prop.replace(re,function(){return arguments[2].toUpperCase();});}
return el.currentStyle&&el.currentStyle[prop]?el.currentStyle[prop]:null;};return this;};}
return win.getComputedStyle(elem,null).getPropertyValue(prop);}
function getMaxLines(height){var availHeight=height||element.clientHeight,lineHeight=getLineHeight(element);return Math.max(Math.floor(availHeight/lineHeight),0);}
function getMaxHeight(clmp){var lineHeight=getLineHeight(element);return lineHeight*clmp;}
function getLineHeight(elem){var lh=computeStyle(elem,'line-height');if(lh=='normal'){lh=parseInt(computeStyle(elem,'font-size'))*1.2;}
return parseInt(lh);}
var splitOnChars=opt.splitOnChars.slice(0),splitChar=splitOnChars[0],chunks,lastChunk;function getLastChild(elem){if(!elem.lastChild){return;}
if(elem.lastChild.children&&elem.lastChild.children.length>0){return getLastChild(Array.prototype.slice.call(elem.children).pop());}
else if(!elem.lastChild||!elem.lastChild.nodeValue||elem.lastChild.nodeValue===''||elem.lastChild.nodeValue==opt.truncationChar){elem.lastChild.parentNode.removeChild(elem.lastChild);return getLastChild(element);}
else{return elem.lastChild;}}
function truncate(target,maxHeight){if(!target||!maxHeight){return;}
function reset(){splitOnChars=opt.splitOnChars.slice(0);splitChar=splitOnChars[0];chunks=null;lastChunk=null;}
var nodeValue=target.nodeValue.replace(opt.truncationChar,'');if(!chunks){if(splitOnChars.length>0){splitChar=splitOnChars.shift();}
else{splitChar='';}
chunks=nodeValue.split(splitChar);}
if(chunks.length>1){lastChunk=chunks.pop();applyEllipsis(target,chunks.join(splitChar));}
else{chunks=null;}
if(truncationHTMLContainer){target.nodeValue=target.nodeValue.replace(opt.truncationChar,'');element.innerHTML=target.nodeValue+' '+truncationHTMLContainer.innerHTML+opt.truncationChar;}
if(chunks){if(element.clientHeight<=maxHeight){if(splitOnChars.length>=0&&splitChar!==''){applyEllipsis(target,chunks.join(splitChar)+splitChar+lastChunk);chunks=null;}
else{return element.innerHTML;}}}
else{if(splitChar===''){applyEllipsis(target,'');target=getLastChild(element);reset();}}
if(opt.animate){setTimeout(function(){truncate(target,maxHeight);},opt.animate===true?10:opt.animate);}else{return truncate(target,maxHeight);}}
function applyEllipsis(elem,str){elem.nodeValue=str+opt.truncationChar;}
if(clampValue=='auto'){clampValue=getMaxLines();}else if(isCSSValue){clampValue=getMaxLines(parseInt(clampValue));}
var clampedText;if(supportsNativeClamp&&opt.useNativeClamp){sty.overflow='hidden';sty.textOverflow='ellipsis';sty.webkitBoxOrient='vertical';sty.display='-webkit-box';sty.webkitLineClamp=clampValue;if(isCSSValue){sty.height=opt.clamp+'px';}}else{var height=getMaxHeight(clampValue);if(height<=element.clientHeight){clampedText=truncate(getLastChild(element),height);}}
return{'original':originalText,'clamped':clampedText};}
return clamp;}));/*!
* clipboard.js v1.5.15
* https://zenorocha.github.io/clipboard.js
*
* Licensed MIT  Zeno Rocha
*/!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e,t,n;return function e(t,n,i){function o(a,c){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){function i(e,t){for(;e&&e!==document;){if(e.matches(t))return e;e=e.parentNode}}if(Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}t.exports=i},{}],2:[function(e,t,n){function i(e,t,n,i,r){var a=o.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}function o(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}var r=e("./closest");t.exports=i},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!c.string(t))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(e))return o(e,t,n);if(c.nodeList(e))return r(e,t,n);if(c.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function r(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var c=e("./is"),l=e("delegate");t.exports=i},{"./is":3,delegate:2}],5:[function(e,t,n){function i(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}t.exports=i},{}],6:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){o.off(e,i),t.apply(n,arguments)}var o=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,o=n.length;for(i;i<o;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],o=[];if(i&&t)for(var r=0,a=i.length;r<a;r++)i[r].fn!==t&&i[r].fn._!==t&&o.push(i[r]);return o.length?n[e]=o:delete n[e],this}},t.exports=i},{}],7:[function(t,n,i){!function(o,r){if("function"==typeof e&&e.amd)e(["module","select"],r);else if("undefined"!=typeof i)r(n,t("select"));else{var a={exports:{}};r(a,o.select),o.clipboardAction=a.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(t),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(){function e(t){i(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function e(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function e(){var t=this,n="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[n?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,i)),this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,o.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function e(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function e(){this.selectedText=(0,o.default)(this.target),this.copyText()}},{key:"copyText",value:function e(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function e(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function e(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function e(){this.removeFake()}},{key:"action",set:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function e(){return this._action}},{key:"target",set:function e(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function e(){return this._target}}]),e}();e.exports=c})},{select:5}],8:[function(t,n,i){!function(o,r){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if("undefined"!=typeof i)r(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var a={exports:{}};r(a,o.clipboardAction,o.tinyEmitter,o.goodListener),o.clipboard=a.exports}}(this,function(e,t,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var s=o(t),u=o(n),f=o(i),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e,n){r(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return c(t,e),d(t,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText}},{key:"listenClick",value:function e(t){var n=this;this.listener=(0,f.default)(t,"click",function(e){return n.onClick(e)})}},{key:"onClick",value:function e(t){var n=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(n),target:this.target(n),text:this.text(n),trigger:n,emitter:this})}},{key:"defaultAction",value:function e(t){return l("action",t)}},{key:"defaultTarget",value:function e(t){var n=l("target",t);if(n)return document.querySelector(n)}},{key:"defaultText",value:function e(t){return l("text",t)}},{key:"destroy",value:function e(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}(u.default);e.exports=h})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});(function(){var attachEvent=document.attachEvent,stylesCreated=false;if(!attachEvent){var requestFrame=(function(){var raf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return window.setTimeout(fn,20);};return function(fn){return raf(fn);};})();var cancelFrame=(function(){var cancel=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(id){return cancel(id);};})();function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth;contract.scrollTop=contract.scrollHeight;expandChild.style.width=expand.offsetWidth+1+'px';expandChild.style.height=expand.offsetHeight+1+'px';expand.scrollLeft=expand.scrollWidth;expand.scrollTop=expand.scrollHeight;};function checkTriggers(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height;}
function scrollListener(e){var element=this;resetTriggers(this);if(this.__resizeRAF__)cancelFrame(this.__resizeRAF__);this.__resizeRAF__=requestFrame(function(){if(checkTriggers(element)){element.__resizeLast__.width=element.offsetWidth;element.__resizeLast__.height=element.offsetHeight;element.__resizeListeners__.forEach(function(fn){fn.call(element,e);});}});};var animation=false,animationstring='animation',keyframeprefix='',animationstartevent='animationstart',domPrefixes='Webkit Moz O ms'.split(' '),startEvents='webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' '),pfx='';{var elm=document.createElement('fakeelement');if(elm.style.animationName!==undefined){animation=true;}
if(animation===false){for(var i=0;i<domPrefixes.length;i++){if(elm.style[domPrefixes[i]+'AnimationName']!==undefined){pfx=domPrefixes[i];animationstring=pfx+'Animation';keyframeprefix='-'+pfx.toLowerCase()+'-';animationstartevent=startEvents[i];animation=true;break;}}}}
var animationName='resizeanim';var animationKeyframes='@'+keyframeprefix+'keyframes '+animationName+' { from { opacity: 0; } to { opacity: 0; } } ';var animationStyle=keyframeprefix+'animation: 1ms '+animationName+'; ';}
function createStyles(){if(!stylesCreated){var css=(animationKeyframes?animationKeyframes:'')+
'.resize-triggers { '+(animationStyle?animationStyle:'')+'visibility: hidden; opacity: 0; } '+
'.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=document.head||document.getElementsByTagName('head')[0],style=document.createElement('style');style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=css;}else{style.appendChild(document.createTextNode(css));}
head.appendChild(style);stylesCreated=true;}}
window.addResizeListener=function(element,fn){if(attachEvent)element.attachEvent('onresize',fn);else{if(!element.__resizeTriggers__){if(getComputedStyle(element).position=='static')element.style.position='relative';createStyles();element.__resizeLast__={};element.__resizeListeners__=[];(element.__resizeTriggers__=document.createElement('div')).className='resize-triggers';element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div>'+
'<div class="contract-trigger"></div>';element.appendChild(element.__resizeTriggers__);resetTriggers(element);element.addEventListener('scroll',scrollListener,true);animationstartevent&&element.__resizeTriggers__.addEventListener(animationstartevent,function(e){if(e.animationName==animationName)
resetTriggers(element);});}
element.__resizeListeners__.push(fn);}};window.removeResizeListener=function(element,fn){if(attachEvent)element.detachEvent('onresize',fn);else{element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1);if(!element.__resizeListeners__.length){element.removeEventListener('scroll',scrollListener);element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__);}}}})();/*!device.js 0.2.7*/(function(){var a,b,c,d,e,f,g,h,i,j;b=window.device,a={},window.device=a,d=window.document.documentElement,j=window.navigator.userAgent.toLowerCase(),a.ios=function(){return a.iphone()||a.ipod()||a.ipad()},a.iphone=function(){return!a.windows()&&e("iphone")},a.ipod=function(){return e("ipod")},a.ipad=function(){return e("ipad")},a.android=function(){return!a.windows()&&e("android")},a.androidPhone=function(){return a.android()&&e("mobile")},a.androidTablet=function(){return a.android()&&!e("mobile")},a.blackberry=function(){return e("blackberry")||e("bb10")||e("rim")},a.blackberryPhone=function(){return a.blackberry()&&!e("tablet")},a.blackberryTablet=function(){return a.blackberry()&&e("tablet")},a.windows=function(){return e("windows")},a.windowsPhone=function(){return a.windows()&&e("phone")},a.windowsTablet=function(){return a.windows()&&e("touch")&&!a.windowsPhone()},a.fxos=function(){return(e("(mobile;")||e("(tablet;"))&&e("; rv:")},a.fxosPhone=function(){return a.fxos()&&e("mobile")},a.fxosTablet=function(){return a.fxos()&&e("tablet")},a.meego=function(){return e("meego")},a.cordova=function(){return window.cordova&&"file:"===location.protocol},a.nodeWebkit=function(){return"object"==typeof window.process},a.mobile=function(){return a.androidPhone()||a.iphone()||a.ipod()||a.windowsPhone()||a.blackberryPhone()||a.fxosPhone()||a.meego()},a.tablet=function(){return a.ipad()||a.androidTablet()||a.blackberryTablet()||a.windowsTablet()||a.fxosTablet()},a.desktop=function(){return!a.tablet()&&!a.mobile()},a.television=function(){var a;for(television=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","roku","pov_tv","hbbtv","ce-html"],a=0;a<television.length;){if(e(television[a]))return!0;a++}return!1},a.portrait=function(){return window.innerHeight/window.innerWidth>1},a.landscape=function(){return window.innerHeight/window.innerWidth<1},a.noConflict=function(){return window.device=b,this},e=function(a){return-1!==j.indexOf(a)},g=function(a){var b;return b=new RegExp(a,"i"),d.className.match(b)},c=function(a){var b=null;g(a)||(b=d.className.replace(/^\s+|\s+$/g,""),d.className=b+" "+a)},i=function(a){g(a)&&(d.className=d.className.replace(" "+a,""))},a.ios()?a.ipad()?c("ios ipad tablet"):a.iphone()?c("ios iphone mobile"):a.ipod()&&c("ios ipod mobile"):a.android()?c(a.androidTablet()?"android tablet":"android mobile"):a.blackberry()?c(a.blackberryTablet()?"blackberry tablet":"blackberry mobile"):a.windows()?c(a.windowsTablet()?"windows tablet":a.windowsPhone()?"windows mobile":"desktop"):a.fxos()?c(a.fxosTablet()?"fxos tablet":"fxos mobile"):a.meego()?c("meego mobile"):a.nodeWebkit()?c("node-webkit"):a.television()?c("television"):a.desktop()&&c("desktop"),a.cordova()&&c("cordova"),f=function(){a.landscape()?(i("portrait"),c("landscape")):(i("landscape"),c("portrait"))},h=Object.prototype.hasOwnProperty.call(window,"onorientationchange")?"orientationchange":"resize",window.addEventListener?window.addEventListener(h,f,!1):window.attachEvent?window.attachEvent(h,f):window[h]=f,f(),"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window.device=a}).call(this);var EventDispatcher=function(){};Object.assign(EventDispatcher.prototype,{addEventListener:function(type,listener){if(this._listeners===undefined)this._listeners={};var listeners=this._listeners;if(listeners[type]===undefined){listeners[type]=[];}
if(listeners[type].indexOf(listener)===-1){listeners[type].push(listener);}},hasEventListener:function(type,listener){if(this._listeners===undefined)return false;var listeners=this._listeners;if(listeners[type]!==undefined&&listeners[type].indexOf(listener)!==-1){return true;}
return false;},removeEventListener:function(type,listener){if(this._listeners===undefined)return;var listeners=this._listeners;var listenerArray=listeners[type];if(listenerArray!==undefined){var index=listenerArray.indexOf(listener);if(index!==-1){listenerArray.splice(index,1);}}},dispatchEvent:function(event){if(this._listeners===undefined)return;var listeners=this._listeners;var listenerArray=listeners[event.type];if(listenerArray!==undefined){event.target=this;var array=[],i=0;var length=listenerArray.length;for(i=0;i<length;i++){array[i]=listenerArray[i];}
for(i=0;i<length;i++){array[i].call(this,event);}}}});(function(){var local;if(typeof global!=='undefined')local=global;else if(typeof window!=='undefined'&&window.document)local=window;else local=self;local.Promise.prototype['finally']=function finallyPolyfill(callback){var constructor=this.constructor;return this.then(function(value){return constructor.resolve(callback()).then(function(){return value;});},function(reason){return constructor.resolve(callback()).then(function(){throw reason;});});};}());/*!
* FitVids 1.1
*
* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
*/;(function($){'use strict';$.fn.fitVids=function(options){var settings={customSelector:null,ignore:null};if(!document.getElementById('fit-vids-style')){var head=document.head||document.getElementsByTagName('head')[0];var css='.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';var div=document.createElement("div");div.innerHTML='<p>x</p><style id="fit-vids-style">'+css+'</style>';head.appendChild(div.childNodes[1]);}
if(options){$.extend(settings,options);}
return this.each(function(){var selectors=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]','object','embed'];if(settings.customSelector){selectors.push(settings.customSelector);}
var ignoreList='.fitvidsignore';if(settings.ignore){ignoreList=ignoreList+', '+settings.ignore;}
var $allVideos=$(this).find(selectors.join(','));$allVideos=$allVideos.not('object object');$allVideos=$allVideos.not(ignoreList);$allVideos.each(function(){var $this=$(this);if($this.parents(ignoreList).length>0){return;}
if(this.tagName.toLowerCase()==='embed'&&$this.parent('object').length||$this.parent('.fluid-width-video-wrapper').length){return;}
if((!$this.css('height')&&!$this.css('width'))&&(isNaN($this.attr('height'))||isNaN($this.attr('width'))))
{$this.attr('height',9);$this.attr('width',16);}
var height=(this.tagName.toLowerCase()==='object'||($this.attr('height')&&!isNaN(parseInt($this.attr('height'),10))))?parseInt($this.attr('height'),10):$this.height(),width=!isNaN(parseInt($this.attr('width'),10))?parseInt($this.attr('width'),10):$this.width(),aspectRatio=height/width;if(!$this.attr('name')){var videoName='fitvid'+$.fn.fitVids._count;$this.attr('name',videoName);$.fn.fitVids._count++;}
$this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top',(aspectRatio*100)+'%');$this.removeAttr('height').removeAttr('width');});});};$.fn.fitVids._count=0;})(window.jQuery||window.Zepto);/*!
* Flickity imagesLoaded v2.0.0
* enables imagesLoaded option for Flickity
*/(function(window,factory){if(typeof define=='function'&&define.amd){define(['flickity/js/index','imagesloaded/imagesloaded'],function(Flickity,imagesLoaded){return factory(window,Flickity,imagesLoaded);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('flickity'),require('imagesloaded'));}else{window.Flickity=factory(window,window.Flickity,window.imagesLoaded);}}(window,function factory(window,Flickity,imagesLoaded){'use strict';Flickity.createMethods.push('_createImagesLoaded');var proto=Flickity.prototype;proto._createImagesLoaded=function(){this.on('activate',this.imagesLoaded);};proto.imagesLoaded=function(){if(!this.options.imagesLoaded){return;}
var _this=this;function onImagesLoadedProgress(instance,image){var cell=_this.getParentCell(image.img);_this.cellSizeChange(cell&&cell.element);if(!_this.options.freeScroll){_this.positionSliderAtSelected();}}
imagesLoaded(this.slider).on('progress',onImagesLoadedProgress);};return Flickity;}));(function($,window,undefined){'$:nomunge';var str_hashchange='hashchange',doc=document,fake_onhashchange,special=$.event.special,doc_mode=doc.documentMode,supports_onhashchange='on'+str_hashchange in window&&(doc_mode===undefined||doc_mode>7);function get_fragment(url){url=url||location.href;var index=url.indexOf('#');return index===-1?'#':url.substr(index);};$.fn[str_hashchange]=function(fn){return fn?this.bind(str_hashchange,fn):this.trigger(str_hashchange);};$.fn[str_hashchange].delay=50;special[str_hashchange]=$.extend(special[str_hashchange],{setup:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.start);},teardown:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.stop);}});fake_onhashchange=(function(){var self={},timeout_id,last_hash=get_fragment(),fn_retval=function(val){return val;},history_set=fn_retval,history_get=fn_retval;self.start=function(){timeout_id||poll();};self.stop=function(){timeout_id&&clearTimeout(timeout_id);timeout_id=undefined;};function poll(){var hash=get_fragment(),history_hash=history_get(last_hash);if(hash!==last_hash){history_set(last_hash=hash,history_hash);$(window).trigger(str_hashchange);}else if(history_hash!==last_hash){location.href=location.href.replace(/#.*/,'')+history_hash;}
timeout_id=setTimeout(poll,$.fn[str_hashchange].delay);};window.attachEvent&&!window.addEventListener&&!supports_onhashchange&&(function(){var iframe,iframe_src;self.start=function(){if(!iframe){iframe_src=$.fn[str_hashchange].src;iframe_src=iframe_src&&iframe_src+get_fragment();iframe=$('<iframe tabindex="-1" title="empty"/>').hide().one('load',function(){iframe_src||history_set(get_fragment());poll();}).attr('src',iframe_src||'javascript:0').insertAfter('body')[0].contentWindow;doc.onpropertychange=function(){try{if(event.propertyName==='title'){iframe.document.title=doc.title;}}catch(e){}};}};self.stop=fn_retval;history_get=function(){return get_fragment(iframe.location.href);};history_set=function(hash,history_hash){var iframe_doc=iframe.document,domain=$.fn[str_hashchange].domain;if(hash!==history_hash){iframe_doc.title=doc.title;iframe_doc.open();domain&&iframe_doc.write('<script>document.domain="'+domain+'"</script>');iframe_doc.close();iframe.location.hash=hash;}};})();return self;})();})(jQuery,this);jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});!function(t,e,n,o){"use strict";function i(t,e){var o,i,a,s=[],r=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},t&&t.data&&(e=h(t.data.options,e)),o=e.$target||n(t.currentTarget).trigger("blur"),(a=n.fancybox.getInstance())&&a.$trigger&&a.$trigger.is(o)||(e.selector?s=n(e.selector):(i=o.attr("data-fancybox")||"",i?(s=t.data?t.data.items:[],s=s.length?s.filter('[data-fancybox="'+i+'"]'):n('[data-fancybox="'+i+'"]')):s=[o]),r=n(s).index(o),r<0&&(r=0),a=n.fancybox.open(s,e,r),a.$trigger=o))}if(t.console=t.console||{info:function(t){}},n){if(n.fn.fancybox)return void console.info("fancyBox already initialized");var a={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},s=n(t),r=n(e),c=0,l=function(t){return t&&t.hasOwnProperty&&t instanceof n},d=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),u=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),f=function(){var t,n=e.createElement("fakeelement"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in o)if(void 0!==n.style[t])return o[t];return"transitionend"}(),p=function(t){return t&&t.length&&t[0].offsetHeight},h=function(t,e){var o=n.extend(!0,{},t,e);return n.each(e,function(t,e){n.isArray(e)&&(o[t]=e)}),o},g=function(t){var o,i;return!(!t||t.ownerDocument!==e)&&(n(".fancybox-container").css("pointer-events","none"),o={x:t.getBoundingClientRect().left+t.offsetWidth/2,y:t.getBoundingClientRect().top+t.offsetHeight/2},i=e.elementFromPoint(o.x,o.y)===t,n(".fancybox-container").css("pointer-events",""),i)},b=function(t,e,o){var i=this;i.opts=h({index:o},n.fancybox.defaults),n.isPlainObject(e)&&(i.opts=h(i.opts,e)),n.fancybox.isMobile&&(i.opts=h(i.opts,i.opts.mobile)),i.id=i.opts.id||++c,i.currIndex=parseInt(i.opts.index,10)||0,i.prevIndex=null,i.prevPos=null,i.currPos=0,i.firstRun=!0,i.group=[],i.slides={},i.addContent(t),i.group.length&&i.init()};n.extend(b.prototype,{init:function(){var o,i,a=this,s=a.group[a.currIndex],r=s.opts;r.closeExisting&&n.fancybox.close(!0),n("body").addClass("fancybox-active"),!n.fancybox.getInstance()&&!1!==r.hideScrollbar&&!n.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(t.innerWidth-e.documentElement.clientWidth)+"px;}</style>"),n("body").addClass("compensate-for-scrollbar")),i="",n.each(r.buttons,function(t,e){i+=r.btnTpl[e]||""}),o=n(a.translate(a,r.baseTpl.replace("{{buttons}}",i).replace("{{arrows}}",r.btnTpl.arrowLeft+r.btnTpl.arrowRight))).attr("id","fancybox-container-"+a.id).addClass(r.baseClass).data("FancyBox",a).appendTo(r.parentEl),a.$refs={container:o},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){a.$refs[t]=o.find(".fancybox-"+t)}),a.trigger("onInit"),a.activate(),a.jumpTo(a.currIndex)},translate:function(t,e){var n=t.opts.i18n[t.opts.lang]||t.opts.i18n.en;return e.replace(/\{\{(\w+)\}\}/g,function(t,e){return void 0===n[e]?t:n[e]})},addContent:function(t){var e,o=this,i=n.makeArray(t);n.each(i,function(t,e){var i,a,s,r,c,l={},d={};n.isPlainObject(e)?(l=e,d=e.opts||e):"object"===n.type(e)&&n(e).length?(i=n(e),d=i.data()||{},d=n.extend(!0,{},d,d.options),d.$orig=i,l.src=o.opts.src||d.src||i.attr("href"),l.type||l.src||(l.type="inline",l.src=e)):l={type:"html",src:e+""},l.opts=n.extend(!0,{},o.opts,d),n.isArray(d.buttons)&&(l.opts.buttons=d.buttons),n.fancybox.isMobile&&l.opts.mobile&&(l.opts=h(l.opts,l.opts.mobile)),a=l.type||l.opts.type,r=l.src||"",!a&&r&&((s=r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(a="video",l.opts.video.format||(l.opts.video.format="video/"+("ogv"===s[1]?"ogg":s[1]))):r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?a="image":r.match(/\.(pdf)((\?|#).*)?$/i)?(a="iframe",l=n.extend(!0,l,{contentType:"pdf",opts:{iframe:{preload:!1}}})):"#"===r.charAt(0)&&(a="inline")),a?l.type=a:o.trigger("objectNeedsType",l),l.contentType||(l.contentType=n.inArray(l.type,["html","inline","ajax"])>-1?"html":l.type),l.index=o.group.length,"auto"==l.opts.smallBtn&&(l.opts.smallBtn=n.inArray(l.type,["html","inline","ajax"])>-1),"auto"===l.opts.toolbar&&(l.opts.toolbar=!l.opts.smallBtn),l.$thumb=l.opts.$thumb||null,l.opts.$trigger&&l.index===o.opts.index&&(l.$thumb=l.opts.$trigger.find("img:first"),l.$thumb.length&&(l.opts.$orig=l.opts.$trigger)),l.$thumb&&l.$thumb.length||!l.opts.$orig||(l.$thumb=l.opts.$orig.find("img:first")),l.$thumb&&!l.$thumb.length&&(l.$thumb=null),l.thumb=l.opts.thumb||(l.$thumb?l.$thumb[0].src:null),"function"===n.type(l.opts.caption)&&(l.opts.caption=l.opts.caption.apply(e,[o,l])),"function"===n.type(o.opts.caption)&&(l.opts.caption=o.opts.caption.apply(e,[o,l])),l.opts.caption instanceof n||(l.opts.caption=void 0===l.opts.caption?"":l.opts.caption+""),"ajax"===l.type&&(c=r.split(/\s+/,2),c.length>1&&(l.src=c.shift(),l.opts.filter=c.shift())),l.opts.modal&&(l.opts=n.extend(!0,l.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),o.group.push(l)}),Object.keys(o.slides).length&&(o.updateControls(),(e=o.Thumbs)&&e.isActive&&(e.create(),e.focus()))},addEvents:function(){var e=this;e.removeEvents(),e.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),e.close(t)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),e.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),e.next()}).on("click.fb","[data-fancybox-zoom]",function(t){e[e.isScaledDown()?"scaleToActual":"scaleToFit"]()}),s.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?(e.requestId&&u(e.requestId),e.requestId=d(function(){e.update(t)})):(e.current&&"iframe"===e.current.type&&e.$refs.stage.hide(),setTimeout(function(){e.$refs.stage.show(),e.update(t)},n.fancybox.isMobile?600:250))}),r.on("keydown.fb",function(t){var o=n.fancybox?n.fancybox.getInstance():null,i=o.current,a=t.keyCode||t.which;if(9==a)return void(i.opts.trapFocus&&e.focus(t));if(!(!i.opts.keyboard||t.ctrlKey||t.altKey||t.shiftKey||n(t.target).is("input,textarea,video,audio,select")))return 8===a||27===a?(t.preventDefault(),void e.close(t)):37===a||38===a?(t.preventDefault(),void e.previous()):39===a||40===a?(t.preventDefault(),void e.next()):void e.trigger("afterKeydown",t,a)}),e.group[e.currIndex].opts.idleTime&&(e.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){e.idleSecondsCounter=0,e.isIdle&&e.showControls(),e.isIdle=!1}),e.idleInterval=t.setInterval(function(){++e.idleSecondsCounter>=e.group[e.currIndex].opts.idleTime&&!e.isDragging&&(e.isIdle=!0,e.idleSecondsCounter=0,e.hideControls())},1e3))},removeEvents:function(){var e=this;s.off("orientationchange.fb resize.fb"),r.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),e.idleInterval&&(t.clearInterval(e.idleInterval),e.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e){var o,i,a,s,r,c,l,d,u,f=this,h=f.group.length;if(!(f.isDragging||f.isClosing||f.isAnimating&&f.firstRun)){if(t=parseInt(t,10),!(a=f.current?f.current.opts.loop:f.opts.loop)&&(t<0||t>=h))return!1;if(o=f.firstRun=!Object.keys(f.slides).length,r=f.current,f.prevIndex=f.currIndex,f.prevPos=f.currPos,s=f.createSlide(t),h>1&&((a||s.index<h-1)&&f.createSlide(t+1),(a||s.index>0)&&f.createSlide(t-1)),f.current=s,f.currIndex=s.index,f.currPos=s.pos,f.trigger("beforeShow",o),f.updateControls(),s.forcedDuration=void 0,n.isNumeric(e)?s.forcedDuration=e:e=s.opts[o?"animationDuration":"transitionDuration"],e=parseInt(e,10),i=f.isMoved(s),s.$slide.addClass("fancybox-slide--current"),o)return s.opts.animationEffect&&e&&f.$refs.container.css("transition-duration",e+"ms"),f.$refs.container.addClass("fancybox-is-open").trigger("focus"),f.loadSlide(s),void f.preload("image");c=n.fancybox.getTranslate(r.$slide),l=n.fancybox.getTranslate(f.$refs.stage),n.each(f.slides,function(t,e){n.fancybox.stop(e.$slide,!0)}),r.pos!==s.pos&&(r.isComplete=!1),r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),i?(u=c.left-(r.pos*c.width+r.pos*r.opts.gutter),n.each(f.slides,function(t,o){o.$slide.removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});var i=o.pos*c.width+o.pos*o.opts.gutter;n.fancybox.setTranslate(o.$slide,{top:0,left:i-l.left+u}),o.pos!==s.pos&&o.$slide.addClass("fancybox-slide--"+(o.pos>s.pos?"next":"previous")),p(o.$slide),n.fancybox.animate(o.$slide,{top:0,left:(o.pos-s.pos)*c.width+(o.pos-s.pos)*o.opts.gutter},e,function(){o.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),o.pos===f.currPos&&f.complete()})})):e&&s.opts.transitionEffect&&(d="fancybox-animated fancybox-fx-"+s.opts.transitionEffect,r.$slide.addClass("fancybox-slide--"+(r.pos>s.pos?"next":"previous")),n.fancybox.animate(r.$slide,d,e,function(){r.$slide.removeClass(d).removeClass("fancybox-slide--next fancybox-slide--previous")},!1)),s.isLoaded?f.revealContent(s):f.loadSlide(s),f.preload("image")}},createSlide:function(t){var e,o,i=this;return o=t%i.group.length,o=o<0?i.group.length+o:o,!i.slides[t]&&i.group[o]&&(e=n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage),i.slides[t]=n.extend(!0,{},i.group[o],{pos:t,$slide:e,isLoaded:!1}),i.updateSlide(i.slides[t])),i.slides[t]},scaleToActual:function(t,e,o){var i,a,s,r,c,l=this,d=l.current,u=d.$content,f=n.fancybox.getTranslate(d.$slide).width,p=n.fancybox.getTranslate(d.$slide).height,h=d.width,g=d.height;l.isAnimating||l.isMoved()||!u||"image"!=d.type||!d.isLoaded||d.hasError||(l.isAnimating=!0,n.fancybox.stop(u),t=void 0===t?.5*f:t,e=void 0===e?.5*p:e,i=n.fancybox.getTranslate(u),i.top-=n.fancybox.getTranslate(d.$slide).top,i.left-=n.fancybox.getTranslate(d.$slide).left,r=h/i.width,c=g/i.height,a=.5*f-.5*h,s=.5*p-.5*g,h>f&&(a=i.left*r-(t*r-t),a>0&&(a=0),a<f-h&&(a=f-h)),g>p&&(s=i.top*c-(e*c-e),s>0&&(s=0),s<p-g&&(s=p-g)),l.updateCursor(h,g),n.fancybox.animate(u,{top:s,left:a,scaleX:r,scaleY:c},o||366,function(){l.isAnimating=!1}),l.SlideShow&&l.SlideShow.isActive&&l.SlideShow.stop())},scaleToFit:function(t){var e,o=this,i=o.current,a=i.$content;o.isAnimating||o.isMoved()||!a||"image"!=i.type||!i.isLoaded||i.hasError||(o.isAnimating=!0,n.fancybox.stop(a),e=o.getFitPos(i),o.updateCursor(e.width,e.height),n.fancybox.animate(a,{top:e.top,left:e.left,scaleX:e.width/a.width(),scaleY:e.height/a.height()},t||366,function(){o.isAnimating=!1}))},getFitPos:function(t){var e,o,i,a,s=this,r=t.$content,c=t.$slide,l=t.width||t.opts.width,d=t.height||t.opts.height,u={};return!!(t.isLoaded&&r&&r.length)&&(e=n.fancybox.getTranslate(s.$refs.stage).width,o=n.fancybox.getTranslate(s.$refs.stage).height,e-=parseFloat(c.css("paddingLeft"))+parseFloat(c.css("paddingRight"))+parseFloat(r.css("marginLeft"))+parseFloat(r.css("marginRight")),o-=parseFloat(c.css("paddingTop"))+parseFloat(c.css("paddingBottom"))+parseFloat(r.css("marginTop"))+parseFloat(r.css("marginBottom")),l&&d||(l=e,d=o),i=Math.min(1,e/l,o/d),l*=i,d*=i,l>e-.5&&(l=e),d>o-.5&&(d=o),"image"===t.type?(u.top=Math.floor(.5*(o-d))+parseFloat(c.css("paddingTop")),u.left=Math.floor(.5*(e-l))+parseFloat(c.css("paddingLeft"))):"video"===t.contentType&&(a=t.opts.width&&t.opts.height?l/d:t.opts.ratio||16/9,d>l/a?d=l/a:l>d*a&&(l=d*a)),u.width=l,u.height=d,u)},update:function(t){var e=this;n.each(e.slides,function(n,o){e.updateSlide(o,t)})},updateSlide:function(t,e){var o=this,i=t&&t.$content,a=t.width||t.opts.width,s=t.height||t.opts.height,r=t.$slide;o.adjustCaption(t),i&&(a||s||"video"===t.contentType)&&!t.hasError&&(n.fancybox.stop(i),n.fancybox.setTranslate(i,o.getFitPos(t)),t.pos===o.currPos&&(o.isAnimating=!1,o.updateCursor())),o.adjustLayout(t),r.length&&(r.trigger("refresh"),t.pos===o.currPos&&o.$refs.toolbar.add(o.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",r.get(0).scrollHeight>r.get(0).clientHeight)),o.trigger("onUpdate",t,e)},centerSlide:function(t){var e=this,o=e.current,i=o.$slide;!e.isClosing&&o&&(i.siblings().css({transform:"",opacity:""}),i.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),n.fancybox.animate(i,{top:0,left:0,opacity:1},void 0===t?0:t,function(){i.css({transform:"",opacity:""}),o.isComplete||e.complete()},!1))},isMoved:function(t){var e,o,i=t||this.current;return!!i&&(o=n.fancybox.getTranslate(this.$refs.stage),e=n.fancybox.getTranslate(i.$slide),!i.$slide.hasClass("fancybox-animated")&&(Math.abs(e.top-o.top)>.5||Math.abs(e.left-o.left)>.5))},updateCursor:function(t,e){var o,i,a=this,s=a.current,r=a.$refs.container;s&&!a.isClosing&&a.Guestures&&(r.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),o=a.canPan(t,e),i=!!o||a.isZoomable(),r.toggleClass("fancybox-is-zoomable",i),n("[data-fancybox-zoom]").prop("disabled",!i),o?r.addClass("fancybox-can-pan"):i&&("zoom"===s.opts.clickContent||n.isFunction(s.opts.clickContent)&&"zoom"==s.opts.clickContent(s))?r.addClass("fancybox-can-zoomIn"):s.opts.touch&&(s.opts.touch.vertical||a.group.length>1)&&"video"!==s.contentType&&r.addClass("fancybox-can-swipe"))},isZoomable:function(){var t,e=this,n=e.current;if(n&&!e.isClosing&&"image"===n.type&&!n.hasError){if(!n.isLoaded)return!0;if((t=e.getFitPos(n))&&(n.width>t.width||n.height>t.height))return!0}return!1},isScaledDown:function(t,e){var o=this,i=!1,a=o.current,s=a.$content;return void 0!==t&&void 0!==e?i=t<a.width&&e<a.height:s&&(i=n.fancybox.getTranslate(s),i=i.width<a.width&&i.height<a.height),i},canPan:function(t,e){var o=this,i=o.current,a=null,s=!1;return"image"===i.type&&(i.isComplete||t&&e)&&!i.hasError&&(s=o.getFitPos(i),void 0!==t&&void 0!==e?a={width:t,height:e}:i.isComplete&&(a=n.fancybox.getTranslate(i.$content)),a&&s&&(s=Math.abs(a.width-s.width)>1.5||Math.abs(a.height-s.height)>1.5)),s},loadSlide:function(t){var e,o,i,a=this;if(!t.isLoading&&!t.isLoaded){if(t.isLoading=!0,!1===a.trigger("beforeLoad",t))return t.isLoading=!1,!1;switch(e=t.type,o=t.$slide,o.off("refresh").trigger("onReset").addClass(t.opts.slideClass),e){case"image":a.setImage(t);break;case"iframe":a.setIframe(t);break;case"html":a.setContent(t,t.src||t.content);break;case"video":a.setContent(t,t.opts.video.tpl.replace(/\{\{src\}\}/gi,t.src).replace("{{format}}",t.opts.videoFormat||t.opts.video.format||"").replace("{{poster}}",t.thumb||""));break;case"inline":n(t.src).length?a.setContent(t,n(t.src)):a.setError(t);break;case"ajax":a.showLoading(t),i=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&a.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&a.setError(t)}})),o.one("onReset",function(){i.abort()});break;default:a.setError(t)}return!0}},setImage:function(t){var o,i=this;setTimeout(function(){var e=t.$image;i.isClosing||!t.isLoading||e&&e.length&&e[0].complete||t.hasError||i.showLoading(t)},50),i.checkSrcset(t),t.$content=n('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(t.$slide.addClass("fancybox-slide--image")),!1!==t.opts.preload&&t.opts.width&&t.opts.height&&t.thumb&&(t.width=t.opts.width,t.height=t.opts.height,o=e.createElement("img"),o.onerror=function(){n(this).remove(),t.$ghost=null},o.onload=function(){i.afterLoad(t)},t.$ghost=n(o).addClass("fancybox-image").appendTo(t.$content).attr("src",t.thumb)),i.setBigImage(t)},checkSrcset:function(e){var n,o,i,a,s=e.opts.srcset||e.opts.image.srcset;if(s){i=t.devicePixelRatio||1,a=t.innerWidth*i,o=s.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,n){var o=parseInt(t.substring(0,t.length-1),10);if(0===n)return e.url=t;o&&(e.value=o,e.postfix=t[t.length-1])}),e}),o.sort(function(t,e){return t.value-e.value});for(var r=0;r<o.length;r++){var c=o[r];if("w"===c.postfix&&c.value>=a||"x"===c.postfix&&c.value>=i){n=c;break}}!n&&o.length&&(n=o[o.length-1]),n&&(e.src=n.url,e.width&&e.height&&"w"==n.postfix&&(e.height=e.width/e.height*n.value,e.width=n.value),e.opts.srcset=s)}},setBigImage:function(t){var o=this,i=e.createElement("img"),a=n(i);t.$image=a.one("error",function(){o.setError(t)}).one("load",function(){var e;t.$ghost||(o.resolveImageSlideSize(t,this.naturalWidth,this.naturalHeight),o.afterLoad(t)),o.isClosing||(t.opts.srcset&&(e=t.opts.sizes,e&&"auto"!==e||(e=(t.width/t.height>1&&s.width()/s.height()>1?"100":Math.round(t.width/t.height*100))+"vw"),a.attr("sizes",e).attr("srcset",t.opts.srcset)),t.$ghost&&setTimeout(function(){t.$ghost&&!o.isClosing&&t.$ghost.hide()},Math.min(300,Math.max(1e3,t.height/1600))),o.hideLoading(t))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(i.complete||"complete"==i.readyState)&&a.naturalWidth&&a.naturalHeight?a.trigger("load"):i.error&&a.trigger("error")},resolveImageSlideSize:function(t,e,n){var o=parseInt(t.opts.width,10),i=parseInt(t.opts.height,10);t.width=e,t.height=n,o>0&&(t.width=o,t.height=Math.floor(o*n/e)),i>0&&(t.width=Math.floor(i*e/n),t.height=i)},setIframe:function(t){var e,o=this,i=t.opts.iframe,a=t.$slide;t.$content=n('<div class="fancybox-content'+(i.preload?" fancybox-is-hidden":"")+'"></div>').css(i.css).appendTo(a),a.addClass("fancybox-slide--"+t.contentType),t.$iframe=e=n(i.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(i.attr).appendTo(t.$content),i.preload?(o.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),o.afterLoad(t)}),a.on("refresh.fb",function(){var n,o,s=t.$content,r=i.css.width,c=i.css.height;if(1===e[0].isReady){try{n=e.contents(),o=n.find("body")}catch(t){}o&&o.length&&o.children().length&&(a.css("overflow","visible"),s.css({width:"100%","max-width":"100%",height:"9999px"}),void 0===r&&(r=Math.ceil(Math.max(o[0].clientWidth,o.outerWidth(!0)))),s.css("width",r||"").css("max-width",""),void 0===c&&(c=Math.ceil(Math.max(o[0].clientHeight,o.outerHeight(!0)))),s.css("height",c||""),a.css("overflow","auto")),s.removeClass("fancybox-is-hidden")}})):o.afterLoad(t),e.attr("src",t.src),a.one("onReset",function(){try{n(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}n(this).off("refresh.fb").empty(),t.isLoaded=!1,t.isRevealed=!1})},setContent:function(t,e){var o=this;o.isClosing||(o.hideLoading(t),t.$content&&n.fancybox.stop(t.$content),t.$slide.empty(),l(e)&&e.parent().length?((e.hasClass("fancybox-content")||e.parent().hasClass("fancybox-content"))&&e.parents(".fancybox-slide").trigger("onReset"),t.$placeholder=n("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===n.type(e)&&(e=n("<div>").append(n.trim(e)).contents()),t.opts.filter&&(e=n("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){n(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(n(this).empty(),t.isLoaded=!1,t.isRevealed=!1)}),n(e).appendTo(t.$slide),n(e).is("video,audio")&&(n(e).addClass("fancybox-video"),n(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||n(e).attr("width"),t.opts.height=t.opts.height||n(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),t.$content.siblings().hide(),t.$content.length||(t.$content=t.$slide.wrapInner("<div></div>").children().first()),t.$content.addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),o.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){var e=this;(t=t||e.current)&&!t.$spinner&&(t.$spinner=n(e.translate(e,e.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"))},hideLoading:function(t){var e=this;(t=t||e.current)&&t.$spinner&&(t.$spinner.stop().remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=n(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.adjustCaption(t),e.adjustLayout(t),t.pos===e.currPos&&e.updateCursor(),e.revealContent(t))},adjustCaption:function(t){var e,n=this,o=t||n.current,i=o.opts.caption,a=o.opts.preventCaptionOverlap,s=n.$refs.caption,r=!1;s.toggleClass("fancybox-caption--separate",a),a&&i&&i.length&&(o.pos!==n.currPos?(e=s.clone().appendTo(s.parent()),e.children().eq(0).empty().html(i),r=e.outerHeight(!0),e.empty().remove()):n.$caption&&(r=n.$caption.outerHeight(!0)),o.$slide.css("padding-bottom",r||""))},adjustLayout:function(t){var e,n,o,i,a=this,s=t||a.current;s.isLoaded&&!0!==s.opts.disableLayoutFix&&(s.$content.css("margin-bottom",""),s.$content.outerHeight()>s.$slide.height()+.5&&(o=s.$slide[0].style["padding-bottom"],i=s.$slide.css("padding-bottom"),parseFloat(i)>0&&(e=s.$slide[0].scrollHeight,s.$slide.css("padding-bottom",0),Math.abs(e-s.$slide[0].scrollHeight)<1&&(n=i),s.$slide.css("padding-bottom",o))),s.$content.css("margin-bottom",n))},revealContent:function(t){var e,o,i,a,s=this,r=t.$slide,c=!1,l=!1,d=s.isMoved(t),u=t.isRevealed;return t.isRevealed=!0,e=t.opts[s.firstRun?"animationEffect":"transitionEffect"],i=t.opts[s.firstRun?"animationDuration":"transitionDuration"],i=parseInt(void 0===t.forcedDuration?i:t.forcedDuration,10),!d&&t.pos===s.currPos&&i||(e=!1),"zoom"===e&&(t.pos===s.currPos&&i&&"image"===t.type&&!t.hasError&&(l=s.getThumbPos(t))?c=s.getFitPos(t):e="fade"),"zoom"===e?(s.isAnimating=!0,c.scaleX=c.width/l.width,c.scaleY=c.height/l.height,a=t.opts.zoomOpacity,"auto"==a&&(a=Math.abs(t.width/t.height-l.width/l.height)>.1),a&&(l.opacity=.1,c.opacity=1),n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),l),p(t.$content),void n.fancybox.animate(t.$content,c,i,function(){s.isAnimating=!1,s.complete()})):(s.updateSlide(t),e?(n.fancybox.stop(r),o="fancybox-slide--"+(t.pos>=s.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+e,r.addClass(o).removeClass("fancybox-slide--current"),t.$content.removeClass("fancybox-is-hidden"),p(r),"image"!==t.type&&t.$content.hide().show(0),void n.fancybox.animate(r,"fancybox-slide--current",i,function(){r.removeClass(o).css({transform:"",opacity:""}),t.pos===s.currPos&&s.complete()},!0)):(t.$content.removeClass("fancybox-is-hidden"),u||!d||"image"!==t.type||t.hasError||t.$content.hide().fadeIn("fast"),void(t.pos===s.currPos&&s.complete())))},getThumbPos:function(t){var e,o,i,a,s,r=!1,c=t.$thumb;return!(!c||!g(c[0]))&&(e=n.fancybox.getTranslate(c),o=parseFloat(c.css("border-top-width")||0),i=parseFloat(c.css("border-right-width")||0),a=parseFloat(c.css("border-bottom-width")||0),s=parseFloat(c.css("border-left-width")||0),r={top:e.top+o,left:e.left+s,width:e.width-i-s,height:e.height-o-a,scaleX:1,scaleY:1},e.width>0&&e.height>0&&r)},complete:function(){var t,e=this,o=e.current,i={};!e.isMoved()&&o.isLoaded&&(o.isComplete||(o.isComplete=!0,o.$slide.siblings().trigger("onReset"),e.preload("inline"),p(o.$slide),o.$slide.addClass("fancybox-slide--complete"),n.each(e.slides,function(t,o){o.pos>=e.currPos-1&&o.pos<=e.currPos+1?i[o.pos]=o:o&&(n.fancybox.stop(o.$slide),o.$slide.off().remove())}),e.slides=i),e.isAnimating=!1,e.updateCursor(),e.trigger("afterShow"),o.opts.video.autoStart&&o.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),e.next()}),o.opts.autoFocus&&"html"===o.contentType&&(t=o.$content.find("input[autofocus]:enabled:visible:first"),t.length?t.trigger("focus"):e.focus(null,!0)),o.$slide.scrollTop(0).scrollLeft(0))},preload:function(t){var e,n,o=this;o.group.length<2||(n=o.slides[o.currPos+1],e=o.slides[o.currPos-1],e&&e.type===t&&o.loadSlide(e),n&&n.type===t&&o.loadSlide(n))},focus:function(t,o){var i,a,s=this,r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");s.isClosing||(i=!t&&s.current&&s.current.isComplete?s.current.$slide.find("*:visible"+(o?":not(.fancybox-close-small)":"")):s.$refs.container.find("*:visible"),i=i.filter(r).filter(function(){return"hidden"!==n(this).css("visibility")&&!n(this).hasClass("disabled")}),i.length?(a=i.index(e.activeElement),t&&t.shiftKey?(a<0||0==a)&&(t.preventDefault(),i.eq(i.length-1).trigger("focus")):(a<0||a==i.length-1)&&(t&&t.preventDefault(),i.eq(0).trigger("focus"))):s.$refs.container.trigger("focus"))},activate:function(){var t=this;n(".fancybox-container").each(function(){var e=n(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)}),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var o,i,a,s,r,c,l,u=this,f=u.current,h=function(){u.cleanUp(t)};return!u.isClosing&&(u.isClosing=!0,!1===u.trigger("beforeClose",t)?(u.isClosing=!1,d(function(){u.update()}),!1):(u.removeEvents(),a=f.$content,o=f.opts.animationEffect,i=n.isNumeric(e)?e:o?f.opts.animationDuration:0,f.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==t?n.fancybox.stop(f.$slide):o=!1,f.$slide.siblings().trigger("onReset").remove(),i&&u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",i+"ms"),u.hideLoading(f),u.hideControls(!0),u.updateCursor(),"zoom"!==o||a&&i&&"image"===f.type&&!u.isMoved()&&!f.hasError&&(l=u.getThumbPos(f))||(o="fade"),"zoom"===o?(n.fancybox.stop(a),s=n.fancybox.getTranslate(a),c={top:s.top,left:s.left,scaleX:s.width/l.width,scaleY:s.height/l.height,width:l.width,height:l.height},r=f.opts.zoomOpacity,"auto"==r&&(r=Math.abs(f.width/f.height-l.width/l.height)>.1),r&&(l.opacity=0),n.fancybox.setTranslate(a,c),p(a),n.fancybox.animate(a,l,i,h),!0):(o&&i?n.fancybox.animate(f.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+o,i,h):!0===t?setTimeout(h,i):h(),!0)))},cleanUp:function(e){var o,i,a,s=this,r=s.current.opts.$orig;s.current.$slide.trigger("onReset"),s.$refs.container.empty().remove(),s.trigger("afterClose",e),s.current.opts.backFocus&&(r&&r.length&&r.is(":visible")||(r=s.$trigger),r&&r.length&&(i=t.scrollX,a=t.scrollY,r.trigger("focus"),n("html, body").scrollTop(a).scrollLeft(i))),s.current=null,o=n.fancybox.getInstance(),o?o.activate():(n("body").removeClass("fancybox-active compensate-for-scrollbar"),n("#fancybox-style-noscroll").remove())},trigger:function(t,e){var o,i=Array.prototype.slice.call(arguments,1),a=this,s=e&&e.opts?e:a.current;if(s?i.unshift(s):s=a,i.unshift(a),n.isFunction(s.opts[t])&&(o=s.opts[t].apply(s,i)),!1===o)return o;"afterClose"!==t&&a.$refs?a.$refs.container.trigger(t+".fb",i):r.trigger(t+".fb",i)},updateControls:function(){var t=this,o=t.current,i=o.index,a=t.$refs.container,s=t.$refs.caption,r=o.opts.caption;o.$slide.trigger("refresh"),r&&r.length?(t.$caption=s,s.children().eq(0).html(r)):t.$caption=null,t.hasHiddenControls||t.isIdle||t.showControls(),a.find("[data-fancybox-count]").html(t.group.length),a.find("[data-fancybox-index]").html(i+1),a.find("[data-fancybox-prev]").prop("disabled",!o.opts.loop&&i<=0),a.find("[data-fancybox-next]").prop("disabled",!o.opts.loop&&i>=t.group.length-1),"image"===o.type?a.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",o.opts.image.src||o.src).show():o.opts.toolbar&&a.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),n(e.activeElement).is(":hidden,[disabled]")&&t.$refs.container.trigger("focus")},hideControls:function(t){var e=this,n=["infobar","toolbar","nav"];!t&&e.current.opts.preventCaptionOverlap||n.push("caption"),this.$refs.container.removeClass(n.map(function(t){return"fancybox-show-"+t}).join(" ")),this.hasHiddenControls=!0},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,n=t.$refs.container;t.hasHiddenControls=!1,t.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&t.group.length>1)).toggleClass("fancybox-show-caption",!!t.$caption).toggleClass("fancybox-show-nav",!!(e.arrows&&t.group.length>1)).toggleClass("fancybox-is-modal",!!e.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.5.7",defaults:a,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return e instanceof b&&("string"===n.type(t)?e[t].apply(e,o):"function"===n.type(t)&&t.apply(e,o),e)},open:function(t,e,n){return new b(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close(t))},destroy:function(){this.close(!0),r.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle&&t.getComputedStyle(n)&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)}(),getTranslate:function(t){var e;return!(!t||!t.length)&&(e=t[0].getBoundingClientRect(),{top:e.top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))})},setTranslate:function(t,e){var n="",o={};if(t&&e)return void 0===e.left&&void 0===e.top||(n=(void 0===e.left?t.position().left:e.left)+"px, "+(void 0===e.top?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),void 0!==e.scaleX&&void 0!==e.scaleY?n+=" scale("+e.scaleX+", "+e.scaleY+")":void 0!==e.scaleX&&(n+=" scaleX("+e.scaleX+")"),n.length&&(o.transform=n),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.width&&(o.width=e.width),void 0!==e.height&&(o.height=e.height),t.css(o)},animate:function(t,e,o,i,a){var s,r=this;n.isFunction(o)&&(i=o,o=null),r.stop(t),s=r.getTranslate(t),t.on(f,function(c){(!c||!c.originalEvent||t.is(c.originalEvent.target)&&"z-index"!=c.originalEvent.propertyName)&&(r.stop(t),n.isNumeric(o)&&t.css("transition-duration",""),n.isPlainObject(e)?void 0!==e.scaleX&&void 0!==e.scaleY&&r.setTranslate(t,{top:e.top,left:e.left,width:s.width*e.scaleX,height:s.height*e.scaleY,scaleX:1,scaleY:1}):!0!==a&&t.removeClass(e),n.isFunction(i)&&i(c))}),n.isNumeric(o)&&t.css("transition-duration",o+"ms"),n.isPlainObject(e)?(void 0!==e.scaleX&&void 0!==e.scaleY&&(delete e.width,delete e.height,t.parent().hasClass("fancybox-slide--image")&&t.parent().addClass("fancybox-is-scaling")),n.fancybox.setTranslate(t,e)):t.addClass(e),t.data("timer",setTimeout(function(){t.trigger(f)},o+33))},stop:function(t,e){t&&t.length&&(clearTimeout(t.data("timer")),e&&t.trigger(f),t.off(f).css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},n.fn.fancybox=function(t){var e;return t=t||{},e=t.selector||!1,e?n("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},i):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},i),this},r.on("click.fb-start","[data-fancybox]",i),r.on("click.fb-start","[data-fancybox-trigger]",function(t){n('[data-fancybox="'+n(this).attr("data-fancybox-trigger")+'"]').eq(n(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:n(this)})}),function(){var t=null;r.on("mousedown mouseup focus blur",".fancybox-button",function(e){switch(e.type){case"mousedown":t=n(this);break;case"mouseup":t=null;break;case"focusin":n(".fancybox-button").removeClass("fancybox-focus"),n(this).is(t)||n(this).is("[disabled]")||n(this).addClass("fancybox-focus");break;case"focusout":n(".fancybox-button").removeClass("fancybox-focus")}})}()}}(window,document,jQuery),function(t){"use strict";var e={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},n=function(e,n,o){if(e)return o=o||"","object"===t.type(o)&&(o=t.param(o,!0)),t.each(n,function(t,n){e=e.replace("$"+t,n||"")}),o.length&&(e+=(e.indexOf("?")>0?"&":"?")+o),e};t(document).on("objectNeedsType.fb",function(o,i,a){var s,r,c,l,d,u,f,p=a.src||"",h=!1;s=t.extend(!0,{},e,a.opts.media),t.each(s,function(e,o){if(c=p.match(o.matcher)){if(h=o.type,f=e,u={},o.paramPlace&&c[o.paramPlace]){d=c[o.paramPlace],"?"==d[0]&&(d=d.substring(1)),d=d.split("&");for(var i=0;i<d.length;++i){var s=d[i].split("=",2);2==s.length&&(u[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return l=t.extend(!0,{},o.params,a.opts[e],u),p="function"===t.type(o.url)?o.url.call(this,c,l,a):n(o.url,c,l),r="function"===t.type(o.thumb)?o.thumb.call(this,c,l,a):n(o.thumb,c),"youtube"===e?p=p.replace(/&t=((\d+)m)?(\d+)s/,function(t,e,n,o){return"&start="+((n?60*parseInt(n,10):0)+parseInt(o,10))}):"vimeo"===e&&(p=p.replace("&%23","#")),!1}}),h?(a.opts.thumb||a.opts.$thumb&&a.opts.$thumb.length||(a.opts.thumb=r),"iframe"===h&&(a.opts=t.extend(!0,a.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),t.extend(a,{type:h,src:p,origSrc:a.src,contentSource:f,contentType:"image"===h?"image":"gmap_place"==f||"gmap_search"==f?"map":"video"})):p&&(a.type=a.opts.defaultType)});var o={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(t){var e,n=this;if(this[t].loaded)return void setTimeout(function(){n.done(t)});this[t].loading||(this[t].loading=!0,e=document.createElement("script"),e.type="text/javascript",e.src=this[t].src,"youtube"===t?window.onYouTubeIframeAPIReady=function(){n[t].loaded=!0,n.done(t)}:e.onload=function(){n[t].loaded=!0,n.done(t)},document.body.appendChild(e))},done:function(e){var n,o,i;"youtube"===e&&delete window.onYouTubeIframeAPIReady,(n=t.fancybox.getInstance())&&(o=n.current.$content.find("iframe"),"youtube"===e&&void 0!==YT&&YT?i=new YT.Player(o.attr("id"),{events:{onStateChange:function(t){0==t.data&&n.next()}}}):"vimeo"===e&&void 0!==Vimeo&&Vimeo&&(i=new Vimeo.Player(o),i.on("ended",function(){n.next()})))}};t(document).on({"afterShow.fb":function(t,e,n){e.group.length>1&&("youtube"===n.contentSource||"vimeo"===n.contentSource)&&o.load(n.contentSource)}})}(jQuery),function(t,e,n){"use strict";var o=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),i=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),a=function(e){var n=[];e=e.originalEvent||e||t.e,e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var o in e)e[o].pageX?n.push({x:e[o].pageX,y:e[o].pageY}):e[o].clientX&&n.push({x:e[o].clientX,y:e[o].clientY});return n},s=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},r=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||n.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,o=t[0].attributes,i=o.length;e<i;e++)if("data-fancybox-"===o[e].nodeName.substr(0,14))return!0;return!1},c=function(e){var n=t.getComputedStyle(e)["overflow-y"],o=t.getComputedStyle(e)["overflow-x"],i=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,a=("scroll"===o||"auto"===o)&&e.scrollWidth>e.clientWidth;return i||a},l=function(t){for(var e=!1;;){if(e=c(t.get(0)))break;if(t=t.parent(),!t.length||t.hasClass("fancybox-stage")||t.is("body"))break}return e},d=function(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(e,"ontouchstart"))};d.prototype.destroy=function(){var t=this;t.$container.off(".fb.touch"),n(e).off(".fb.touch"),t.requestId&&(i(t.requestId),t.requestId=null),t.tapped&&(clearTimeout(t.tapped),t.tapped=null)},d.prototype.ontouchstart=function(o){var i=this,c=n(o.target),d=i.instance,u=d.current,f=u.$slide,p=u.$content,h="touchstart"==o.type;if(h&&i.$container.off("mousedown.fb.touch"),(!o.originalEvent||2!=o.originalEvent.button)&&f.length&&c.length&&!r(c)&&!r(c.parent())&&(c.is("img")||!(o.originalEvent.clientX>c[0].clientWidth+c.offset().left))){if(!u||d.isAnimating||u.$slide.hasClass("fancybox-animated"))return o.stopPropagation(),void o.preventDefault();i.realPoints=i.startPoints=a(o),i.startPoints.length&&(u.touch&&o.stopPropagation(),i.startEvent=o,i.canTap=!0,i.$target=c,i.$content=p,i.opts=u.opts.touch,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.isScrolling=!1,i.canPan=d.canPan(),i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canvasWidth=Math.round(f[0].clientWidth),i.canvasHeight=Math.round(f[0].clientHeight),i.contentLastPos=null,i.contentStartPos=n.fancybox.getTranslate(i.$content)||{top:0,left:0},i.sliderStartPos=n.fancybox.getTranslate(f),i.stagePos=n.fancybox.getTranslate(d.$refs.stage),i.sliderStartPos.top-=i.stagePos.top,i.sliderStartPos.left-=i.stagePos.left,i.contentStartPos.top-=i.stagePos.top,i.contentStartPos.left-=i.stagePos.left,n(e).off(".fb.touch").on(h?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(i,"ontouchend")).on(h?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(i,"ontouchmove")),n.fancybox.isMobile&&e.addEventListener("scroll",i.onscroll,!0),((i.opts||i.canPan)&&(c.is(i.$stage)||i.$stage.find(c).length)||(c.is(".fancybox-image")&&o.preventDefault(),n.fancybox.isMobile&&c.parents(".fancybox-caption").length))&&(i.isScrollable=l(c)||l(c.parent()),n.fancybox.isMobile&&i.isScrollable||o.preventDefault(),(1===i.startPoints.length||u.hasError)&&(i.canPan?(n.fancybox.stop(i.$content),i.isPanning=!0):i.isSwiping=!0,i.$container.addClass("fancybox-is-grabbing")),2===i.startPoints.length&&"image"===u.type&&(u.isLoaded||u.$ghost)&&(i.canTap=!1,i.isSwiping=!1,i.isPanning=!1,i.isZooming=!0,n.fancybox.stop(i.$content),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-n(t).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-n(t).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=s(i.startPoints[0],i.startPoints[1]))))}},d.prototype.onscroll=function(t){var n=this;n.isScrolling=!0,e.removeEventListener("scroll",n.onscroll,!0)},d.prototype.ontouchmove=function(t){var e=this;return void 0!==t.originalEvent.buttons&&0===t.originalEvent.buttons?void e.ontouchend(t):e.isScrolling?void(e.canTap=!1):(e.newPoints=a(t),void((e.opts||e.canPan)&&e.newPoints.length&&e.newPoints.length&&(e.isSwiping&&!0===e.isSwiping||t.preventDefault(),e.distanceX=s(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=s(e.newPoints[0],e.startPoints[0],"y"),e.distance=s(e.newPoints[0],e.startPoints[0]),e.distance>0&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))))},d.prototype.onSwipe=function(e){var a,s=this,r=s.instance,c=s.isSwiping,l=s.sliderStartPos.left||0;if(!0!==c)"x"==c&&(s.distanceX>0&&(s.instance.group.length<2||0===s.instance.current.index&&!s.instance.current.opts.loop)?l+=Math.pow(s.distanceX,.8):s.distanceX<0&&(s.instance.group.length<2||s.instance.current.index===s.instance.group.length-1&&!s.instance.current.opts.loop)?l-=Math.pow(-s.distanceX,.8):l+=s.distanceX),s.sliderLastPos={top:"x"==c?0:s.sliderStartPos.top+s.distanceY,left:l},s.requestId&&(i(s.requestId),s.requestId=null),s.requestId=o(function(){s.sliderLastPos&&(n.each(s.instance.slides,function(t,e){var o=e.pos-s.instance.currPos;n.fancybox.setTranslate(e.$slide,{top:s.sliderLastPos.top,left:s.sliderLastPos.left+o*s.canvasWidth+o*e.opts.gutter})}),s.$container.addClass("fancybox-is-sliding"))});else if(Math.abs(s.distance)>10){if(s.canTap=!1,r.group.length<2&&s.opts.vertical?s.isSwiping="y":r.isDragging||!1===s.opts.vertical||"auto"===s.opts.vertical&&n(t).width()>800?s.isSwiping="x":(a=Math.abs(180*Math.atan2(s.distanceY,s.distanceX)/Math.PI),s.isSwiping=a>45&&a<135?"y":"x"),"y"===s.isSwiping&&n.fancybox.isMobile&&s.isScrollable)return void(s.isScrolling=!0);r.isDragging=s.isSwiping,s.startPoints=s.newPoints,n.each(r.slides,function(t,e){var o,i;n.fancybox.stop(e.$slide),o=n.fancybox.getTranslate(e.$slide),i=n.fancybox.getTranslate(r.$refs.stage),e.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),e.pos===r.current.pos&&(s.sliderStartPos.top=o.top-i.top,s.sliderStartPos.left=o.left-i.left),n.fancybox.setTranslate(e.$slide,{top:o.top-i.top,left:o.left-i.left})}),r.SlideShow&&r.SlideShow.isActive&&r.SlideShow.stop()}},d.prototype.onPan=function(){var t=this;if(s(t.newPoints[0],t.realPoints[0])<(n.fancybox.isMobile?10:5))return void(t.startPoints=t.newPoints);t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&i(t.requestId),t.requestId=o(function(){n.fancybox.setTranslate(t.$content,t.contentLastPos)})},d.prototype.limitMovement=function(){var t,e,n,o,i,a,s=this,r=s.canvasWidth,c=s.canvasHeight,l=s.distanceX,d=s.distanceY,u=s.contentStartPos,f=u.left,p=u.top,h=u.width,g=u.height;return i=h>r?f+l:f,a=p+d,t=Math.max(0,.5*r-.5*h),e=Math.max(0,.5*c-.5*g),n=Math.min(r-h,.5*r-.5*h),o=Math.min(c-g,.5*c-.5*g),l>0&&i>t&&(i=t-1+Math.pow(-t+f+l,.8)||0),l<0&&i<n&&(i=n+1-Math.pow(n-f-l,.8)||0),d>0&&a>e&&(a=e-1+Math.pow(-e+p+d,.8)||0),d<0&&a<o&&(a=o+1-Math.pow(o-p-d,.8)||0),{top:a,left:i}},d.prototype.limitPosition=function(t,e,n,o){var i=this,a=i.canvasWidth,s=i.canvasHeight;return n>a?(t=t>0?0:t,t=t<a-n?a-n:t):t=Math.max(0,a/2-n/2),o>s?(e=e>0?0:e,e=e<s-o?s-o:e):e=Math.max(0,s/2-o/2),{top:e,left:t}},d.prototype.onZoom=function(){var e=this,a=e.contentStartPos,r=a.width,c=a.height,l=a.left,d=a.top,u=s(e.newPoints[0],e.newPoints[1]),f=u/e.startDistanceBetweenFingers,p=Math.floor(r*f),h=Math.floor(c*f),g=(r-p)*e.percentageOfImageAtPinchPointX,b=(c-h)*e.percentageOfImageAtPinchPointY,m=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),v=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),y=m-e.centerPointStartX,x=v-e.centerPointStartY,w=l+(g+y),$=d+(b+x),S={top:$,left:w,scaleX:f,scaleY:f};e.canTap=!1,e.newWidth=p,e.newHeight=h,e.contentLastPos=S,e.requestId&&i(e.requestId),e.requestId=o(function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})},d.prototype.ontouchend=function(t){var o=this,s=o.isSwiping,r=o.isPanning,c=o.isZooming,l=o.isScrolling;if(o.endPoints=a(t),o.dMs=Math.max((new Date).getTime()-o.startTime,1),o.$container.removeClass("fancybox-is-grabbing"),n(e).off(".fb.touch"),e.removeEventListener("scroll",o.onscroll,!0),o.requestId&&(i(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.isScrolling=!1,o.instance.isDragging=!1,o.canTap)return o.onTap(t);o.speed=100,o.velocityX=o.distanceX/o.dMs*.5,o.velocityY=o.distanceY/o.dMs*.5,r?o.endPanning():c?o.endZooming():o.endSwiping(s,l)},d.prototype.endSwiping=function(t,e){var o=this,i=!1,a=o.instance.group.length,s=Math.abs(o.distanceX),r="x"==t&&a>1&&(o.dMs>130&&s>10||s>50);o.sliderLastPos=null,"y"==t&&!e&&Math.abs(o.distanceY)>50?(n.fancybox.animate(o.instance.current.$slide,{top:o.sliderStartPos.top+o.distanceY+150*o.velocityY,opacity:0},200),i=o.instance.close(!0,250)):r&&o.distanceX>0?i=o.instance.previous(300):r&&o.distanceX<0&&(i=o.instance.next(300)),!1!==i||"x"!=t&&"y"!=t||o.instance.centerSlide(200),o.$container.removeClass("fancybox-is-sliding")},d.prototype.endPanning=function(){var t,e,o,i=this;i.contentLastPos&&(!1===i.opts.momentum||i.dMs>350?(t=i.contentLastPos.left,e=i.contentLastPos.top):(t=i.contentLastPos.left+500*i.velocityX,e=i.contentLastPos.top+500*i.velocityY),o=i.limitPosition(t,e,i.contentStartPos.width,i.contentStartPos.height),o.width=i.contentStartPos.width,o.height=i.contentStartPos.height,n.fancybox.animate(i.$content,o,366))},d.prototype.endZooming=function(){var t,e,o,i,a=this,s=a.instance.current,r=a.newWidth,c=a.newHeight;a.contentLastPos&&(t=a.contentLastPos.left,e=a.contentLastPos.top,i={top:e,left:t,width:r,height:c,scaleX:1,scaleY:1},n.fancybox.setTranslate(a.$content,i),r<a.canvasWidth&&c<a.canvasHeight?a.instance.scaleToFit(150):r>s.width||c>s.height?a.instance.scaleToActual(a.centerPointStartX,a.centerPointStartY,150):(o=a.limitPosition(t,e,r,c),n.fancybox.animate(a.$content,o,150)))},d.prototype.onTap=function(e){var o,i=this,s=n(e.target),r=i.instance,c=r.current,l=e&&a(e)||i.startPoints,d=l[0]?l[0].x-n(t).scrollLeft()-i.stagePos.left:0,u=l[0]?l[0].y-n(t).scrollTop()-i.stagePos.top:0,f=function(t){var o=c.opts[t];if(n.isFunction(o)&&(o=o.apply(r,[c,e])),o)switch(o){case"close":r.close(i.startEvent);break;case"toggleControls":r.toggleControls();break;case"next":r.next();break;case"nextOrClose":r.group.length>1?r.next():r.close(i.startEvent);break;case"zoom":"image"==c.type&&(c.isLoaded||c.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(d,u):r.group.length<2&&r.close(i.startEvent))}};if((!e.originalEvent||2!=e.originalEvent.button)&&(s.is("img")||!(d>s[0].clientWidth+s.offset().left))){if(s.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))o="Outside";else if(s.is(".fancybox-slide"))o="Slide";else{if(!r.current.$content||!r.current.$content.find(s).addBack().filter(s).length)return;o="Content"}if(i.tapped){if(clearTimeout(i.tapped),i.tapped=null,Math.abs(d-i.tapX)>50||Math.abs(u-i.tapY)>50)return this;f("dblclick"+o)}else i.tapX=d,i.tapY=u,c.opts["dblclick"+o]&&c.opts["dblclick"+o]!==c.opts["click"+o]?i.tapped=setTimeout(function(){i.tapped=null,r.isAnimating||f("click"+o)},500):f("click"+o);return this}},n(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new d(e))}).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this,n=t.instance,o=n.group[n.currIndex].opts.slideShow;t.$button=n.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),n.group.length<2||!o?t.$button.hide():o.progress&&(t.$progress=e('<div class="fancybox-progress"></div>').appendTo(n.$refs.inner))},set:function(t){var n=this,o=n.instance,i=o.current;i&&(!0===t||i.opts.loop||o.currIndex<o.group.length-1)?n.isActive&&"video"!==i.contentType&&(n.$progress&&e.fancybox.animate(n.$progress.show(),{scaleX:1},i.opts.slideShow.speed),n.timer=setTimeout(function(){o.current.opts.loop||o.current.index!=o.group.length-1?o.next():o.jumpTo(0)},i.opts.slideShow.speed)):(n.stop(),o.idleSecondsCounter=0,o.showControls())},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null,t.$progress&&t.$progress.removeAttr("style").hide()},start:function(){var t=this,e=t.instance.current;e&&(t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.isActive=!0,e.isComplete&&t.set(!0),t.instance.trigger("onSlideShowChange",!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1,t.instance.trigger("onSlideShowChange",!1),t.$progress&&t.$progress.removeAttr("style").hide()},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new n(e))},"beforeShow.fb":function(t,e,n,o){var i=e&&e.SlideShow;o?i&&n.opts.slideShow.autoStart&&i.start():i&&i.isActive&&i.clear()},"afterShow.fb":function(t,e,n){var o=e&&e.SlideShow;o&&o.isActive&&o.set()},"afterKeydown.fb":function(n,o,i,a,s){var r=o&&o.SlideShow;!r||!i.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(a.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var n=e&&e.SlideShow;n&&n.stop()}}),e(t).on("visibilitychange",function(){var n=e.fancybox.getInstance(),o=n&&n.SlideShow;o&&o.isActive&&(t.hidden?o.clear():o.set())})}(document,jQuery),function(t,e){"use strict";var n=function(){for(var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n={},o=0;o<e.length;o++){var i=e[o];if(i&&i[1]in t){for(var a=0;a<i.length;a++)n[e[0][a]]=i[a];return n}}return!1}();if(n){var o={request:function(e){e=e||t.documentElement,e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on(n.fullscreenchange,function(){var t=o.isFullscreen(),n=e.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.isAnimating=!1,n.update(!0,!0,0),n.isComplete||n.complete()),n.trigger("onFullscreenChange",t),n.$refs.container.toggleClass("fancybox-is-fullscreen",t),n.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!t).toggleClass("fancybox-button--fsexit",t))})}e(t).on({"onInit.fb":function(t,e){var i;if(!n)return void e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove();e&&e.group[e.currIndex].opts.fullScreen?(i=e.$refs.container,i.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),o.toggle()}),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&o.request(),e.FullScreen=o):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()},"afterKeydown.fb":function(t,e,n,o,i){e&&e.FullScreen&&70===i&&(o.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&o.exit()}})}(document,jQuery),function(t,e){"use strict";var n="fancybox-thumbs";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var o=function(t){this.init(t)};e.extend(o.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this,n=t.group,o=0;e.instance=t,e.opts=n[t.currIndex].opts.thumbs,t.Thumbs=e,e.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]");for(var i=0,a=n.length;i<a&&(n[i].thumb&&o++,!(o>1));i++);o>1&&e.opts?(e.$button.removeAttr("style").on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var t,o=this,i=o.instance,a=o.opts.parentEl,s=[];o.$grid||(o.$grid=e('<div class="'+n+" "+n+"-"+o.opts.axis+'"></div>').appendTo(i.$refs.container.find(a).addBack().filter(a)),o.$grid.on("click","a",function(){i.jumpTo(e(this).attr("data-index"))})),o.$list||(o.$list=e('<div class="'+n+'__list">').appendTo(o.$grid)),e.each(i.group,function(e,n){t=n.thumb,t||"image"!==n.type||(t=n.src),s.push('<a href="javascript:;" tabindex="0" data-index="'+e+'"'+(t&&t.length?' style="background-image:url('+t+')"':'class="fancybox-thumbs-missing"')+"></a>")}),o.$list[0].innerHTML=s.join(""),"x"===o.opts.axis&&o.$list.width(parseInt(o.$grid.css("padding-right"),10)+i.group.length*o.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,n,o=this,i=o.$list,a=o.$grid;o.instance.current&&(e=i.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+o.instance.current.index+'"]').addClass("fancybox-thumbs-active"),n=e.position(),"y"===o.opts.axis&&(n.top<0||n.top>i.height()-e.outerHeight())?i.stop().animate({scrollTop:i.scrollTop()+n.top},t):"x"===o.opts.axis&&(n.left<a.scrollLeft()||n.left>a.scrollLeft()+(a.width()-e.outerWidth()))&&i.parent().stop().animate({scrollLeft:n.left},t))},update:function(){var t=this;t.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),t.isVisible?(t.$grid||t.create(),t.instance.trigger("onThumbsShow"),t.focus(0)):t.$grid&&t.instance.trigger("onThumbsHide"),t.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var n;e&&!e.Thumbs&&(n=new o(e),n.isActive&&!0===n.opts.autoStart&&n.show())},"beforeShow.fb":function(t,e,n,o){var i=e&&e.Thumbs;i&&i.isVisible&&i.focus(o?0:250)},"afterKeydown.fb":function(t,e,n,o,i){var a=e&&e.Thumbs;a&&a.isActive&&71===i&&(o.preventDefault(),a.toggle())},"beforeClose.fb":function(t,e){var n=e&&e.Thumbs;n&&n.isVisible&&!1!==n.opts.hideOnClose&&n.$grid.hide()}})}(document,jQuery),function(t,e){"use strict";function n(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",function(){var t,o,i=e.fancybox.getInstance(),a=i.current||null;a&&("function"===e.type(a.opts.share.url)&&(t=a.opts.share.url.apply(a,[i,a])),o=a.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===a.type?encodeURIComponent(a.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,n(t)).replace(/\{\{descr\}\}/g,i.$caption?encodeURIComponent(i.$caption.text()):""),e.fancybox.open({src:i.translate(i,o),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(t,e){i.$refs.container.one("beforeClose.fb",function(){t.close(null,0)}),e.$content.find(".fancybox-share__button").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})},mobile:{autoFocus:!1}}}))})}(document,jQuery),function(t,e,n){"use strict";function o(){var e=t.location.hash.substr(1),n=e.split("-"),o=n.length>1&&/^\+?\d+$/.test(n[n.length-1])?parseInt(n.pop(-1),10)||1:1,i=n.join("-");return{hash:e,index:o<1?1:o,gallery:i}}function i(t){""!==t.gallery&&n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1).focus().trigger("click.fb-start")}function a(t){var e,n;return!!t&&(e=t.current?t.current.opts:t.opts,""!==(n=e.hash||(e.$orig?e.$orig.data("fancybox")||e.$orig.data("fancybox-trigger"):""))&&n)}n.escapeSelector||(n.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})}),n(function(){!1!==n.fancybox.defaults.hash&&(n(e).on({"onInit.fb":function(t,e){var n,i;!1!==e.group[e.currIndex].opts.hash&&(n=o(),(i=a(e))&&n.gallery&&i==n.gallery&&(e.currIndex=n.index-1))},"beforeShow.fb":function(n,o,i,s){var r;i&&!1!==i.opts.hash&&(r=a(o))&&(o.currentHash=r+(o.group.length>1?"-"+(i.index+1):""),t.location.hash!=="#"+o.currentHash&&(s&&!o.origHash&&(o.origHash=t.location.hash),o.hashTimer&&clearTimeout(o.hashTimer),o.hashTimer=setTimeout(function(){"replaceState"in t.history?(t.history[s?"pushState":"replaceState"]({},e.title,t.location.pathname+t.location.search+"#"+o.currentHash),s&&(o.hasCreatedHistory=!0)):t.location.hash=o.currentHash,o.hashTimer=null},300)))},"beforeClose.fb":function(n,o,i){i&&!1!==i.opts.hash&&(clearTimeout(o.hashTimer),o.currentHash&&o.hasCreatedHistory?t.history.back():o.currentHash&&("replaceState"in t.history?t.history.replaceState({},e.title,t.location.pathname+t.location.search+(o.origHash||"")):t.location.hash=o.origHash),o.currentHash=null)}}),n(t).on("hashchange.fb",function(){var t=o(),e=null;n.each(n(".fancybox-container").get().reverse(),function(t,o){var i=n(o).data("FancyBox");if(i&&i.currentHash)return e=i,!1}),e?e.currentHash===t.gallery+"-"+t.index||1===t.index&&e.currentHash==t.gallery||(e.currentHash=null,e.close()):""!==t.gallery&&i(t)}),setTimeout(function(){n.fancybox.getInstance()||i(o())},50))})}(window,document,jQuery),function(t,e){"use strict";var n=(new Date).getTime();e(t).on({"onInit.fb":function(t,e,o){e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var o=e.current,i=(new Date).getTime();e.group.length<2||!1===o.opts.wheel||"auto"===o.opts.wheel&&"image"!==o.type||(t.preventDefault(),t.stopPropagation(),o.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-n<250||(n=i,e[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,jQuery);/*!
* jQuery Scrollify
* Version 1.0.21
*
* Requires:
* - jQuery 1.7 or higher
*
* https://github.com/lukehaas/Scrollify
*
* Copyright 2016, Luke Haas
* Permission is hereby granted, free of charge, to any person obtaining a copy of
* this software and associated documentation files (the "Software"), to deal in
* the Software without restriction, including without limitation the rights to
* use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
* the Software, and to permit persons to whom the Software is furnished to do so,
* subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
* IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
if touchScroll is false - update index
*/(function(global,factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],function($){return factory($,global,global.document);});}else if(typeof module==='object'&&module.exports){module.exports=factory(require('jquery'),global,global.document);}else{factory(jQuery,global,global.document);}}(typeof window!=='undefined'?window:this,function($,window,document,undefined){"use strict";var heights=[],names=[],elements=[],overflow=[],index=0,currentIndex=0,interstitialIndex=1,hasLocation=false,timeoutId,timeoutId2,$window=$(window),portHeight,scrollable=false,locked=false,scrolled=false,manualScroll,swipeScroll,util,disabled=false,scrollSamples=[],scrollTime=new Date().getTime(),firstLoad=true,initialised=false,destination=0,wheelEvent='onwheel'in document?'wheel':document.onmousewheel!==undefined?'mousewheel':'DOMMouseScroll',eventListenerOptions={passive:false},settings={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:true,target:"html,body",standardScrollElements:false,setHeights:true,overflowScroll:true,updateHash:true,touchScroll:true,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},top=$(settings.target).scrollTop();function getportHeight(){return($(settings.target).innerHeight()+settings.offset);}
function animateScroll(index,instant,callbacks,toTop){if(currentIndex===index){callbacks=false;}
if(disabled===true){return true;}
if(names[index]){scrollable=false;if(firstLoad===true){firstLoad=false;settings.afterRender();}
if(callbacks){if(typeof settings.before=='function'&&settings.before(index,elements)===false){return true;}}
interstitialIndex=1;destination=(!index)?0:heights[index];if(firstLoad===false&&currentIndex>index&&toTop===false){if(overflow[index]){portHeight=getportHeight();interstitialIndex=parseInt(elements[index].outerHeight()/portHeight);destination=parseInt(heights[index])+(elements[index].outerHeight()-portHeight);}}
if(settings.updateHash&&settings.sectionName&&!(firstLoad===true&&index===0)){if(history.pushState){try{history.replaceState(null,null,names[index]);}catch(e){if(window.console){console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.");}}}else{window.location.hash=names[index];}}
currentIndex=index;if(instant){$(settings.target).stop().scrollTop(destination);if(callbacks){settings.after(index,elements);}}else{locked=true;if($().velocity){$(settings.target).stop().velocity('scroll',{duration:settings.scrollSpeed,easing:settings.easing,offset:destination,mobileHA:false});}else{$(settings.target).stop().animate({scrollTop:destination},settings.scrollSpeed,settings.easing);}
if(window.location.hash.length&&settings.sectionName&&window.console){try{if($(window.location.hash).length){console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.");}}catch(e){}}
$(settings.target).promise().done(function(){locked=false;firstLoad=false;if(callbacks){settings.after(index,elements);}});}}}
function isAccelerating(samples){function average(num){var sum=0;var lastElements=samples.slice(Math.max(samples.length-num,1));for(var i=0;i<lastElements.length;i++){sum+=lastElements[i];}
return Math.ceil(sum/num);}
var avEnd=average(10);var avMiddle=average(70);if(avEnd>=avMiddle){return true;}else{return false;}}
var scrollify=function(options){initialised=true;$.easing['easeOutExpo']=function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;};manualScroll={handleMousedown:function(){if(disabled===true){return true;}
scrollable=false;scrolled=false;},handleMouseup:function(){if(disabled===true){return true;}
scrollable=true;if(scrolled){manualScroll.calculateNearest(false,true);}},handleScroll:function(){if(disabled===true){return true;}
if(timeoutId){clearTimeout(timeoutId);}
timeoutId=setTimeout(function(){scrolled=true;if(scrollable===false){return false;}
scrollable=false;manualScroll.calculateNearest(false,true);},200);},calculateNearest:function(instant,callbacks){top=$(settings.target).scrollTop();var i=1,max=heights.length,closest=0,prev=Math.abs(heights[0]-top),diff;for(;i<max;i++){diff=Math.abs(heights[i]-top);if(diff<prev){prev=diff;closest=i;}}
if((atBottom()&&closest>index)||atTop()){index=closest;animateScroll(closest,instant,callbacks,false);}},wheelHandler:function(e){if(disabled===true){return true;}else if(settings.standardScrollElements){if($(e.target).is(settings.standardScrollElements)||$(e.target).closest(settings.standardScrollElements).length){return true;}}
if(!overflow[index]){e.preventDefault();}
var currentScrollTime=new Date().getTime();e=e||window.event;var value;if(e.originalEvent){value=e.originalEvent.wheelDelta||-e.originalEvent.deltaY||-e.originalEvent.detail;}else{value=e.wheelDelta||-e.deltaY||-e.detail;}
var delta=Math.max(-1,Math.min(1,value));if(scrollSamples.length>149){scrollSamples.shift();}
scrollSamples.push(Math.abs(value));if((currentScrollTime-scrollTime)>200){scrollSamples=[];}
scrollTime=currentScrollTime;if(locked){return false;}
if(delta<0){if(index<heights.length-1){if(atBottom()){if(isAccelerating(scrollSamples)){e.preventDefault();index++;locked=true;animateScroll(index,false,true,false);}else{return false;}}}}else if(delta>0){if(index>0){if(atTop()){if(isAccelerating(scrollSamples)){e.preventDefault();index--;locked=true;animateScroll(index,false,true,false);}else{return false}}}}},keyHandler:function(e){if(disabled===true||document.activeElement.readOnly===false){return true;}else if(settings.standardScrollElements){if($(e.target).is(settings.standardScrollElements)||$(e.target).closest(settings.standardScrollElements).length){return true;}}
if(locked===true){return false;}
if(e.keyCode==38||e.keyCode==33){if(index>0){if(atTop()){e.preventDefault();index--;animateScroll(index,false,true,false);}}}else if(e.keyCode==40||e.keyCode==34){if(index<heights.length-1){if(atBottom()){e.preventDefault();index++;animateScroll(index,false,true,false);}}}},init:function(){if(settings.scrollbars){$window.on('mousedown',manualScroll.handleMousedown);$window.on('mouseup',manualScroll.handleMouseup);$window.on('scroll',manualScroll.handleScroll);}else{$("body").css({"overflow":"hidden"});}
window.addEventListener(wheelEvent,manualScroll.wheelHandler,{passive:false});$window.on('keydown',manualScroll.keyHandler);}};swipeScroll={touches:{"touchstart":{"y":-1,"x":-1},"touchmove":{"y":-1,"x":-1},"touchend":false,"direction":"undetermined"},options:{"distance":30,"timeGap":800,"timeStamp":new Date().getTime()},touchHandler:function(event){if(disabled===true){return true;}else if(settings.standardScrollElements){if($(event.target).is(settings.standardScrollElements)||$(event.target).closest(settings.standardScrollElements).length){return true;}}
var touch;if(typeof event!=='undefined'){if(typeof event.touches!=='undefined'){touch=event.touches[0];switch(event.type){case 'touchstart':swipeScroll.touches.touchstart.y=touch.pageY;swipeScroll.touches.touchmove.y=-1;swipeScroll.touches.touchstart.x=touch.pageX;swipeScroll.touches.touchmove.x=-1;swipeScroll.options.timeStamp=new Date().getTime();swipeScroll.touches.touchend=false;case 'touchmove':swipeScroll.touches.touchmove.y=touch.pageY;swipeScroll.touches.touchmove.x=touch.pageX;if(swipeScroll.touches.touchstart.y!==swipeScroll.touches.touchmove.y&&(Math.abs(swipeScroll.touches.touchstart.y-swipeScroll.touches.touchmove.y)>Math.abs(swipeScroll.touches.touchstart.x-swipeScroll.touches.touchmove.x))){event.preventDefault();swipeScroll.touches.direction="y";if((swipeScroll.options.timeStamp+swipeScroll.options.timeGap)<(new Date().getTime())&&swipeScroll.touches.touchend==false){swipeScroll.touches.touchend=true;if(swipeScroll.touches.touchstart.y>-1){if(Math.abs(swipeScroll.touches.touchmove.y-swipeScroll.touches.touchstart.y)>swipeScroll.options.distance){if(swipeScroll.touches.touchstart.y<swipeScroll.touches.touchmove.y){swipeScroll.up();}else{swipeScroll.down();}}}}}
break;case 'touchend':if(swipeScroll.touches[event.type]===false){swipeScroll.touches[event.type]=true;if(swipeScroll.touches.touchstart.y>-1&&swipeScroll.touches.touchmove.y>-1&&swipeScroll.touches.direction==="y"){if(Math.abs(swipeScroll.touches.touchmove.y-swipeScroll.touches.touchstart.y)>swipeScroll.options.distance){if(swipeScroll.touches.touchstart.y<swipeScroll.touches.touchmove.y){swipeScroll.up();}else{swipeScroll.down();}}
swipeScroll.touches.touchstart.y=-1;swipeScroll.touches.touchstart.x=-1;swipeScroll.touches.direction="undetermined";}}
default:break;}}}},down:function(){if(index<heights.length){if(atBottom()&&index<heights.length-1){index++;animateScroll(index,false,true,false);}else{portHeight=getportHeight();if(Math.floor(elements[index].height()/portHeight)>interstitialIndex){interstitialScroll(parseInt(heights[index])+(portHeight*interstitialIndex));interstitialIndex+=1;}else{interstitialScroll(parseInt(heights[index])+(elements[index].outerHeight()-portHeight));}}}},up:function(){if(index>=0){if(atTop()&&index>0){index--;animateScroll(index,false,true,false);}else{if(interstitialIndex>2){portHeight=getportHeight();interstitialIndex-=1;interstitialScroll(parseInt(heights[index])+(portHeight*interstitialIndex));}else{interstitialIndex=1;interstitialScroll(parseInt(heights[index]));}}}},init:function(){if(document.addEventListener&&settings.touchScroll){document.addEventListener('touchstart',swipeScroll.touchHandler,eventListenerOptions);document.addEventListener('touchmove',swipeScroll.touchHandler,eventListenerOptions);document.addEventListener('touchend',swipeScroll.touchHandler,eventListenerOptions);}}};util={refresh:function(withCallback,scroll){clearTimeout(timeoutId2);timeoutId2=setTimeout(function(){sizePanels(true);calculatePositions(scroll,false);if(withCallback){settings.afterResize();}},400);},handleUpdate:function(){util.refresh(false,false);},handleResize:function(){util.refresh(true,false);},handleOrientation:function(){util.refresh(true,true);}};settings=$.extend(settings,options);sizePanels(false);calculatePositions(false,true);if(true===hasLocation){animateScroll(index,false,true,true);}else{setTimeout(function(){manualScroll.calculateNearest(true,false);},200);}
if(heights.length){manualScroll.init();swipeScroll.init();$window.on("resize",util.handleResize);if(document.addEventListener){window.addEventListener("orientationchange",util.handleOrientation,false);}}
function interstitialScroll(pos){if($().velocity){$(settings.target).stop().velocity('scroll',{duration:settings.scrollSpeed,easing:settings.easing,offset:pos,mobileHA:false});}else{$(settings.target).stop().animate({scrollTop:pos},settings.scrollSpeed,settings.easing);}}
function sizePanels(keepPosition){if(keepPosition){top=$(settings.target).scrollTop();}
var selector=settings.section;overflow=[];if(settings.interstitialSection.length){selector+=","+settings.interstitialSection;}
if(settings.scrollbars===false){settings.overflowScroll=false;}
portHeight=getportHeight();$(selector).each(function(i){var $this=$(this);if(settings.setHeights){if($this.is(settings.interstitialSection)){overflow[i]=false;}else{if(($this.css("height","auto").outerHeight()<portHeight)||$this.css("overflow")==="hidden"){$this.css({"height":portHeight});overflow[i]=false;}else{$this.css({"height":$this.outerHeight()});if(settings.overflowScroll){overflow[i]=true;}else{overflow[i]=false;}}}}else{if(($this.outerHeight()<portHeight)||(settings.overflowScroll===false)){overflow[i]=false;}else{overflow[i]=true;}}});if(keepPosition){$(settings.target).scrollTop(top);}}
function calculatePositions(scroll,firstLoad){var selector=settings.section;if(settings.interstitialSection.length){selector+=","+settings.interstitialSection;}
heights=[];names=[];elements=[];$(selector).each(function(i){var $this=$(this);if(i>0){heights[i]=parseInt($this.offset().top)+settings.offset;}else{heights[i]=parseInt($this.offset().top);}
if(settings.sectionName&&$this.data(settings.sectionName)){names[i]="#"+$this.data(settings.sectionName).toString().replace(/ /g,"-");}else{if($this.is(settings.interstitialSection)===false){names[i]="#"+(i+1);}else{names[i]="#";if(i===$(selector).length-1&&i>1){heights[i]=heights[i-1]+(parseInt($($(selector)[i-1]).outerHeight())-parseInt($(window).height()))+parseInt($this.outerHeight());}}}
elements[i]=$this;try{if($(names[i]).length&&window.console){console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.");}}catch(e){}
if(window.location.hash===names[i]){index=i;hasLocation=true;}});if(true===scroll){animateScroll(index,false,false,false);}}
function atTop(){if(!overflow[index]){return true;}
top=$(settings.target).scrollTop();if(top>parseInt(heights[index])){return false;}else{return true;}}
function atBottom(){if(!overflow[index]){return true;}
top=$(settings.target).scrollTop();portHeight=getportHeight();if(top<parseInt(heights[index])+(elements[index].outerHeight()-portHeight)-28){return false;}else{return true;}}}
function move(panel,instant){var z=names.length;for(;z>=0;z--){if(typeof panel==='string'){if(names[z]===panel){index=z;animateScroll(z,instant,true,true);}}else{if(z===panel){index=z;animateScroll(z,instant,true,true);}}}}
scrollify.move=function(panel){if(panel===undefined){return false;}
if(typeof panel!=="number"&&panel.originalEvent){panel=$(this).attr("href");}
move(panel,false);};scrollify.instantMove=function(panel){if(panel===undefined){return false;}
move(panel,true);};scrollify.next=function(){if(index<names.length){index+=1;animateScroll(index,false,true,true);}};scrollify.previous=function(){if(index>0){index-=1;animateScroll(index,false,true,true);}};scrollify.instantNext=function(){if(index<names.length){index+=1;animateScroll(index,true,true,true);}};scrollify.instantPrevious=function(){if(index>0){index-=1;animateScroll(index,true,true,true);}};scrollify.destroy=function(){if(!initialised){return false;}
if(settings.setHeights){$(settings.section).each(function(){$(this).css("height","auto");});}
$window.off("resize",util.handleResize);if(settings.scrollbars){$window.off('mousedown',manualScroll.handleMousedown);$window.off('mouseup',manualScroll.handleMouseup);$window.off('scroll',manualScroll.handleScroll);}
window.removeEventListener(wheelEvent,manualScroll.wheelHandler);$window.off('keydown',manualScroll.keyHandler);if(document.addEventListener&&settings.touchScroll){document.removeEventListener('touchstart',swipeScroll.touchHandler,eventListenerOptions);document.removeEventListener('touchmove',swipeScroll.touchHandler,eventListenerOptions);document.removeEventListener('touchend',swipeScroll.touchHandler,eventListenerOptions);}
heights=[];names=[];elements=[];overflow=[];firstLoad=true;initialised=false;};scrollify.update=function(){if(!initialised){return false;}
util.handleUpdate();};scrollify.current=function(){return elements[index];};scrollify.currentIndex=function(){return index;};scrollify.disable=function(){disabled=true;};scrollify.enable=function(){disabled=false;if(initialised){manualScroll.calculateNearest(false,false);}};scrollify.isDisabled=function(){return disabled;};scrollify.setOptions=function(updatedOptions){if(!initialised){return false;}
if(typeof updatedOptions==="object"){settings=$.extend(settings,updatedOptions);util.handleUpdate();}else if(window.console){console.warn("Scrollify warning: setOptions expects an object.");}};$.scrollify=scrollify;return scrollify;}));(function($){var queryParser=function(a){var i,p,b={};if(a===""){return{};}
for(i=0;i<a.length;i+=1){p=a[i].split('=');if(p.length===2){b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "));}}
return b;};$.queryParams=function(){return queryParser(window.location.search.substr(1).split('&'));};$.hashParams=function(){return queryParser(window.location.hash.substr(1).split('&'));};var ident=0;window.Swiftype=window.Swiftype||{};Swiftype.root_url=Swiftype.root_url||'https://api.swiftype.com';Swiftype.pingUrl=function(endpoint,callback){var to=setTimeout(callback,350);var img=new Image();img.onload=img.onerror=function(){clearTimeout(to);callback();};img.src=endpoint;return false;};Swiftype.pingAutoSelection=function(engineKey,docId,value,callback){var params={t:new Date().getTime(),engine_key:engineKey,doc_id:docId,prefix:value};var url=Swiftype.root_url+'/api/v1/public/analytics/pas?'+$.param(params);Swiftype.pingUrl(url,callback);};Swiftype.findSelectedSection=function(){var sectionText=$.hashParams().sts;if(!sectionText){return;}
function normalizeText(str){var out=str.replace(/\s+/g,'');out=out.toLowerCase();return out;}
sectionText=normalizeText(sectionText);$('h1, h2, h3, h4, h5, h6').each(function(idx){$this=$(this);if(normalizeText($this.text()).indexOf(sectionText)>=0){this.scrollIntoView(true);return false;}});};Swiftype.htmlEscape=Swiftype.htmlEscape||function htmlEscape(str){return String(str).replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#39;').replace(/</g,'&lt;').replace(/>/g,'&gt;');};$.fn.swiftype=function(options){Swiftype.findSelectedSection();var options=$.extend({},$.fn.swiftype.defaults,options);return this.each(function(){var $this=$(this);var config=$.meta?$.extend({},options,$this.data()):options;$this.attr('autocomplete','off');$this.data('swiftype-config-autocomplete',config);$this.submitted=false;$this.cache=new LRUCache(10);$this.emptyQueries=[];$this.isEmpty=function(query){return $.inArray(normalize(query),this.emptyQueries)>=0};$this.addEmpty=function(query){$this.emptyQueries.unshift(normalize(query));};var styles=config.dropdownStylesFunction($this);var $swiftypeWidget=$('<div class="'+config.widgetContainerClass+'" />');var $listContainer=$('<div />').addClass(config.suggestionListClass).appendTo($swiftypeWidget).css(styles).hide();$swiftypeWidget.appendTo(config.autocompleteContainingElement);var $list=$('<'+config.suggestionListType+' />').appendTo($listContainer);$this.data('swiftype-list',$list);$this.abortCurrent=function(){if($this.currentRequest){$this.currentRequest.abort();}};$this.showList=function(){if(handleFunctionParam(config.disableAutocomplete)===false){$listContainer.show();}};$this.hideList=function(sync){if(sync){$listContainer.hide();}else{setTimeout(function(){$listContainer.hide();},10);}};$this.showNoResults=function(){$list.empty();if(config.noResultsMessage===undefined){$this.hideList();}else{$list.append($('<li />',{'class':config.noResultsClass}).text(config.noResultsMessage));$this.showList();}};$this.focused=function(){return $this.is(':focus');};$this.submitting=function(){$this.submitted=true;};$this.listResults=function(){return $(config.resultListSelector,$list).filter(':not(.'+config.noResultsClass+')');};$this.activeResult=function(){return $this.listResults().filter('.'+config.activeItemClass).first();};$this.prevResult=function(){var list=$this.listResults(),currentIdx=list.index($this.activeResult()),nextIdx=currentIdx-1,next=list.eq(nextIdx);$this.listResults().removeClass(config.activeItemClass);if(nextIdx>=0){next.addClass(config.activeItemClass);}};$this.nextResult=function(){var list=$this.listResults(),currentIdx=list.index($this.activeResult()),nextIdx=currentIdx+1,next=list.eq(nextIdx);$this.listResults().removeClass(config.activeItemClass);if(nextIdx>=0){next.addClass(config.activeItemClass);}};$this.selectedCallback=function(data){return function(){var value=$this.val(),callback=function(){config.onComplete(data,value);};Swiftype.pingAutoSelection(config.engineKey,data['id'],value,callback);};};$this.registerResult=function($element,data){$element.data('swiftype-item',data);$element.click($this.selectedCallback(data)).mouseover(function(){$this.listResults().removeClass(config.activeItemClass);$element.addClass(config.activeItemClass);});};$this.getContext=function(){return{config:config,list:$list,registerResult:$this.registerResult};};var typingDelayPointer;var suppressKey=false;$this.lastValue='';$this.keyup(function(event){if(suppressKey){suppressKey=false;return;}
if(((event.which>36)&&(event.which<41))||(event.which==16))return;if(config.typingDelay>0){clearTimeout(typingDelayPointer);typingDelayPointer=setTimeout(function(){processInput($this);},config.typingDelay);}else{processInput($this);}});$this.styleDropdown=function(){$listContainer.css(config.dropdownStylesFunction($this));};$(window).resize(function(event){$this.styleDropdown();});$this.keydown(function(event){$this.styleDropdown();var $active=$this.activeResult();switch(event.which){case 13:if(($active.length!==0)&&($list.is(':visible'))){event.preventDefault();$this.selectedCallback($active.data('swiftype-item'))();}else if($this.currentRequest){$this.submitting();}
$this.hideList();suppressKey=true;break;case 38:event.preventDefault();if($active.length===0){$this.listResults().last().addClass(config.activeItemClass);}else{$this.prevResult();}
break;case 40:event.preventDefault();if($active.length===0){$this.listResults().first().addClass(config.activeItemClass);}else if($active!=$this.listResults().last()){$this.nextResult();}
break;case 27:$this.hideList();suppressKey=true;break;default:$this.submitted=false;break;}});$this.keypress(function(event){if((event.which==13)&&($this.activeResult().length>0)){event.preventDefault();}});var mouseDown=false;var blurWait=false;$(document).bind('mousedown.swiftype'+ ++ident,function(){mouseDown=true;});$(document).bind('mouseup.swiftype'+ident,function(){mouseDown=false;if(blurWait){blurWait=false;$this.hideList();}});$this.blur(function(){if(mouseDown){blurWait=true;}else{$this.hideList();}});$this.focus(function(){setTimeout(function(){$this.select()},10);if($this.listResults().length>0){$this.showList();}});});};var normalize=function(str){return $.trim(str).toLowerCase();};var callRemote=function($this,term){$this.abortCurrent();var params={},config=$this.data('swiftype-config-autocomplete');params['q']=term;params['engine_key']=config.engineKey;params['search_fields']=handleFunctionParam(config.searchFields);params['fetch_fields']=handleFunctionParam(config.fetchFields);params['filters']=handleFunctionParam(config.filters);params['document_types']=handleFunctionParam(config.documentTypes);params['functional_boosts']=handleFunctionParam(config.functionalBoosts);params['sort_field']=handleFunctionParam(config.sortField);params['sort_direction']=handleFunctionParam(config.sortDirection);params['per_page']=config.resultLimit;params['highlight_fields']=config.highlightFields;var endpoint=Swiftype.root_url+'/api/v1/public/engines/suggest.json';$this.currentRequest=$.ajax({type:'GET',dataType:'jsonp',url:endpoint,data:params}).done(function(data){var norm=normalize(term);if(data.record_count>0){$this.cache.put(norm,data.records);}else{$this.addEmpty(norm);$this.showNoResults();return;}
processData($this,data.records,term);});};var getResults=function($this,term){var norm=normalize(term);if($this.isEmpty(norm)){$this.showNoResults();return;}
var cached=$this.cache.get(norm);if(cached){processData($this,cached,term);}else{callRemote($this,term);}};var processInput=function($this){var term=$this.val();if(term===$this.lastValue){return;}
$this.lastValue=term;if($.trim(term)===''){$this.data('swiftype-list').empty()
$this.hideList();return;}
if(typeof $this.data('swiftype-config-autocomplete').engineKey!=='undefined'){getResults($this,term);}};var processData=function($this,data,term){var $list=$this.data('swiftype-list'),config=$this.data('swiftype-config-autocomplete');$list.empty();$this.hideList(true);config.resultRenderFunction($this.getContext(),data);var totalItems=$this.listResults().length;if((totalItems>0&&$this.focused())||(config.noResultsMessage!==undefined)){if($this.submitted){$this.submitted=false;}else{$this.showList();}}};var defaultResultRenderFunction=function(ctx,results){var $list=ctx.list,config=ctx.config;$.each(results,function(document_type,items){$.each(items,function(idx,item){ctx.registerResult($('<li>'+config.renderFunction(document_type,item)+'</li>').appendTo($list),item);});});};var defaultRenderFunction=function(document_type,item){return '<p class="title">'+Swiftype.htmlEscape(item['title'])+'</p>';};var defaultOnComplete=function(item,prefix){window.location=item['url'];};var defaultDropdownStylesFunction=function($this){var config=$this.data('swiftype-config-autocomplete');var $attachEl=config.attachTo?$(config.attachTo):$this;var offset=$attachEl.offset();var styles={'position':'absolute','z-index':99999,'top':offset.top+$attachEl.outerHeight()+1,'left':offset.left};if(config.setWidth){styles['width']=$attachEl.outerWidth()-2;}
return styles;};var handleFunctionParam=function(field){if(field!==undefined){var evald=field;if(typeof evald==='function'){evald=evald.call();}
return evald;}
return undefined;};function LRUCache(limit){this.size=0;this.limit=limit;this._keymap={};}
LRUCache.prototype.put=function(key,value){var entry={key:key,value:value};this._keymap[key]=entry;if(this.tail){this.tail.newer=entry;entry.older=this.tail;}else{this.head=entry;}
this.tail=entry;if(this.size===this.limit){return this.shift();}else{this.size++;}};LRUCache.prototype.shift=function(){var entry=this.head;if(entry){if(this.head.newer){this.head=this.head.newer;this.head.older=undefined;}else{this.head=undefined;}
entry.newer=entry.older=undefined;delete this._keymap[entry.key];}
return entry;};LRUCache.prototype.get=function(key,returnEntry){var entry=this._keymap[key];if(entry===undefined)return;if(entry===this.tail){return entry.value;}
if(entry.newer){if(entry===this.head)this.head=entry.newer;entry.newer.older=entry.older;}
if(entry.older)entry.older.newer=entry.newer;entry.newer=undefined;entry.older=this.tail;if(this.tail)this.tail.newer=entry;this.tail=entry;return returnEntry?entry:entry.value;};LRUCache.prototype.remove=function(key){var entry=this._keymap[key];if(!entry)return;delete this._keymap[entry.key];if(entry.newer&&entry.older){entry.older.newer=entry.newer;entry.newer.older=entry.older;}else if(entry.newer){entry.newer.older=undefined;this.head=entry.newer;}else if(entry.older){entry.older.newer=undefined;this.tail=entry.older;}else{this.head=this.tail=undefined;}
this.size--;return entry.value;};LRUCache.prototype.clear=function(){this.head=this.tail=undefined;this.size=0;this._keymap={};};if(typeof Object.keys==='function'){LRUCache.prototype.keys=function(){return Object.keys(this._keymap);};}else{LRUCache.prototype.keys=function(){var keys=[];for(var k in this._keymap)keys.push(k);return keys;};}
$.fn.swiftype.defaults={activeItemClass:'active',attachTo:undefined,documentTypes:undefined,filters:undefined,engineKey:undefined,searchFields:undefined,functionalBoosts:undefined,sortField:undefined,sortDirection:undefined,fetchFields:undefined,highlightFields:undefined,noResultsClass:'noResults',noResultsMessage:undefined,onComplete:defaultOnComplete,resultRenderFunction:defaultResultRenderFunction,renderFunction:defaultRenderFunction,dropdownStylesFunction:defaultDropdownStylesFunction,resultLimit:undefined,suggestionListType:'ul',suggestionListClass:'autocomplete',resultListSelector:'li',setWidth:true,typingDelay:80,disableAutocomplete:false,autocompleteContainingElement:'body',widgetContainerClass:'swiftype-widget'};})(jQuery);(function($){var queryParser=function(a){var i,p,b={};if(a===""){return{};}
for(i=0;i<a.length;i+=1){p=a[i].split('=');if(p.length===2){b[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "));}}
return b;};$.queryParams=function(){return queryParser(window.location.search.substr(1).split('&'));};$.hashParams=function(){return queryParser(window.location.hash.substr(1).split('&'));};window.Swiftype=window.Swiftype||{};Swiftype.root_url=Swiftype.root_url||'https://api.swiftype.com';Swiftype.pingUrl=function(endpoint,callback){var to=setTimeout(callback,350);var img=new Image();img.onload=img.onerror=function(){clearTimeout(to);callback();};img.src=endpoint;return false;};Swiftype.pingSearchResultClick=function(engineKey,docId,callback){var params={t:new Date().getTime(),engine_key:engineKey,doc_id:docId,q:Swiftype.currentQuery};var url=Swiftype.root_url+'/api/v1/public/analytics/pc?'+$.param(params);Swiftype.pingUrl(url,callback);};$.fn.swiftypeSearch=function(options){var options=$.extend({},$.fn.swiftypeSearch.defaults,options);return this.each(function(){var $this=$(this);var config=$.meta?$.extend({},options,$this.data()):options;$this.data('swiftype-config-search',config);$this.selectedCallback=function(data){return function(e){var $el=$(this);e.preventDefault();Swiftype.pingSearchResultClick(config.engineKey,data['id'],function(){config.onComplete($el);});};};$this.registerResult=function($element,data){$element.data('swiftype-item',data);$('a',$element).click($this.selectedCallback(data));};$this.getContentCache=function(){return $('#'+contentCacheId);};var $resultContainer=$(config.resultContainingElement),initialContentOfResultContainer=$resultContainer.html(),contentCacheId='st-content-cache',$contentCache=$this.getContentCache();var setSearchHash=function(query,page){location.hash="stq="+encodeURIComponent(query)+"&stp="+page;};var submitSearch=function(query,options){options=$.extend({page:1},options);var params={};if(!$contentCache.length){$resultContainer.after("<div id='"+contentCacheId+"' style='display: none;'></div>");$contentCache.html(initialContentOfResultContainer).hide();}
config.loadingFunction(query,$resultContainer);Swiftype.currentQuery=query;params['q']=query;params['engine_key']=config.engineKey;params['page']=options.page;function handleFunctionParam(field){if(field!==undefined){var evald=field;if(typeof evald==='function'){evald=evald.call();}
return evald;}
return undefined;}
params['per_page']=handleFunctionParam(config.perPage);params['search_fields']=handleFunctionParam(config.searchFields);params['fetch_fields']=handleFunctionParam(config.fetchFields);params['facets']=handleFunctionParam(config.facets);params['filters']=handleFunctionParam(config.filters);params['document_types']=handleFunctionParam(config.documentTypes);params['functional_boosts']=handleFunctionParam(config.functionalBoosts);params['sort_field']=handleFunctionParam(config.sortField);params['sort_direction']=handleFunctionParam(config.sortDirection);params['spelling']=handleFunctionParam(config.spelling);params['highlight_fields']=handleFunctionParam(config.highlightFields);$.ajax({dataType:"json",url:Swiftype.root_url+"/api/v1/public/engines/search.json?callback=?",data:params,xhrFields:{withCredentials:true},success:renderSearchResults});};$(window).hashchange(function(){var params=$.hashParams();if(params.stq){submitSearch(params.stq,{page:params.stp});}else{var $contentCache=$this.getContentCache();if($contentCache.length){$resultContainer.html($contentCache.html());$contentCache.remove();}}});var $containingForm=$this.parents('form');if($containingForm){$containingForm.bind('submit',function(e){e.preventDefault();var searchQuery=$this.val();setSearchHash(searchQuery,1);});}
$(document).on('click','[data-hash][data-page]',function(e){e.preventDefault();var $this=$(this);setSearchHash($.hashParams().stq,$this.data('page'));});$(document).on('click','[data-hash][data-spelling-suggestion]',function(e){e.preventDefault();var $this=$(this);setSearchHash($this.data('spelling-suggestion'),1);});var renderSearchResults=function(data){if(typeof config.preRenderFunction==='function'){config.preRenderFunction.call($this,data);}
config.renderResultsFunction($this.getContext(),data);if(typeof config.postRenderFunction==='function'){config.postRenderFunction.call($this,data);}};$this.getContext=function(){return{config:config,resultContainer:$resultContainer,registerResult:$this.registerResult};};$(window).hashchange();});};var renderPagination=function(ctx,resultInfo){var maxPagesType,maxPages=-1,config=ctx.config;$.each(resultInfo,function(documentType,typeInfo){if(typeInfo.num_pages>maxPages){maxPagesType=documentType;maxPages=typeInfo.num_pages;}});var currentPage=resultInfo[maxPagesType].current_page,totalPages=resultInfo[maxPagesType].num_pages;$(config.renderPaginationForType(maxPagesType,currentPage,totalPages)).appendTo(ctx.resultContainer);};var normalize=function(str){return $.trim(str).toLowerCase();};function htmlEscape(str){return String(str).replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#39;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
var defaultRenderResultsFunction=function(ctx,data){var $resultContainer=ctx.resultContainer,config=ctx.config;$resultContainer.html('');$.each(data.records,function(documentType,items){$.each(items,function(idx,item){ctx.registerResult($(config.renderFunction(documentType,item)).appendTo($resultContainer),item);});});renderPagination(ctx,data.info);};var defaultRenderFunction=function(document_type,item){return '<div class="st-result"><h3 class="title"><a href="'+item['url']+'" class="st-search-result-link">'+htmlEscape(item['title'])+'</a></h3></div>';};var defaultLoadingFunction=function(query,$resultContainer){$resultContainer.html('<p class="st-loading-message">loading...</p>');};var defaultOnComplete=function(elem){window.location=elem.attr('href');};var defaultPostRenderFunction=function(data){var totalResultCount=0;var $resultContainer=this.getContext().resultContainer;var spellingSuggestion=null;if(data['info']){$.each(data['info'],function(index,value){totalResultCount+=value['total_result_count'];if(value['spelling_suggestion']){spellingSuggestion=value['spelling_suggestion']['text'];}});}
if(totalResultCount===0){$resultContainer.html("<div id='st-no-results' class='st-no-results'>No results found.</div>");}
if(spellingSuggestion!==null){$resultContainer.append('<div class="st-spelling-suggestion">Did you mean <a href="#" data-hash="true" data-spelling-suggestion="'+spellingSuggestion+'">'+spellingSuggestion+'</a>?</div>');}};var defaultRenderPaginationForType=function(type,currentPage,totalPages){var pages='<div class="st-page">',previousPage,nextPage;if(currentPage!=1){previousPage=currentPage-1;pages=pages+'<a href="#" class="st-prev" data-hash="true" data-page="'+previousPage+'">&laquo; previous</a>';}
if(currentPage<totalPages){nextPage=currentPage+1;pages=pages+'<a href="#" class="st-next" data-hash="true" data-page="'+nextPage+'">next &raquo;</a>';}
pages+='</div>';return pages;};$.fn.swiftypeSearch.defaults={attachTo:undefined,documentTypes:undefined,facets:undefined,filters:undefined,engineKey:undefined,searchFields:undefined,functionalBoosts:undefined,sortField:undefined,sortDirection:undefined,fetchFields:undefined,highlightFields:undefined,preRenderFunction:undefined,postRenderFunction:defaultPostRenderFunction,loadingFunction:defaultLoadingFunction,renderResultsFunction:defaultRenderResultsFunction,renderFunction:defaultRenderFunction,renderPaginationForType:defaultRenderPaginationForType,onComplete:defaultOnComplete,perPage:10,spelling:'strict'};})(jQuery);/*!
* js-logger - http://github.com/jonnyreeves/js-logger
* Jonny Reeves, http://jonnyreeves.co.uk/
* js-logger may be freely distributed under the MIT license.
*/(function(global){"use strict";var Logger={};Logger.VERSION="1.3.0";var logHandler;var contextualLoggersByNameMap={};var bind=function(scope,func){return function(){return func.apply(scope,arguments);};};var merge=function(){var args=arguments,target=args[0],key,i;for(i=1;i<args.length;i++){for(key in args[i]){if(!(key in target)&&args[i].hasOwnProperty(key)){target[key]=args[i][key];}}}
return target;};var defineLogLevel=function(value,name){return{value:value,name:name};};Logger.DEBUG=defineLogLevel(1,'DEBUG');Logger.INFO=defineLogLevel(2,'INFO');Logger.TIME=defineLogLevel(3,'TIME');Logger.WARN=defineLogLevel(4,'WARN');Logger.ERROR=defineLogLevel(8,'ERROR');Logger.OFF=defineLogLevel(99,'OFF');var ContextualLogger=function(defaultContext){this.context=defaultContext;this.setLevel(defaultContext.filterLevel);this.log=this.info;};ContextualLogger.prototype={setLevel:function(newLevel){if(newLevel&&"value"in newLevel){this.context.filterLevel=newLevel;}},enabledFor:function(lvl){var filterLevel=this.context.filterLevel;return lvl.value>=filterLevel.value;},debug:function(){this.invoke(Logger.DEBUG,arguments);},info:function(){this.invoke(Logger.INFO,arguments);},warn:function(){this.invoke(Logger.WARN,arguments);},error:function(){this.invoke(Logger.ERROR,arguments);},time:function(label){if(typeof label==='string'&&label.length>0){this.invoke(Logger.TIME,[label,'start']);}},timeEnd:function(label){if(typeof label==='string'&&label.length>0){this.invoke(Logger.TIME,[label,'end']);}},invoke:function(level,msgArgs){if(logHandler&&this.enabledFor(level)){logHandler(msgArgs,merge({level:level},this.context));}}};var globalLogger=new ContextualLogger({filterLevel:Logger.OFF});(function(){var L=Logger;L.enabledFor=bind(globalLogger,globalLogger.enabledFor);L.debug=bind(globalLogger,globalLogger.debug);L.time=bind(globalLogger,globalLogger.time);L.timeEnd=bind(globalLogger,globalLogger.timeEnd);L.info=bind(globalLogger,globalLogger.info);L.warn=bind(globalLogger,globalLogger.warn);L.error=bind(globalLogger,globalLogger.error);L.log=L.info;}());Logger.setHandler=function(func){logHandler=func;};Logger.setLevel=function(level){globalLogger.setLevel(level);for(var key in contextualLoggersByNameMap){if(contextualLoggersByNameMap.hasOwnProperty(key)){contextualLoggersByNameMap[key].setLevel(level);}}};Logger.get=function(name){return contextualLoggersByNameMap[name]||(contextualLoggersByNameMap[name]=new ContextualLogger(merge({name:name},globalLogger.context)));};Logger.createDefaultHandler=function(options){options=options||{};options.formatter=options.formatter||function defaultMessageFormatter(messages,context){if(context.name){messages.unshift("["+context.name+"]");}};var timerStartTimeByLabelMap={};var invokeConsoleMethod=function(hdlr,messages){Function.prototype.apply.call(hdlr,console,messages);};if(typeof console==="undefined"){return function(){};}
return function(messages,context){messages=Array.prototype.slice.call(messages);var hdlr=console.log;var timerLabel;if(context.level===Logger.TIME){timerLabel=(context.name?'['+context.name+'] ':'')+messages[0];if(messages[1]==='start'){if(console.time){console.time(timerLabel);}
else{timerStartTimeByLabelMap[timerLabel]=new Date().getTime();}}
else{if(console.timeEnd){console.timeEnd(timerLabel);}
else{invokeConsoleMethod(hdlr,[timerLabel+': '+
(new Date().getTime()-timerStartTimeByLabelMap[timerLabel])+'ms']);}}}
else{if(context.level===Logger.WARN&&console.warn){hdlr=console.warn;}else if(context.level===Logger.ERROR&&console.error){hdlr=console.error;}else if(context.level===Logger.INFO&&console.info){hdlr=console.info;}else if(context.level===Logger.DEBUG&&console.debug){hdlr=console.debug;}
options.formatter(messages,context);invokeConsoleMethod(hdlr,messages);}};};Logger.useDefaults=function(options){Logger.setLevel(options&&options.defaultLevel||Logger.DEBUG);Logger.setHandler(Logger.createDefaultHandler(options));};if(typeof define==='function'&&define.amd){define(Logger);}
else if(typeof module!=='undefined'&&module.exports){module.exports=Logger;}
else{Logger._prevLogger=global.Logger;Logger.noConflict=function(){global.Logger=Logger._prevLogger;return Logger;};global.Logger=Logger;}}(this));/*!npm.im/object-fit-images*/var objectFitImages=function(){"use strict";function t(t){for(var e,r=getComputedStyle(t).fontFamily,i={};null!==(e=n.exec(r));)i[e[1]]=e[2];return i}function e(e,i){if(!e[c].parsingSrcset){var s=t(e);if(s["object-fit"]=s["object-fit"]||"fill",!e[c].s){if("fill"===s["object-fit"])return;if(!e[c].skipTest&&l&&!s["object-position"])return}var n=e[c].ios7src||e.currentSrc||e.src;if(i)n=i;else if(e.srcset&&!a&&window.picturefill){var o=window.picturefill._.ns;e[c].parsingSrcset=!0,e[o]&&e[o].evaled||window.picturefill._.fillImg(e,{reselect:!0}),e[o].curSrc||(e[o].supported=!1,window.picturefill._.fillImg(e,{reselect:!0})),delete e[c].parsingSrcset,n=e[o].curSrc||n}if(e[c].s)e[c].s=n,i&&(e[c].srcAttr=i);else{e[c]={s:n,srcAttr:i||f.call(e,"src"),srcsetAttr:e.srcset},e.src=c;try{e.srcset&&(e.srcset="",Object.defineProperty(e,"srcset",{value:e[c].srcsetAttr})),r(e)}catch(t){e[c].ios7src=n}}e.style.backgroundImage='url("'+n+'")',e.style.backgroundPosition=s["object-position"]||"center",e.style.backgroundRepeat="no-repeat",/scale-down/.test(s["object-fit"])?(e[c].i||(e[c].i=new Image,e[c].i.src=n),function t(){return e[c].i.naturalWidth?void(e[c].i.naturalWidth>e.width||e[c].i.naturalHeight>e.height?e.style.backgroundSize="contain":e.style.backgroundSize="auto"):void setTimeout(t,100)}()):e.style.backgroundSize=s["object-fit"].replace("none","auto").replace("fill","100% 100%")}}function r(t){var r={get:function(){return t[c].s},set:function(r){return delete t[c].i,e(t,r),r}};Object.defineProperty(t,"src",r),Object.defineProperty(t,"currentSrc",{get:r.get})}function i(){u||(HTMLImageElement.prototype.getAttribute=function(t){return!this[c]||"src"!==t&&"srcset"!==t?f.call(this,t):this[c][t+"Attr"]},HTMLImageElement.prototype.setAttribute=function(t,e){!this[c]||"src"!==t&&"srcset"!==t?g.call(this,t,e):this["src"===t?"src":t+"Attr"]=String(e)})}function s(t,r){var i=!A&&!t;if(r=r||{},t=t||"img",u&&!r.skipTest)return!1;"string"==typeof t?t=document.querySelectorAll("img"):t.length||(t=[t]);for(var n=0;n<t.length;n++)t[n][c]=t[n][c]||r,e(t[n]);i&&(document.body.addEventListener("load",function(t){"IMG"===t.target.tagName&&s(t.target,{skipTest:r.skipTest})},!0),A=!0,t="img"),r.watchMQ&&window.addEventListener("resize",s.bind(null,t,{skipTest:r.skipTest}))}var c="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",n=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,o=new Image,l="object-fit"in o.style,u="object-position"in o.style,a="string"==typeof o.currentSrc,f=o.getAttribute,g=o.setAttribute,A=!1;return s.supportsObjectFit=l,s.supportsObjectPosition=u,i(),s}();function firstly(promise){return Promise.resolve().then(promise);}
function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);}
function fireNativeEvent(element,type){if("createEvent"in document){var evt=document.createEvent("HTMLEvents");evt.initEvent(type,false,true);element.dispatchEvent(evt);}
else{element.fireEvent("on"+type);}}
function queryForAncestor(pointer,selector){var target=false;while(pointer&&!target){if(pointer.hasAttribute(selector)||(pointer.classList&&pointer.classList.contains(selector))){target=pointer;break;}
pointer=pointer.parentNode;}
return target;}
function serialize(obj,prefix){var str=[],p;for(p in obj){if(obj.hasOwnProperty(p)){var k=prefix?prefix+"["+p+"]":p,v=obj[p];str.push((v!==null&&typeof v==="object")?serialize(v,k):encodeURIComponent(k)+"="+encodeURIComponent(v));}}
return str.join("&");}
function prefix(el,prop,value){var _prop=capitalizeFirstLetter(prop);el.style["webkit"+_prop]=value;el.style["Moz"+_prop]=value;el.style["ms"+_prop]=value;el.style["O"+_prop]=value;el.style[prop]=value;}
function emptyElement(element){while(element.firstChild){element.removeChild(element.firstChild);}}
function isElement(obj){return(typeof HTMLElement==="object"?obj instanceof HTMLElement:obj&&typeof obj==="object"&&obj!==null&&obj.nodeType===1&&typeof obj.nodeName==="string");}
function linearMap(value,inputMin,inputMax,outputMin,outputMax,clamp){if(Math.abs(inputMin-inputMax)<Number.EPSILON){return outputMin;}
var outVal=((value-inputMin)/(inputMax-inputMin)*(outputMax-outputMin)+outputMin);if(clamp){if(outputMax<outputMin){if(outVal<outputMax)outVal=outputMax;else if(outVal>outputMin)outVal=outputMin;}
else{if(outVal>outputMax)outVal=outputMax;else if(outVal<outputMin)outVal=outputMin;}}
return outVal;}
function shuffle(array){var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue;}
return array;}
function getRandom(min,max){return Math.random()*(max-min)+min;}
function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1)+min);}
function forEach(array,callback,scope){for(var i=0;i<array.length;i++){callback.call(scope,i,array[i]);}}
function delay(milliseconds){var timeout,cancel;var p=new Promise(function(resolve,reject){timeout=setTimeout(resolve,milliseconds);cancel=reject;})
p.cancel=function(){clearTimeout(timeout);cancel(Error("Delay Cancelled"));}
return p;}
function scrollY(){var doc=document.documentElement;var scrollY=(window.pageYOffset||doc.scrollTop)-(doc.clientTop||0);return scrollY;}
function scrollX(){var doc=document.documentElement;var scrollX=(window.pageXOffset||doc.scrollLeft)-(doc.scrollLeft||0);return scrollX;}
function scroll(){return{x:scrollX(),y:scrollY()};}
function viewportWidth(){return window.innerWidth;}
function viewportHeight(){return window.innerHeight;}
function getDimensionsForElement(element){var y=scrollY();var x=scrollX();var sourceRect=element.getBoundingClientRect();var sourceStyles=window.getComputedStyle(element);var marginTop=Number(sourceStyles.getPropertyValue("margin-top").replace(/[^-\d\.]/g,''));var marginBottom=Number(sourceStyles.getPropertyValue("margin-bottom").replace(/[^-\d\.]/g,''));var marginLeft=Number(sourceStyles.getPropertyValue("margin-left").replace(/[^-\d\.]/g,''));var marginRight=Number(sourceStyles.getPropertyValue("margin-right").replace(/[^-\d\.]/g,''));var rect={width:sourceRect.width,height:sourceRect.height,top:sourceRect.top,bottom:sourceRect.bottom,left:sourceRect.left,right:sourceRect.right};rect.top+=y;rect.bottom+=y;rect.left+=x;rect.right+=x;rect.marginTop=marginTop;rect.marginBottom=marginBottom;rect.marginLeft=marginLeft;rect.marginRight=marginRight;return rect;}
function isRectPartiallyInViewport(rect){var windowHeight=(window.innerHeight||document.documentElement.clientHeight);var windowWidth=(window.innerWidth||document.documentElement.clientWidth);var vertInView=(rect.top<=windowHeight)&&((rect.top+rect.height)>=0);var horInView=(rect.left<=windowWidth)&&((rect.left+rect.width)>=0);return(vertInView&&horInView);}
function isElementPartiallyInViewport(el)
{if(typeof jQuery!=='undefined'&&el instanceof jQuery)el=el[0];var rect=el.getBoundingClientRect();return isRectPartiallyInViewport(rect);}
function isRectInViewport(rect){var windowHeight=(window.innerHeight||document.documentElement.clientHeight);var windowWidth=(window.innerWidth||document.documentElement.clientWidth);return((rect.left>=0)&&(rect.top>=0)&&((rect.left+rect.width)<=windowWidth)&&((rect.top+rect.height)<=windowHeight));}
function isElementInViewport(el)
{if(typeof jQuery!=='undefined'&&el instanceof jQuery)el=el[0];var rect=el.getBoundingClientRect();return isRectInViewport();}
function stringEncodeHTMLEntities(str){return str.replace(/./gm,function(s){return "&#"+s.charCodeAt(0)+";";});}
function stringDecodeHTMLEntities(str){return(str+"").replace(/&#\d+;/gm,function(s){return String.fromCharCode(s.match(/\d+/gm)[0]);});}
function getQueryStringParameter(key,url){if(!url){url=window.location.href;}
key=key.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+key+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return '';return decodeURIComponent(results[2].replace(/\+/g," "));}/*!
* validate.js 0.10.0
*
* (c) 2013-2016 Nicklas Ansman, 2013 Wrapp
* Validate.js may be freely distributed under the MIT license.
* For all details and documentation:
* http://validatejs.org/
*/
(function(exports,module,define){"use strict";var validate=function(attributes,constraints,options){options=v.extend({},v.options,options);var results=v.runValidations(attributes,constraints,options),attr,validator;for(attr in results){for(validator in results[attr]){if(v.isPromise(results[attr][validator])){throw new Error("Use validate.async if you want support for promises");}}}
return validate.processValidationResults(results,options);};var v=validate;v.extend=function(obj){[].slice.call(arguments,1).forEach(function(source){for(var attr in source){obj[attr]=source[attr];}});return obj;};v.extend(validate,{version:{major:0,minor:10,patch:0,metadata:"development",toString:function(){var version=v.format("%{major}.%{minor}.%{patch}",v.version);if(!v.isEmpty(v.version.metadata)){version+="+"+v.version.metadata;}
return version;}},Promise:typeof Promise!=="undefined"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(attributes,constraints,options){var results=[],attr,validatorName,value,validators,validator,validatorOptions,error;if(v.isDomElement(attributes)||v.isJqueryElement(attributes)){attributes=v.collectFormValues(attributes);}
for(attr in constraints){value=v.getDeepObjectValue(attributes,attr);validators=v.result(constraints[attr],value,attributes,attr,options,constraints);for(validatorName in validators){validator=v.validators[validatorName];if(!validator){error=v.format("Unknown validator %{name}",{name:validatorName});throw new Error(error);}
validatorOptions=validators[validatorName];validatorOptions=v.result(validatorOptions,value,attributes,attr,options,constraints);if(!validatorOptions){continue;}
results.push({attribute:attr,value:value,validator:validatorName,globalOptions:options,attributes:attributes,options:validatorOptions,error:validator.call(validator,value,validatorOptions,attr,attributes,options)});}}
return results;},processValidationResults:function(errors,options){errors=v.pruneEmptyErrors(errors,options);errors=v.expandMultipleErrors(errors,options);errors=v.convertErrorMessages(errors,options);var format=options.format||"grouped";if(typeof v.formatters[format]==='function'){errors=v.formatters[format](errors);}else{throw new Error(v.format("Unknown format %{format}",options));}
return v.isEmpty(errors)?undefined:errors;},async:function(attributes,constraints,options){options=v.extend({},v.async.options,options);var WrapErrors=options.wrapErrors||function(errors){return errors;};if(options.cleanAttributes!==false){attributes=v.cleanAttributes(attributes,constraints);}
var results=v.runValidations(attributes,constraints,options);return new v.Promise(function(resolve,reject){v.waitForResults(results).then(function(){var errors=v.processValidationResults(results,options);if(errors){reject(new WrapErrors(errors,options,attributes,constraints));}else{resolve(attributes);}},function(err){reject(err);});});},single:function(value,constraints,options){options=v.extend({},v.single.options,options,{format:"flat",fullMessages:false});return v({single:value},{single:constraints},options);},waitForResults:function(results){return results.reduce(function(memo,result){if(!v.isPromise(result.error)){return memo;}
return memo.then(function(){return result.error.then(function(error){result.error=error||null;});});},new v.Promise(function(r){r();}));},result:function(value){var args=[].slice.call(arguments,1);if(typeof value==='function'){value=value.apply(null,args);}
return value;},isNumber:function(value){return typeof value==='number'&&!isNaN(value);},isFunction:function(value){return typeof value==='function';},isInteger:function(value){return v.isNumber(value)&&value%1===0;},isBoolean:function(value){return typeof value==='boolean';},isObject:function(obj){return obj===Object(obj);},isDate:function(obj){return obj instanceof Date;},isDefined:function(obj){return obj!==null&&obj!==undefined;},isPromise:function(p){return!!p&&v.isFunction(p.then);},isJqueryElement:function(o){return o&&v.isString(o.jquery);},isDomElement:function(o){if(!o){return false;}
if(!o.querySelectorAll||!o.querySelector){return false;}
if(v.isObject(document)&&o===document){return true;}
if(typeof HTMLElement==="object"){return o instanceof HTMLElement;}else{return o&&typeof o==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string";}},isEmpty:function(value){var attr;if(!v.isDefined(value)){return true;}
if(v.isFunction(value)){return false;}
if(v.isString(value)){return v.EMPTY_STRING_REGEXP.test(value);}
if(v.isArray(value)){return value.length===0;}
if(v.isDate(value)){return false;}
if(v.isObject(value)){for(attr in value){return false;}
return true;}
return false;},format:v.extend(function(str,vals){if(!v.isString(str)){return str;}
return str.replace(v.format.FORMAT_REGEXP,function(m0,m1,m2){if(m1==='%'){return "%{"+m2+"}";}else{return String(vals[m2]);}});},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(str){if(v.isNumber(str)){if((str*100)%1===0){return ""+str;}else{return parseFloat(Math.round(str*100)/100).toFixed(2);}}
if(v.isArray(str)){return str.map(function(s){return v.prettify(s);}).join(", ");}
if(v.isObject(str)){return str.toString();}
str=""+str;return str.replace(/([^\s])\.([^\s])/g,'$1 $2').replace(/\\+/g,'').replace(/[_-]/g,' ').replace(/([a-z])([A-Z])/g,function(m0,m1,m2){return ""+m1+" "+m2.toLowerCase();}).toLowerCase();},stringifyValue:function(value){return v.prettify(value);},isString:function(value){return typeof value==='string';},isArray:function(value){return{}.toString.call(value)==='[object Array]';},isHash:function(value){return v.isObject(value)&&!v.isArray(value)&&!v.isFunction(value);},contains:function(obj,value){if(!v.isDefined(obj)){return false;}
if(v.isArray(obj)){return obj.indexOf(value)!==-1;}
return value in obj;},unique:function(array){if(!v.isArray(array)){return array;}
return array.filter(function(el,index,array){return array.indexOf(el)==index;});},forEachKeyInKeypath:function(object,keypath,callback){if(!v.isString(keypath)){return undefined;}
var key="",i,escape=false;for(i=0;i<keypath.length;++i){switch(keypath[i]){case '.':if(escape){escape=false;key+='.';}else{object=callback(object,key,false);key="";}
break;case '\\':if(escape){escape=false;key+='\\';}else{escape=true;}
break;default:escape=false;key+=keypath[i];break;}}
return callback(object,key,true);},getDeepObjectValue:function(obj,keypath){if(!v.isObject(obj)){return undefined;}
return v.forEachKeyInKeypath(obj,keypath,function(obj,key){if(v.isObject(obj)){return obj[key];}});},collectFormValues:function(form,options){var values={},i,j,input,inputs,option,value;if(v.isJqueryElement(form)){form=form[0];}
if(!form){return values;}
options=options||{};inputs=form.querySelectorAll("input[name], textarea[name]");for(i=0;i<inputs.length;++i){input=inputs.item(i);if(v.isDefined(input.getAttribute("data-ignored"))){continue;}
value=v.sanitizeFormValue(input.value,options);if(input.type==="number"){value=value?+value:null;}else if(input.type==="checkbox"){if(input.attributes.value){if(!input.checked){value=values[input.name]||null;}}else{value=input.checked;}}else if(input.type==="radio"){if(!input.checked){value=values[input.name]||null;}}
values[input.name]=value;}
inputs=form.querySelectorAll("select[name]");for(i=0;i<inputs.length;++i){input=inputs.item(i);if(input.multiple){value=[];for(j in input.options){option=input.options[j];if(option.selected){value.push(v.sanitizeFormValue(option.value,options));}}}else{value=v.sanitizeFormValue(input.options[input.selectedIndex].value,options);}
values[input.name]=value;}
return values;},sanitizeFormValue:function(value,options){if(options.trim&&v.isString(value)){value=value.trim();}
if(options.nullify!==false&&value===""){return null;}
return value;},capitalize:function(str){if(!v.isString(str)){return str;}
return str[0].toUpperCase()+str.slice(1);},pruneEmptyErrors:function(errors){return errors.filter(function(error){return!v.isEmpty(error.error);});},expandMultipleErrors:function(errors){var ret=[];errors.forEach(function(error){if(v.isArray(error.error)){error.error.forEach(function(msg){ret.push(v.extend({},error,{error:msg}));});}else{ret.push(error);}});return ret;},convertErrorMessages:function(errors,options){options=options||{};var ret=[];errors.forEach(function(errorInfo){var error=v.result(errorInfo.error,errorInfo.value,errorInfo.attribute,errorInfo.options,errorInfo.attributes,errorInfo.globalOptions);if(!v.isString(error)){ret.push(errorInfo);return;}
if(error[0]==='^'){error=error.slice(1);}else if(options.fullMessages!==false){error=v.capitalize(v.prettify(errorInfo.attribute))+" "+error;}
error=error.replace(/\\\^/g,"^");error=v.format(error,{value:v.stringifyValue(errorInfo.value)});ret.push(v.extend({},errorInfo,{error:error}));});return ret;},groupErrorsByAttribute:function(errors){var ret={};errors.forEach(function(error){var list=ret[error.attribute];if(list){list.push(error);}else{ret[error.attribute]=[error];}});return ret;},flattenErrorsToArray:function(errors){return errors.map(function(error){return error.error;}).filter(function(value,index,self){return self.indexOf(value)===index;});},cleanAttributes:function(attributes,whitelist){function whitelistCreator(obj,key,last){if(v.isObject(obj[key])){return obj[key];}
return(obj[key]=last?true:{});}
function buildObjectWhitelist(whitelist){var ow={},lastObject,attr;for(attr in whitelist){if(!whitelist[attr]){continue;}
v.forEachKeyInKeypath(ow,attr,whitelistCreator);}
return ow;}
function cleanRecursive(attributes,whitelist){if(!v.isObject(attributes)){return attributes;}
var ret=v.extend({},attributes),w,attribute;for(attribute in attributes){w=whitelist[attribute];if(v.isObject(w)){ret[attribute]=cleanRecursive(ret[attribute],w);}else if(!w){delete ret[attribute];}}
return ret;}
if(!v.isObject(whitelist)||!v.isObject(attributes)){return{};}
whitelist=buildObjectWhitelist(whitelist);return cleanRecursive(attributes,whitelist);},exposeModule:function(validate,root,exports,module,define){if(exports){if(module&&module.exports){exports=module.exports=validate;}
exports.validate=validate;}else{root.validate=validate;if(validate.isFunction(define)&&define.amd){define([],function(){return validate;});}}},warn:function(msg){if(typeof console!=="undefined"&&console.warn){console.warn("[validate.js] "+msg);}},error:function(msg){if(typeof console!=="undefined"&&console.error){console.error("[validate.js] "+msg);}}});validate.validators={presence:function(value,options){options=v.extend({},this.options,options);if(v.isEmpty(value)){return options.message||this.message||"can't be blank";}},length:function(value,options,attribute){if(v.isEmpty(value)){return;}
options=v.extend({},this.options,options);var is=options.is,maximum=options.maximum,minimum=options.minimum,tokenizer=options.tokenizer||function(val){return val;},err,errors=[];value=tokenizer(value);var length=value.length;if(!v.isNumber(length)){v.error(v.format("Attribute %{attr} has a non numeric value for `length`",{attr:attribute}));return options.message||this.notValid||"has an incorrect length";}
if(v.isNumber(is)&&length!==is){err=options.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)";errors.push(v.format(err,{count:is}));}
if(v.isNumber(minimum)&&length<minimum){err=options.tooShort||this.tooShort||"is too short (minimum is %{count} characters)";errors.push(v.format(err,{count:minimum}));}
if(v.isNumber(maximum)&&length>maximum){err=options.tooLong||this.tooLong||"is too long (maximum is %{count} characters)";errors.push(v.format(err,{count:maximum}));}
if(errors.length>0){return options.message||errors;}},numericality:function(value,options){if(v.isEmpty(value)){return;}
options=v.extend({},this.options,options);var errors=[],name,count,checks={greaterThan:function(v,c){return v>c;},greaterThanOrEqualTo:function(v,c){return v>=c;},equalTo:function(v,c){return v===c;},lessThan:function(v,c){return v<c;},lessThanOrEqualTo:function(v,c){return v<=c;},divisibleBy:function(v,c){return v%c===0;}};if(v.isString(value)&&options.strict){var pattern="^(0|[1-9]\\d*)";if(!options.onlyInteger){pattern+="(\\.\\d+)?";}
pattern+="$";if(!(new RegExp(pattern).test(value))){return options.message||options.notValid||this.notValid||this.message||"must be a valid number";}}
if(options.noStrings!==true&&v.isString(value)){value=+value;}
if(!v.isNumber(value)){return options.message||options.notValid||this.notValid||this.message||"is not a number";}
if(options.onlyInteger&&!v.isInteger(value)){return options.message||options.notInteger||this.notInteger||this.message||"must be an integer";}
for(name in checks){count=options[name];if(v.isNumber(count)&&!checks[name](value,count)){var key="not"+v.capitalize(name);var msg=options[key]||this[key]||this.message||"must be %{type} %{count}";errors.push(v.format(msg,{count:count,type:v.prettify(name)}));}}
if(options.odd&&value%2!==1){errors.push(options.notOdd||this.notOdd||this.message||"must be odd");}
if(options.even&&value%2!==0){errors.push(options.notEven||this.notEven||this.message||"must be even");}
if(errors.length){return options.message||errors;}},datetime:v.extend(function(value,options){if(!v.isFunction(this.parse)||!v.isFunction(this.format)){throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");}
if(v.isEmpty(value)){return;}
options=v.extend({},this.options,options);var err,errors=[],earliest=options.earliest?this.parse(options.earliest,options):NaN,latest=options.latest?this.parse(options.latest,options):NaN;value=this.parse(value,options);if(isNaN(value)||options.dateOnly&&value%86400000!==0){err=options.notValid||options.message||this.notValid||"must be a valid date";return v.format(err,{value:arguments[0]});}
if(!isNaN(earliest)&&value<earliest){err=options.tooEarly||options.message||this.tooEarly||"must be no earlier than %{date}";err=v.format(err,{value:this.format(value,options),date:this.format(earliest,options)});errors.push(err);}
if(!isNaN(latest)&&value>latest){err=options.tooLate||options.message||this.tooLate||"must be no later than %{date}";err=v.format(err,{date:this.format(latest,options),value:this.format(value,options)});errors.push(err);}
if(errors.length){return v.unique(errors);}},{parse:null,format:null}),date:function(value,options){options=v.extend({},options,{dateOnly:true});return v.validators.datetime.call(v.validators.datetime,value,options);},format:function(value,options){if(v.isString(options)||(options instanceof RegExp)){options={pattern:options};}
options=v.extend({},this.options,options);var message=options.message||this.message||"is invalid",pattern=options.pattern,match;if(v.isEmpty(value)){return;}
if(!v.isString(value)){return message;}
if(v.isString(pattern)){pattern=new RegExp(options.pattern,options.flags);}
match=pattern.exec(value);if(!match||match[0].length!=value.length){return message;}},inclusion:function(value,options){if(v.isEmpty(value)){return;}
if(v.isArray(options)){options={within:options};}
options=v.extend({},this.options,options);if(v.contains(options.within,value)){return;}
var message=options.message||this.message||"^%{value} is not included in the list";return v.format(message,{value:value});},exclusion:function(value,options){if(v.isEmpty(value)){return;}
if(v.isArray(options)){options={within:options};}
options=v.extend({},this.options,options);if(!v.contains(options.within,value)){return;}
var message=options.message||this.message||"^%{value} is restricted";return v.format(message,{value:value});},email:v.extend(function(value,options){options=v.extend({},this.options,options);var message=options.message||this.message||"is not a valid email";if(v.isEmpty(value)){return;}
if(!v.isString(value)){return message;}
if(!this.PATTERN.exec(value)){return message;}},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(value,options,attribute,attributes){if(v.isEmpty(value)){return;}
if(v.isString(options)){options={attribute:options};}
options=v.extend({},this.options,options);var message=options.message||this.message||"is not equal to %{attribute}";if(v.isEmpty(options.attribute)||!v.isString(options.attribute)){throw new Error("The attribute must be a non empty string");}
var otherValue=v.getDeepObjectValue(attributes,options.attribute),comparator=options.comparator||function(v1,v2){return v1===v2;};if(!comparator(value,otherValue,options,attribute,attributes)){return v.format(message,{attribute:v.prettify(options.attribute)});}},url:function(value,options){if(v.isEmpty(value)){return;}
options=v.extend({},this.options,options);var message=options.message||this.message||"is not a valid url",schemes=options.schemes||this.schemes||['http','https'],allowLocal=options.allowLocal||this.allowLocal||false;if(!v.isString(value)){return message;}
var regex="^"+
"(?:(?:"+schemes.join("|")+")://)"+
"(?:\\S+(?::\\S*)?@)?"+
"(?:";var tld="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(allowLocal){tld+="?";}else{regex+="(?!(?:10|127)(?:\\.\\d{1,3}){3})"+
"(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})"+
"(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})";}
regex+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])"+
"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}"+
"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))"+
"|"+
"(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)"+
"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+
tld+
")"+
"(?::\\d{2,5})?"+
"(?:[/?#]\\S*)?"+
"$";var PATTERN=new RegExp(regex,'i');if(!PATTERN.exec(value)){return message;}}};validate.formatters={detailed:function(errors){return errors;},flat:v.flattenErrorsToArray,grouped:function(errors){var attr;errors=v.groupErrorsByAttribute(errors);for(attr in errors){errors[attr]=v.flattenErrorsToArray(errors[attr]);}
return errors;}};validate.exposeModule(validate,this,exports,module,define);}).call(this,typeof exports!=='undefined'?exports:null,typeof module!=='undefined'?module:null,typeof define!=='undefined'?define:null);/*!@vimeo/player v1.0.6 | (c) 2016 Vimeo | MIT License | https://github.com/vimeo/player.js*/!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.Vimeo=e.Vimeo||{},e.Vimeo.Player=t())}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e,t,n){var r=T.get(e.element)||{};t in r||(r[t]=[]),r[t].push(n),T.set(e.element,r)}function n(e,t){var n=T.get(e.element)||{};return n[t]||[]}function r(e,t,n){var r=T.get(e.element)||{};if(!r[t])return!0;if(!n)return r[t]=[],T.set(e.element,r),!0;var o=r[t].indexOf(n);return o!==-1&&r[t].splice(o,1),T.set(e.element,r),r[t]&&0===r[t].length}function o(e,t){var n=T.get(e);T.set(t,n),T.delete(e)}function i(e,t){return 0===e.indexOf(t.toLowerCase())?e:""+t.toLowerCase()+e.substr(0,1).toUpperCase()+e.substr(1)}function a(e){return e instanceof window.HTMLElement}function u(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function s(e){return/^(https?:)?\/\/(player.)?vimeo.com(?=$|\/)/.test(e)}function c(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.id,n=e.url,r=t||n;if(!r)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(u(r))return"https://vimeo.com/"+r;if(s(r))return r.replace("http:","https:");if(t)throw new TypeError(""+t+" is not a valid video id.");throw new TypeError(""+r+" is not a vimeo.com url.")}function f(e){for(var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=_,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if(o=n.next(),o.done)break;i=o.value}var a=i,u=e.getAttribute("data-vimeo-"+a);(u||""===u)&&(t[a]=""===u?1:u)}return t}function l(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new Promise(function(n,r){if(!s(e))throw new TypeError(""+e+" is not a vimeo.com url.");var o="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e);for(var i in t)t.hasOwnProperty(i)&&(o+="&"+i+"="+encodeURIComponent(t[i]));var a="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;a.open("GET",o,!0),a.onload=function(){if(404===a.status)return void r(new Error(""+e+" was not found."));if(403===a.status)return void r(new Error(""+e+" is not embeddable."));try{var t=JSON.parse(a.responseText);n(t)}catch(e){r(e)}},a.onerror=function(){var e=a.status?" ("+a.status+")":"";r(new Error("There was an error fetching the embed code from Vimeo"+e+"."))},a.send()})}function h(e,t){var n=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var r=document.createElement("div");return r.innerHTML=n,t.appendChild(r.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function d(){var e=arguments.length<=0||void 0===arguments[0]?document:arguments[0],t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: "+e)},r=function(){if(i){if(a>=o.length)return"break";u=o[a++]}else{if(a=o.next(),a.done)return"break";u=a.value}var e=u;try{if(null!==e.getAttribute("data-vimeo-defer"))return"continue";var t=f(e),r=c(t);l(r,t).then(function(t){return h(t,e)}).catch(n)}catch(e){n(e)}};e:for(var o=t,i=Array.isArray(o),a=0,o=i?o:o[Symbol.iterator]();;){var u,s=r();switch(s){case"break":break e;case"continue":continue}}}function p(e){return"string"==typeof e&&(e=JSON.parse(e)),e}function v(e,t,n){if(e.element.contentWindow.postMessage){var r={method:t};void 0!==n&&(r.value=n);var o=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));o>=8&&o<10&&(r=JSON.stringify(r)),e.element.contentWindow.postMessage(r,e.origin)}}function y(e,t){t=p(t);var o=[],i=void 0;if(t.event){if("error"===t.event)for(var a=n(e,t.data.method),u=a,s=Array.isArray(u),c=0,u=s?u:u[Symbol.iterator]();;){var f;if(s){if(c>=u.length)break;f=u[c++]}else{if(c=u.next(),c.done)break;f=c.value}var l=f,h=new Error(t.data.message);h.name=t.data.name,l.reject(h),r(e,t.data.method,l)}o=n(e,"event:"+t.event),i=t.data}else t.method&&(o=n(e,t.method),i=t.value,r(e,t.method));for(var d=o,v=Array.isArray(d),y=0,d=v?d:d[Symbol.iterator]();;){var m;if(v){if(y>=d.length)break;m=d[y++]}else{if(y=d.next(),y.done)break;m=y.value}var g=m;try{if("function"==typeof g){g.call(e,i);continue}g.resolve(i)}catch(e){}}}var m="undefined"!=typeof Array.prototype.indexOf,g="undefined"!=typeof window.postMessage;if(!m||!g)throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var w="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b=(e(function(e,t){!function(e){function t(e,t){function r(e){return this&&this.constructor===r?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,void(e&&n.call(this,e))):new r(e)}return t||w(e,"size",{get:y}),e.constructor=r,r.prototype=e,r}function n(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}function r(e){return this.has(e)&&(this._keys.splice(g,1),this._values.splice(g,1),this._itp.forEach(function(e){g<e[0]&&e[0]--})),-1<g}function o(e){return this.has(e)?this._values[g]:void 0}function i(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(g=e.length;g--&&!b(e[g],t););else g=e.indexOf(t);return-1<g}function a(e){return i.call(this,this._values,e)}function u(e){return i.call(this,this._keys,e)}function s(e,t){return this.has(e)?this._values[g]=t:this._values[this._keys.push(e)-1]=t,this}function c(e){return this.has(e)||this._values.push(e),this}function f(){(this._keys||0).length=this._values.length=0}function l(){return v(this._itp,this._keys)}function h(){return v(this._itp,this._values)}function d(){return v(this._itp,this._keys,this._values)}function p(){return v(this._itp,this._values,this._values)}function v(e,t,n){var r=[0],o=!1;return e.push(r),{next:function(){var i,a=r[0];return!o&&a<t.length?(i=n?[t[a],n[a]]:t[a],r[0]++):(o=!0,e.splice(e.indexOf(r),1)),{done:o,value:i}}}}function y(){return this._values.length}function m(e,t){for(var n=this.entries();;){var r=n.next();if(r.done)break;e.call(t,r.value[1],r.value[0],this)}}var g,w=Object.defineProperty,b=function(e,t){return e===t||e!==e&&t!==t};"undefined"==typeof WeakMap&&(e.WeakMap=t({delete:r,clear:f,get:o,has:u,set:s},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=t({delete:r,has:u,get:o,set:s,keys:l,values:h,entries:d,forEach:m,clear:f})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=t({has:a,add:c,delete:r,clear:f,keys:h,values:h,entries:p,forEach:m})),"undefined"==typeof WeakSet&&(e.WeakSet=t({delete:r,add:c,clear:f,has:a},!0))}("undefined"!=typeof t&&"undefined"!=typeof w?w:window)}),e(function(e){!function(t,n,r){n[t]=n[t]||r(),"undefined"!=typeof e&&e.exports?e.exports=n[t]:"function"==typeof define&&define.amd&&define(function(){return n[t]})}("Promise","undefined"!=typeof w?w:w,function(){function e(e,t){h.add(e,t),l||(l=p(h.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)r(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function r(e,n,r){var o,i;try{n===!1?r.reject(e.msg):(o=n===!0?e.msg:n.call(void 0,e.msg),o===r.promise?r.reject(TypeError("Promise-chain cycle")):(i=t(o))?i.call(o,r.resolve,r.reject):r.resolve(o))}catch(e){r.reject(e)}}function o(r){var a,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(a=t(r))?e(function(){var e=new u(s);try{a.call(r,function(){o.apply(e,arguments)},function(){i.apply(e,arguments)})}catch(t){i.call(e,t)}}):(s.msg=r,s.state=1,s.chain.length>0&&e(n,s))}catch(e){i.call(new u(s),e)}}}function i(t){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=t,r.state=2,r.chain.length>0&&e(n,r))}function a(e,t,n,r){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){n(o,e)},r)}(o)}function u(e){this.def=e,this.triggered=!1}function s(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new s(this);this.then=function(t,o){var i={success:"function"!=typeof t||t,failure:"function"==typeof o&&o};return i.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");i.resolve=e,i.reject=t}),r.chain.push(i),0!==r.state&&e(n,r),i.promise},this.catch=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){o.call(r,e)},function(e){i.call(r,e)})}catch(e){i.call(r,e)}}var f,l,h,d=Object.prototype.toString,p="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),f=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:r!==!1})}}catch(e){f=function(e,t,n){return e[t]=n,e}}h=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,r;return{add:function(o,i){r=new e(o,i),n?n.next=r:t=r,n=r,r=void 0},drain:function(){var e=t;for(t=n=l=void 0;e;)e.fn.call(e.self),e=e.next}}}();var v=f({},"constructor",c,!1);return c.prototype=v,f(v,"__NPO__",0,!1),f(c,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),f(c,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),f(c,"all",function(e){var t=this;return"[object Array]"!=d.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var o=e.length,i=Array(o),u=0;a(t,e,function(e,t){i[e]=t,++u===o&&n(i)},r)})}),f(c,"race",function(e){var t=this;return"[object Array]"!=d.call(e)?t.reject(TypeError("Not an array")):new t(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");a(t,e,function(e,t){n(t)},r)})}),c})})),E=b&&"object"==typeof b&&"default"in b?b.default:b,T=new WeakMap,_=["id","url","width","maxwidth","height","maxheight","portrait","title","byline","color","autoplay","autopause","loop","responsive"],k=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},x=new WeakMap,j=new WeakMap,Player=function(){function Player(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(k(this,Player),window.jQuery&&e instanceof jQuery&&(e.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),e=e[0]),"string"==typeof e&&(e=document.getElementById(e)),!a(e))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==e.nodeName){var r=e.querySelector("iframe");r&&(e=r)}if("IFRAME"===e.nodeName&&!s(e.getAttribute("src")||""))throw new Error("The player element passed isnt a Vimeo embed.");if(x.has(e))return x.get(e);this.element=e,this.origin="*";var i=new E(function(r,i){var a=function(e){if(s(e.origin)&&t.element.contentWindow===e.source){"*"===t.origin&&(t.origin=e.origin);var n=p(e.data),o="event"in n&&"ready"===n.event,i="method"in n&&"ping"===n.method;return o||i?(t.element.setAttribute("data-ready","true"),void r()):void y(t,n)}};if(window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent&&window.attachEvent("onmessage",a),"IFRAME"!==t.element.nodeName){var u=f(e,n),d=c(u);l(d,u).then(function(n){var r=h(n,e);return t.element=r,o(e,r),n}).catch(function(e){return i(e)})}});return j.set(this,i),x.set(this.element,this),"IFRAME"===this.element.nodeName&&v(this,"ping"),this}return Player.prototype.then=function(e){var t=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];return this.ready().then(e,t)},Player.prototype.callMethod=function(e){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new E(function(o,i){return n.ready().then(function(){t(n,e,{resolve:o,reject:i}),v(n,e,r)})})},Player.prototype.get=function(e){var n=this;return new E(function(r,o){return e=i(e,"get"),n.ready().then(function(){t(n,e,{resolve:r,reject:o}),v(n,e)})})},Player.prototype.set=function(e,n){var r=this;return E.resolve(n).then(function(n){if(e=i(e,"set"),void 0===n||null===n)throw new TypeError("There must be a value to set.");return r.ready().then(function(){return new E(function(o,i){t(r,e,{resolve:o,reject:i}),v(r,e,n)})})})},Player.prototype.on=function(e,r){if(!e)throw new TypeError("You must pass an event name.");if(!r)throw new TypeError("You must pass a callback function.");if("function"!=typeof r)throw new TypeError("The callback must be a function.");var o=n(this,"event:"+e);0===o.length&&this.callMethod("addEventListener",e).catch(function(){}),t(this,"event:"+e,r)},Player.prototype.off=function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");var n=r(this,"event:"+e,t);n&&this.callMethod("removeEventListener",e).catch(function(e){})},Player.prototype.loadVideo=function(e){return this.callMethod("loadVideo",e)},Player.prototype.ready=function(){var e=j.get(this);return E.resolve(e)},Player.prototype.enableTextTrack=function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})},Player.prototype.disableTextTrack=function(){return this.callMethod("disableTextTrack")},Player.prototype.pause=function(){return this.callMethod("pause")},Player.prototype.play=function(){return this.callMethod("play")},Player.prototype.unload=function(){return this.callMethod("unload")},Player.prototype.getAutopause=function(){return this.get("autopause")},Player.prototype.setAutopause=function(e){return this.set("autopause",e)},Player.prototype.getColor=function(){return this.get("color")},Player.prototype.setColor=function(e){return this.set("color",e)},Player.prototype.getCurrentTime=function(){return this.get("currentTime")},Player.prototype.setCurrentTime=function(e){return this.set("currentTime",e)},Player.prototype.getDuration=function(){return this.get("duration")},Player.prototype.getEnded=function(){return this.get("ended")},Player.prototype.getLoop=function(){return this.get("loop")},Player.prototype.setLoop=function(e){return this.set("loop",e)},Player.prototype.getPaused=function(){return this.get("paused")},Player.prototype.getTextTracks=function(){return this.get("textTracks")},Player.prototype.getVideoEmbedCode=function(){return this.get("videoEmbedCode")},Player.prototype.getVideoId=function(){return this.get("videoId")},Player.prototype.getVideoTitle=function(){return this.get("videoTitle")},Player.prototype.getVideoWidth=function(){return this.get("videoWidth")},Player.prototype.getVideoHeight=function(){return this.get("videoHeight")},Player.prototype.getVideoUrl=function(){return this.get("videoUrl")},Player.prototype.getVolume=function(){return this.get("volume")},Player.prototype.setVolume=function(e){return this.set("volume",e)},Player}();return d(),Player});criterion.AddMyCollectionFilmButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.ADD_MY_COLLECTION_FILM;this._MY_COLLECTION_ADD_RELEASE_ATTRIBUTE="data-add-release-id";this._CONFIRM_MESSAGE="data-confirm";this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);this._MY_COLLECTION_RELEASE_ID=this.rootElement.getAttribute(this._MY_COLLECTION_ADD_RELEASE_ATTRIBUTE);};criterion.AddMyCollectionFilmButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var self=this;self.releaseId=document.querySelector('[data-add-release-id]').getAttribute('data-add-release-id');self._showConfirmDialog(function(confirmed){if(confirmed){self._addMyCollectionFilm(self.releaseId);location.reload();}});},_showConfirmDialog:function(callback){var message=this.rootElement.getAttribute(this._CONFIRM_MESSAGE);var result=window.confirm(message);callback(result);},_addMyCollectionFilm:function(releaseId){if(!releaseId){Logger.warn("AddMyCollectionFilmButton :: Failed to locate Address ID. Ignoring.");return;}
this._xhrRequest(this._ROUTE+"?id="+releaseId);},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content"));xhr.send({xhr:true});});},};criterion.AddMyCollectionFilmNoteButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.ADD_NOTE_TO_MY_COLLECTION_FILM;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);};criterion.AddMyCollectionFilmNoteButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var noteText=this.rootElement.closest('form').querySelector('[data-note-content]').value;var dataListItem=this.rootElement.closest('form').querySelector('[data-list-item-id]');var listItemId=dataListItem.getAttribute('data-list-item-id');noteText=encodeURIComponent(noteText);this._addMyCollectionFilmNote(listItemId,noteText);},_addMyCollectionFilmNote:function(listItemId,note){this._xhrRequest(this._ROUTE+"?id="+listItemId+"&note="+note);this._userFeedback(listItemId);if(note.trim()){this._updateMyCollectionPageLinkAndIcon(listItemId);}},_updateMyCollectionPageLinkAndIcon:function(listItemId){var dataListItem=document.querySelector('.my-collection').querySelector('[data-list-item-id="'+listItemId+'"]');dataListItem.innerText='View Note';var buttons=document.querySelector('.my-collection [data-list-item-id-for-icon="'+listItemId+'"] [data-notes-buttons]');var productId=buttons.querySelector('[data-product-id]').getAttribute('data-product-id');var noteIcon='<button class="my-collection-button my-collection-button__icon" data-list-item-id="'+listItemId+'" data-product-id="'+productId+'" data-my-collection-note-icon><svg class="has-note-icon" width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><rect id="path-1" x="0" y="0" width="32" height="32"></rect></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon_white_note"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="path-1" fill="#252525" xlink:href="#path-1"></use><path d="M23,13 L23,15 L9,15 L9,13 L23,13 Z M23,9 L23,11 L9,11 L9,9 L23,9 Z M23,17 L23,19 L9,19 L9,17 L23,17 Z M16,21 L16,23 L9,23 L9,21 L16,21 Z" id="Note" fill="#FFFFFF" fill-rule="nonzero" mask="url(#mask-2)"></path></g></g></svg></button>';buttons.insertAdjacentHTML("afterbegin",noteIcon);},_userFeedback:function(listItemId){var feedbackContainer=this.rootElement.closest('.notesModal__descrip').querySelector('.notesModal__user-feedback p');feedbackContainer.innerText='Your note has been saved';feedbackContainer.style.visibility='visible';},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content"));xhr.send({xhr:true});});}};criterion.AddToCartButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.ADD_TO_CART;this._GIFT_CERTIFICATE_ROUTE=criterion.Constants.ROUTES.GIFT_CERTIFICATE_ROUTE;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);},criterion.AddToCartButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var gcForm=document.querySelector('#giftCertificateForm');var ppid=this._getPhysicalProductId();var sizeSelector=document.querySelector('#size');if(sizeSelector){if(!this._sizeSelected()){alert('Please select a size.');return false;}}
if(gcForm){if(!this._validGiftCertificateNames()){alert('Please enter all the gift certificate information before adding it to your cart.');return false;}
if(document.getElementById("to-email")){if(!this._validToEmail()){alert('Please enter a valid TO email address before adding to your cart.');return false;}}else{if(document.getElementById("to-address-street")&&!this._validToAddress()){alert('Please complete the address form before adding to your cart.');return false;}}
var params=this._collectGiftCertificateFormData();var paramString=this._buildGiftCertificateParamsString(params);var paramString=paramString+"&ppid="+ppid;this._addItemToCart(paramString);this._clearGiftCertificateForm();}else{var isFromQuickShop=evt.target.hasAttribute('data-add-to-cart-quickshop')
var paramString="?ppid="+ppid
if(isFromQuickShop){paramString+='&quickshop';}
this._addItemToCart(paramString);}},_validateEmail:function(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());},_validGiftCertificateNames:function(){if(document.getElementById("from-name").value&&document.getElementById("to-name").value)
{return true;}},_validToEmail:function(){if(this._validateEmail(document.getElementById("to-email").value)){return true;}},_validToAddress:function(){if(document.getElementById("to-address-street").value&&document.getElementById("to-address-city").value&&document.getElementById("to-address-state").value&&document.getElementById("to-address-zip").value){return true;}},_sizeSelected:function(){if(document.getElementById("size").value){return true;}},_collectGiftCertificateFormData:function(){var fromName=document.getElementById("from-name").value;var toName=document.getElementById("to-name").value;var message=document.getElementById("message").value;var valueInCents=document.getElementById("value-in-cents").value;if(document.getElementById("to-email")){var toEmail=document.getElementById("to-email").value;var params={from_name:fromName,to_name:toName,to_email:toEmail,message:message,value_in_cents:valueInCents,};}else if(document.getElementById("to-address-street")){var toAddressStreet=document.getElementById("to-address-street").value;var toAddressCity=document.getElementById("to-address-city").value;var toAddressState=document.getElementById("to-address-state").value;var toAddressZip=document.getElementById("to-address-zip").value;var params={from_name:fromName,to_name:toName,to_address_street:toAddressStreet,to_address_city:toAddressCity,to_address_state:toAddressState,to_address_zip:toAddressZip,message:message,value_in_cents:valueInCents,};}
return params;},_buildGiftCertificateParamsString:function(params){var toAddress=params.to_address_street+" "+
params.to_address_city+" "+
params.to_address_state+" "+
params.to_address_zip;var paramString="?from_name="+encodeURIComponent(params.from_name)+
"&to_name="+encodeURIComponent(params.to_name)+
"&to_email="+encodeURIComponent(params.to_email)+
"&to_address="+encodeURIComponent(toAddress)+
"&message="+encodeURIComponent(params.message)+
"&value_in_cents="+encodeURIComponent(params.value_in_cents);return paramString;},_addGiftCertificateToCart:function(paramString){var me=this;firstly(function(){return me._xhrRequest(me._GIFT_CERTIFICATE_ROUTE+
paramString);}).then(function(json){return me._xhrRequestCompleted(json);}).catch(function(err){Logger.warn(err);});},_getPhysicalProductId:function(){var ppid;if(this.rootElement.hasAttribute("data-add-to-cart-ppid")){ppid=this.rootElement.getAttribute("data-add-to-cart-ppid");}
else{ppid=document.querySelector(this.rootElement.getAttribute("data-add-to-cart-selector")).value;}
return ppid;},_clearGiftCertificateForm:function(){jQuery('#giftCertificateForm').find(":text").val('');jQuery('#giftCertificateForm').find("textarea").val('');},_addItemToCart:function(paramString){var me=this;firstly(function(){return me._xhrRequest(me._ROUTE+paramString);}).then(function(json){return me._xhrRequestCompleted(json);}).catch(function(err){Logger.warn(err);});},_xhrRequest:function(endpoint){var me=this;return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("POST",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});},_xhrRequestCompleted:function(json){if(json["code"]==200){this.dispatchEvent({type:"cart-updated",action:'add',analytics:json["analytics"]});var trackingData={event:'Product Added',data:json.segmentItem}
var segmentTracker=new criterion.SegmentAnalytics();segmentTracker.track(trackingData);return Promise.resolve();}
Logger.warn("Error updating cart.");Logger.warn(json);Promise.reject(new Error("Failed to updated cart."));}};Object.assign(criterion.AddToCartButton.prototype,EventDispatcher.prototype);criterion.AddToWishlistButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.ADD_TO_WISHLIST;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);},criterion.AddToWishlistButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_getPhysicalProductId:function(){var ppid;if(this.rootElement.hasAttribute("data-add-to-wishlist-ppid")){ppid=this.rootElement.getAttribute("data-add-to-wishlist-ppid");}
else{ppid=document.querySelector(this.rootElement.getAttribute("data-add-to-wishlist-selector")).value;}
return ppid;},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var ppid=this._getPhysicalProductId();window.location='/account/wishlist/add?ppid='+ppid;},}
criterion.Analytics=function(){this.addLocation=null;this._ROUTE=criterion.Constants.ROUTES.TRACK_PRODUCT;};criterion.Analytics.prototype={trackPage:function(path){Logger.log("Analytics :: Tracking Page.",path);var dataLayer=(window.dataLayer=window.dataLayer||[]);dataLayer.push({event:"trackEvent",eventCode:42,eventCategory:item.category,eventAction:item.action,eventLabel:item.label,eventValue:item.value});},trackArticle:function(articleData){var dataLayer=(window.dataLayer=window.dataLayer||[]);dataLayer.push({event:"contentView",ContentDate:articleData["date"],ContentCategories:articleData["categories"],ContentPosition:articleData["position"],ContentCategory:articleData["category"],ContentType:articleData["type"],ContentAuthor:articleData["author"]});Logger.log("Analytics :: Article Tracked.");},trackEvent:function(category,action,label,value,code){var dataLayer=(window.dataLayer=window.dataLayer||[]);var code=code?code:42;dataLayer.push({event:"trackEvent",eventCode:code,eventCategory:category,eventAction:action,eventLabel:label,eventValue:value});Logger.log("Analytics :: Tracking Event.","[code]"+code,"[category] "+category,", [action] "+action,", [label] "+label,", [value] "+JSON.stringify(value));},trackProduct:function(location,action,products){var me=this;me.addLocation=location;var dataLayer=(window.dataLayer=window.dataLayer||[]);var event=null;if(action==="add"){event="addToCart";}
if(action==="remove"){event="removeFromCart";}
var data={event:event,addLocation:location,products:products,productAction:action};$.ajax({url:me._ROUTE,type:"POST",data:data,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},success:function(response){dataLayer.push(response.data);Logger.log("Analytics :: Tracking Event.","[data]"+JSON.stringify(data));},error:function(err){Logger.warn(err);}});}};criterion.Carousel=function(rootElement){this.rootElement=rootElement;},criterion.Carousel.prototype={init:function(){var carouselSwiper=new Swiper('.swiper-container',{navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev',},pagination:{type:'fraction',el:'.swiper-pagination'},slidesPerView:'auto',spaceBetween:8,slidesOffsetBefore:24,slidesOffsetAfter:24,disabledClass:'pk-carousel__navigation--hidden',breakpoints:{768:{slidesPerView:'auto',spaceBetween:24,slidesOffsetBefore:48,slidesOffsetAfter:48},960:{slidesPerView:'auto',slidesOffsetBefore:64,slidesOffsetAfter:64,spaceBetween:24},1280:{slidesPerView:'auto',slidesOffsetBefore:80,slidesOffsetAfter:80,spaceBetween:24}}});carouselSwiper.init();},}
criterion.CartQuantityLimit=function(rootElement){this.rootElement=rootElement;};criterion.CartQuantityLimit.prototype={init:function(){var limit=(itemQuantityLimit)?itemQuantityLimit:5;this.rootElement.addEventListener('keyup',function(e){if(parseInt(this.value)>parseInt(limit)){alert("Quantities are limited to "+limit+" per item.");this.value=limit;}},true);},}
criterion.ChannelGeo=function(rootElement){this.rootElement=rootElement;this.trigger=rootElement.querySelector('[data-geo-trigger]')
this.list=rootElement.querySelector('[data-geo-list]');this._triggerClickHandler=this._handleTriggerClick.bind(this);this._optionClickHandler=this._handleOptionClick;this._windowClickHandler=this._handleWindowClick.bind(this);}
criterion.ChannelGeo.prototype={init:function(){window.addEventListener('click',this._windowClickHandler);this.trigger.addEventListener('click',this._triggerClickHandler);var optionClickHandler=this._optionClickHandler;this.list.querySelectorAll('[data-geo-option]').forEach(function(option){option.addEventListener('click',optionClickHandler);});},toggleMenu:function(state){var body=document.querySelector('body');var noScrollClass='u-no-scroll';var activeClass='is-active';this.list.classList.toggle(activeClass,state);this.trigger.classList.toggle(activeClass,state);if(this.trigger.classList.contains(activeClass)){body.classList.add(noScrollClass);}else{body.classList.remove(noScrollClass);}},_handleTriggerClick:function(evt){this.toggleMenu();},_handleOptionClick:function(evt){var geoValue=this.getAttribute('data-geo-option');var regex=/geo_availability=([a-zA-Z0-9-_]*)/;var location=document.location.href;if(geoValue){if(regex.test(location)){document.location=location.replace(regex,"geo_availability="+geoValue);}else if(location.indexOf("?")>-1){document.location=location+"&geo_availability="+geoValue;}else{document.location=location+"?geo_availability="+geoValue;}}},_handleWindowClick:function(evt){var target=evt.target;var isWithin=false;while(target&&!isWithin){isWithin=(target==this.trigger)|(target==this.list);target=target.parentNode;}
if(!isWithin){this.toggleMenu(false);}}}
criterion.ClickTracker=function(rootElement){this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);}
criterion.ClickTracker.prototype={init:function(){var rawData=this.rootElement.getAttribute("data-click-tracking");this.options=JSON.parse(rawData);var event=this.options["when"]||"click";this.rootElement.addEventListener(event,this._clickHandler);},_handleClick:function(evt){var json=this.options;if(this.options["when"]=="change"){json["label"]=this.rootElement.checked?1:0;}
var tracking=new criterion.Analytics();tracking.trackEvent(json["category"],json["action"],json["label"]);}}
criterion.CollectionPublicizeToggle=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.PUBLICIZE_COLLECTION_TOGGLE;this._USER_ATTRIBUTE="data-user-id";this.rootElement=rootElement;this._changeHandler=this._handleChange.bind(this);}
criterion.CollectionPublicizeToggle.prototype={init:function(){this.rootElement.addEventListener("change",this._changeHandler);},_queryForAncestor:function(selector){var pointer=this.rootElement;var target=false;while(pointer&&!target){if(pointer.hasAttribute(selector)||(pointer.classList&&pointer.classList.contains(selector))){target=pointer;break;}
pointer=pointer.parentNode;}
return target;},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});},_handleChange:function(evt){var ancestor=this._queryForAncestor(this._USER_ATTRIBUTE);var textStatus=ancestor.querySelector('[data-collection-status-text]');var shareLinks=ancestor.querySelector('[data-collection-sharetools]');if(!ancestor){Logger.warn("CollectionPublicizeToggle :: Failed to locate User ID. Ignoring.");return;}
var userId=ancestor.getAttribute(this._USER_ATTRIBUTE);var isPublic=this.rootElement.checked?1:0;this._xhrRequest(this._ROUTE+"?userId="+userId+"&public="+isPublic);if(textStatus){textStatus.innerHTML=(isPublic)?'public':'private';}
if(shareLinks){shareLinks.classList.toggle('op10');}}}
criterion.Constants={IS_MICROSOFT_BROWSER:bowser.msie||bowser.msedge,INTEGRATED_ROUTES:{SHIPPING_ADDRESS_MODAL_TEMPLATE:"/account/modals/add/address",CREDIT_CARD_MODAL_TEMPLATE:"/account/modals/add/cc",QUICKSHOP_MODAL_TEMPLATE:"/shop/modals/quick-shop",VIDEO_MODAL_TEMPLATE:"/ajax-video-modal.html",COMMENTS_MODAL_TEMPLATE:"/current/modals/comments",EDIT_ACCOUNT_MODAL_TEMPLATE:"/account/modals/edit",WISHLIST_MODAL_TEMPLATE:"/account/modals/add/wishlist",EXPANDED_CART_TEMPLATE:"/shop/modals/cart",ADD_TO_CART:"/api/cart/item/add",GIFT_CERTIFICATE_ROUTE:"/api/cart/gift-certificate/create",ADD_SHIPPING_ADDRESS:"/api/account/add/address",REMOVE_SHIPPING_ADDRESS:"/api/account/remove/address",ADD_CREDIT_CARD:"/api/account/add/cc",REMOVE_CREDIT_CARD:"/api/account/remove/cc",REMOVE_MY_COLLECTION_FILM:"/api/account/remove/my-collection-film",ADD_MY_COLLECTION_FILM:"/api/account/add/my-collection-film",NOTES_MODAL_TEMPLATE:"/api/account/notes/my-collection-film",ADD_NOTE_TO_MY_COLLECTION_FILM:"/api/account/add/note/my-collection-film",SEARCH_AUTOCOMPLETE:"/search/films",SEARCH_ROUTE:"/search",STORE_FILTER_RESULTS:"/api/shop/filtered/total",NEWSLETTER_SIGNUP:"/api/newsletter/subscribe",PUBLICIZE_COLLECTION_TOGGLE:"/api/account/collection/publicize",CHANGE_EMAIL_ROUTE:"/api/account/edit/login",CHANGE_PASSWORD_ROUTE:"/api/account/edit/password",CHANGE_NAME_ROUTE:"/api/account/edit/name",CREATE_WISHLIST:"/api/account/wishlist/create",ADD_TO_WISHLIST:"/api/account/wishlist/add",REMOVE_FROM_WISHLIST:"/api/account/wishlist/remove",TRACK_PRODUCT:"/api/tracking/product"},STATIC_ROUTES:{SHIPPING_ADDRESS_MODAL_TEMPLATE:"/ajax-shipping-modal.html",CREDIT_CARD_MODAL_TEMPLATE:"/ajax-newcard-modal.html",QUICKSHOP_MODAL_TEMPLATE:"/ajax-store-modal.html",VIDEO_MODAL_TEMPLATE:"/ajax-video-modal.html",COMMENTS_MODAL_TEMPLATE:"/ajax-comments-modal.html",EDIT_ACCOUNT_MODAL_TEMPLATE:"/ajax-edit-account-info-modal.html",WISHLIST_MODAL_TEMPLATE:"/ajax-wishlist-modal.html",EXPANDED_CART_TEMPLATE:"/ajax-expanded-cart.html",ADD_TO_CART:"/json/ajax-add-to-cart.json",ADD_SHIPPING_ADDRESS:"/json/ajax-shipping-modal-submission.json",ADD_CREDIT_CARD:"/json/ajax-shipping-modal-submission.json",SEARCH_AUTOCOMPLETE:"/json/ajax-autocomplete.json",STORE_FILTER_RESULTS:"/json/ajax-store-filter-results-found.json",NEWSLETTER_SIGNUP:"/json/ajax-newsletter-signup.json",PUBLICIZE_WISHLIST_TOGGLE:"/json/ajax-publicize-wishlist-toggle.json",CHANGE_EMAIL_ROUTE:"/json/ajax-change-email.json",CHANGE_PASSWORD_ROUTE:"/json/ajax-change-email.json",CREATE_WISHLIST:"/json/ajax-wishlist-create.json",ADD_TO_WISHLIST:"/json/ajax-wishlist-add.json",REMOVE_FROM_WISHLIST:"/json/ajax-wishlist-remove.json"},GET_XSRF_TOKEN:function(){if(criterion.Constants.CRITERON_USE_STATIC_ROUTES){return '';}
var cookies=document.cookie.split(';');var token='';for(var i=0;i<cookies.length;i++){var cookie=cookies[i].split('=');if(cookie[0]=='XSRF-TOKEN'){token=decodeURIComponent(cookie[1]);}}
return token;},SHIPPING_FIELDS:{"firstname":{selector:"#first-name",validates:{presence:{message:"^Please enter your first name."}}},"lastname":{selector:"#last-name",validates:{presence:{message:"^Please enter your last name."}}},"address1":{selector:"#address-1",validates:{presence:{message:"^Please enter your address."}}},"address2":{selector:"#address-2",},"city":{selector:"#city",validates:{presence:{message:"^Please enter your city."}}},"state":{selector:"#state",validates:{presence:{message:"^Please select a state."}}},"zipcode":{selector:"#zip",validates:{presence:{message:"^Please enter your zipcode."}}},"country":{selector:"#country",validates:{presence:{message:"^Please select a country."}}},"phone":{selector:"#phone",},},CREDIT_CARD_FIELDS:{"firstname":{selector:"#first-name",validates:{presence:{message:"^Please enter your first name."}}},"lastname":{selector:"#last-name",validates:{presence:{message:"^Please enter your last name."}}},"address1":{selector:"#address-1",validates:{presence:{message:"^Please enter your address."}}},"address2":{selector:"#address-2",},"city":{selector:"#city",validates:{presence:{message:"^Please enter your city."}}},"state":{selector:"#state",validates:{presence:{message:"^Please select a state."}}},"zipcode":{selector:"#zip",validates:{presence:{message:"^Please enter your zipcode."}}},"country":{selector:"#country",validates:{presence:{message:"^Please select a country."}}}}}
criterion.Constants.ROUTES=(window.CRITERON_USE_STATIC_ROUTES)?criterion.Constants.STATIC_ROUTES:criterion.Constants.INTEGRATED_ROUTES;criterion.CurrentCrossfadeGallery=function(rootElement){this._FADE_DURATION=1000;this._CAROUSEL_AUTOPLAY_DURATION=12000;this._SHOULD_CONTINUE_AUTOPLAY_AFTER_CLICK=false;this._IS_CURRENT_CELL_CLASS="is-current-cell";this._delayedPromise=false;this.rootElement=rootElement;this._windowResizeListener=(device.mobile()||device.tablet())?"orientationchange":"resize";this._windowResizeHandler=this._handleWindowResize.bind(this);this._nextArrowClickHandler=this._handleNextArrowClick.bind(this);this._prevArrowClickHandler=this._handlePrevArrowClick.bind(this);}
criterion.CurrentCrossfadeGallery.prototype={init:function(){if(device.mobile()){this._resetContainerHeight();return;}
Logger.log("CurrentCrossfadeGallery :: Initializing");this._slides=this.rootElement.querySelectorAll('[data-gallery-cell]');this._container=this.rootElement.closest('[data-spotlight-gallery-container]');var me=this;forEach(this._slides,function(idx,slide){slide.addEventListener("transitionend",function(event){if(slide.classList.contains(me._IS_CURRENT_CELL_CLASS)){slide.classList.add('is-content-ready');}},false);});this._currentSlideIndex=0;window.addEventListener(this._windowResizeListener,this._windowResizeHandler);this._initGallery();this._initFirstCell();this._initNav();this._initArrows();this._handleContainerHeight();this._handleWindowResize();},_initNav:function(){this._navItems=this.rootElement.querySelectorAll('[data-role="nav-item"]');var me=this;forEach(this._navItems,function(idx,navItem){var timer=navItem.querySelector('[data-role="circle"]');var length=me._getCircleLength(timer);timer.style.strokeDasharray=length;timer.style.strokeDashoffset=length;navItem.addEventListener("click",function(evt){evt.preventDefault();me._handleNavClick(idx);return false;});});},_initArrows:function(){this._nextArrows=this.rootElement.querySelectorAll('[data-role="next"]');this._prevArrows=this.rootElement.querySelectorAll('[data-role="prev"]');var component=this;this._nextArrows.forEach(function(el){el.addEventListener('click',component._nextArrowClickHandler);});this._prevArrows.forEach(function(el){el.addEventListener('click',component._prevArrowClickHandler);});},_initFirstCell:function(){this._slides[0].classList.add(this._IS_CURRENT_CELL_CLASS);},_handleNextArrowClick:function(evt){evt.preventDefault();evt.stopPropagation();var idx=this._currentSlideIndex+1;if(idx>this._slides.length-1){idx=0;}
this._goToSlide(idx);},_handlePrevArrowClick:function(evt){evt.preventDefault();evt.stopPropagation();var idx=this._currentSlideIndex-1;if(idx<0){idx=this._slides.length-1;}
this._goToSlide(idx);},_update:function(){var me=this;requestAnimationFrame(function(){var now=Date.now();var delta=now-me._timestamp;if(delta>=me._CAROUSEL_AUTOPLAY_DURATION){me._goToNextSlide();}
else{var p=delta/me._CAROUSEL_AUTOPLAY_DURATION;var navItem=me._navItems[me._currentSlideIndex];var timer=navItem.querySelector('[data-role="circle"]');var border=navItem.querySelector('[data-role="border"]');border.classList.add('is-active');var length=me._getCircleLength(timer);timer.style.strokeDashoffset=length-(length*p);}
me._update();});},_handleNavClick:function(idx){if(this._SHOULD_CONTINUE_AUTOPLAY_AFTER_CLICK){var me=this;firstly(function(){return me._goToSlide(idx);}).catch(function(err){console.warn(err);});}
else{this._goToSlide(idx);}},_initGallery:function(){this._timestamp=Date.now();this._update();Logger.log("CurrentCrossfadeGallery :: Starting Gallery");},_goToNextSlide:function(){Logger.log("CurrentCrossfadeGallery :: Animating to the next slide.");var me=this;return new Promise(function(fulfill,reject){me._stopCurrentSlide();me._currentSlideIndex++;if(me._currentSlideIndex>=me._slides.length){me._currentSlideIndex=0;}
me._startCurrentSlide();me._delayedPromise=delay(me._FADE_DURATION);me._delayedPromise.then(function(){fulfill();}).catch(function(err){reject(err);});});},_goToSlide:function(idx){Logger.log("CurrentCrossfadeGallery :: Going to slide at index :: "+idx);if(this._delayedPromise){this._delayedPromise.cancel();}
var me=this;return new Promise(function(fulfill,reject){me._stopCurrentSlide();me._currentSlideIndex=idx;me._startCurrentSlide();me._delayedPromise=delay(me._FADE_DURATION);me._delayedPromise.then(function(){fulfill();}).catch(function(err){reject(err);});});},_stopCurrentSlide:function(){var me=this;var slideElement=this._slides[this._currentSlideIndex];var navItem=this._navItems[this._currentSlideIndex];var timer=navItem.querySelector('[data-role="circle"]');timer.style.strokeDashoffset=timer.style.strokeDasharray;var border=navItem.querySelector('[data-role="border"]');border.classList.remove('is-active');slideElement.style.zIndex=1;slideElement.classList.remove(me._IS_CURRENT_CELL_CLASS);delay(this._FADE_DURATION).then(function(){slideElement.classList.remove('is-content-ready');slideElement.style.zIndex=null;});},_startCurrentSlide:function(){this._timestamp=Date.now();var slideElement=this._slides[this._currentSlideIndex];slideElement.classList.add(this._IS_CURRENT_CELL_CLASS);},_handleWindowResize:function(){if(window.innerWidth<=768){this._resetContainerHeight();return;}
this._handleContainerHeight();},_handleContainerHeight:function(){var padding=48;var tallest=0;if(this._container){this._slides.forEach(function(element){if(element.offsetHeight>tallest){tallest=element.offsetHeight;}});this._container.style.height=tallest+padding+'px';}},_resetContainerHeight:function(){if(this._container){this._container.style.removeProperty('height');}},_getCircleLength:function(el){var length=2*Math.PI*el.getAttribute('r');return length;}}
criterion.EditMyCollectionFilmNoteButton=function(rootElement){this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);};criterion.EditMyCollectionFilmNoteButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var noteArea=this.rootElement.closest('article').querySelector('[data-note-read-only]');this.rootElement.style.display='none';noteArea.style.display='none';var form=this.rootElement.closest('article').querySelector('form');form.style.display='block';}};$(function(){var $fadeContainers=$('[data-fade-in]');var t=setTimeout(function(){$fadeContainers.addClass('is-fade-in--transitioned');},250);});criterion.FancyCrossfadeGallery=function(rootElement){this._FADE_DURATION=1000;this._CAROUSEL_AUTOPLAY_DURATION=7400;this._SHOULD_CONTINUE_AUTOPLAY_AFTER_CLICK=false;this._IS_CURRENT_CELL_CLASS="is-current-cell";this._delayedPromise=false;this.rootElement=rootElement;this._windowResizeListener=(device.mobile()||device.tablet())?"orientationchange":"resize";this._windowResizeHandler=this._handleWindowResize.bind(this);this._nextArrowClickHandler=this._handleNextArrowClick.bind(this);this._prevArrowClickHandler=this._handlePrevArrowClick.bind(this);}
criterion.FancyCrossfadeGallery.prototype={init:function(){if(device.mobile()){return;}
Logger.log("FancyCrossfadeGallery :: Initializing");this._slides=this.rootElement.querySelectorAll(".gallery-cell");var me=this;forEach(this._slides,function(idx,slide){slide.addEventListener("transitionend",function(event){if(slide.classList.contains(me._IS_CURRENT_CELL_CLASS)){slide.classList.add('is-content-ready');}},false);});this._currentSlideIndex=0;window.addEventListener(this._windowResizeListener,this._windowResizeHandler);this._initVideos();this._initGallery();this._initFirstCell();this._initNav();this._initArrows();this._handleWindowResize();},_initNav:function(){this._navItems=this.rootElement.querySelectorAll(".gallery-options__index li");var me=this;forEach(this._navItems,function(idx,navItem){var timer=navItem.querySelector('[data-role="circle"]');var length=me._getCircleLength(timer);timer.style.strokeDasharray=length;timer.style.strokeDashoffset=length;navItem.addEventListener("click",function(evt){evt.preventDefault();me._handleNavClick(idx);return false;});});},_initArrows:function(){this._nextArrow=this.rootElement.querySelector(".arrows .next");this._prevArrow=this.rootElement.querySelector(".arrows .prev");this._nextArrow.addEventListener("click",this._nextArrowClickHandler);this._prevArrow.addEventListener("click",this._prevArrowClickHandler);},_initFirstCell:function(){this._slides[0].classList.add(this._IS_CURRENT_CELL_CLASS);},_handleNextArrowClick:function(evt){evt.preventDefault();evt.stopPropagation();var idx=this._currentSlideIndex+1;if(idx>this._slides.length-1){idx=0;}
this._goToSlide(idx);},_handlePrevArrowClick:function(evt){evt.preventDefault();evt.stopPropagation();var idx=this._currentSlideIndex-1;if(idx<0){idx=this._slides.length-1;}
this._goToSlide(idx);},_update:function(){var me=this;requestAnimationFrame(function(){var now=Date.now();var delta=now-me._timestamp;if(delta>=me._CAROUSEL_AUTOPLAY_DURATION){me._goToNextSlide();}
else{var p=delta/me._CAROUSEL_AUTOPLAY_DURATION;var navItem=me._navItems[me._currentSlideIndex];var timer=navItem.querySelector('[data-role="circle"]');var border=navItem.querySelector('[data-role="border"]');border.classList.add('is-active');var length=me._getCircleLength(timer);timer.style.strokeDashoffset=length-(length*p);}
me._update();});},_handleNavClick:function(idx){if(this._SHOULD_CONTINUE_AUTOPLAY_AFTER_CLICK){var me=this;firstly(function(){return me._goToSlide(idx);}).catch(function(err){console.warn(err);});}
else{this._goToSlide(idx);}},_initVideos:function(){if(device.mobile()||device.tablet()){return;}
Logger.log("FancyCrossfadeGallery :: Checking for any videos to initialize...");var me=this;forEach(this._slides,function(_,item){if(item.classList.contains("gallery-cell-video")){me._initVideo(item.querySelector(".gallery-options__img"));}});Logger.log("FancyCrossfadeGallery :: Done.");},_initVideo:function(el){Logger.log("FancyCrossfadeGallery :: Initializing Video.");var json=JSON.parse(el.getAttribute("data-video-info"));var video=document.createElement("video");video.src=json["mp4"];video.setAttribute("autoplay",false);video.setAttribute("preload","auto");video.setAttribute("muted",true);video.setAttribute("width",320);video.setAttribute("height",240);video.classList.add("gallery-video");el.style.backgroundImage="";el.appendChild(video);},_initGallery:function(){this._timestamp=Date.now();this._update();Logger.log("FancyCrossfadeGallery :: Starting Gallery");},_goToNextSlide:function(){Logger.log("FancyCrossfadeGallery :: Animating to the next slide.");var me=this;return new Promise(function(fulfill,reject){me._stopCurrentSlide();me._currentSlideIndex++;if(me._currentSlideIndex>=me._slides.length){me._currentSlideIndex=0;}
me._startCurrentSlide();me._delayedPromise=delay(me._FADE_DURATION);me._delayedPromise.then(function(){fulfill();}).catch(function(err){reject(err);});});},_goToSlide:function(idx){Logger.log("FancyCrossfadeGallery :: Going to slide at index :: "+idx);if(this._delayedPromise){this._delayedPromise.cancel();}
var me=this;return new Promise(function(fulfill,reject){me._stopCurrentSlide();me._currentSlideIndex=idx;me._startCurrentSlide();me._delayedPromise=delay(me._FADE_DURATION);me._delayedPromise.then(function(){fulfill();}).catch(function(err){reject(err);});});},_stopCurrentSlide:function(){var me=this;var slideElement=this._slides[this._currentSlideIndex];var navItem=this._navItems[this._currentSlideIndex];var timer=navItem.querySelector('[data-role="circle"]');timer.style.strokeDashoffset=timer.style.strokeDasharray;var border=navItem.querySelector('[data-role="border"]');border.classList.remove('is-active');slideElement.style.zIndex=1;delay(this._FADE_DURATION).then(function(){slideElement.classList.remove(me._IS_CURRENT_CELL_CLASS);slideElement.classList.remove('is-content-ready');slideElement.style.zIndex=null;if(slideElement.classList.contains("gallery-cell-video")){slideElement.querySelector("video").pause();}});},_startCurrentSlide:function(){this._timestamp=Date.now();var slideElement=this._slides[this._currentSlideIndex];if(slideElement.classList.contains("gallery-cell-video")){var video=slideElement.querySelector("video");video.currentTime=0;video.play();}
slideElement.classList.add(this._IS_CURRENT_CELL_CLASS);},_handleWindowResize:function(){},_getCircleLength:function(el){var length=2*Math.PI*el.getAttribute('r');return length;}}
criterion.Countdown=function(rootElement){this.rootElement=rootElement;this._loading=true;};criterion.Countdown.prototype={init:function(){var self=this;var standardizedDate=self.standardizeDateString(self.rootElement.getAttribute("data-ending-on"));var countDownDate=new Date(standardizedDate).getTime();var x=setInterval(function(){var now=new Date().getTime();var distance=countDownDate-now;var days=Math.floor(distance/(1000*60*60*24));var hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));var minutes=Math.floor((distance%(1000*60*60))/(1000*60));var seconds=Math.floor((distance%(1000*60))/1000);var timestring=self.padInteger(hours)+
":"+
self.padInteger(minutes)+
":"+
self.padInteger(seconds);if(days>0){timestring=self.padInteger(days)+":"+timestring;}
self.rootElement.innerHTML=timestring;if(self._loading){self.rootElement.className+=" loaded";self._loading=false;self.fixWidthInBanner(2);}
if(distance<0){clearInterval(x);self.rootElement.innerHTML="EXPIRED";}},1000);},padInteger:function(int){return(int<10?"0":"")+int;},fixWidthInBanner:function(padding){var self=this;if(self.rootElement.hasAttribute("data-countdown-banner")){self.rootElement.style.width=self.rootElement.offsetWidth+padding+"px";}},standardizeDateString:function(dateString){return dateString.replace(" ","T").replace("+00","Z");}};criterion.GiftCertificate=function(rootElement){this.rootElement=rootElement;};criterion.GiftCertificate.prototype={init:function(){document.querySelector("#gift-certificate-type").addEventListener("change",this.changeGiftCertificateType);document.querySelector("#gift-certificate-amount").addEventListener("change",this.changeGiftCertificateAmount);},changeGiftCertificateAmount:function(){productSlug=document.querySelector("#gift-certificate-amount").value;productUrl='/shop/product/'+productSlug;if(confirm("Making this change will reset the form. Are you sure?")){window.location=productUrl;}else{document.querySelector("#gift-certificate-amount").value='';}},changeGiftCertificateType:function(){productSlug=document.querySelector("#gift-certificate-type").value;productUrl='/shop/product/'+productSlug;if(confirm("Making this change will reset the form. Are you sure?")){window.location=productUrl;}else{document.querySelector("#gift-certificate-type").value='';}}};criterion.GlobalCart=function(rootElement,cartIconElement){this._ROUTE=criterion.Constants.ROUTES.EXPANDED_CART_TEMPLATE;this._ANIMATE_IN_ON_RELOAD=true;this.rootElement=rootElement;this.cartIconElement=cartIconElement;this._isIn=false;this._windowScrollListener="scroll";this._windowScrollHandler=this._handleWindowScroll.bind(this);this._windowClickHandler=this._handleWindowClick.bind(this);this._cartIconClickHandler=this._handleCartIconClick.bind(this);}
criterion.GlobalCart.prototype={init:function(){if(document.querySelector('.criterion-channel')){return;}
this.cartIconElement.addEventListener("click",this._cartIconClickHandler);if(!device.mobile()){window.addEventListener(this._windowScrollListener,this._windowScrollHandler);}},closePanels:function(){if($('body').hasClass('is-nav-in')){if(criterion.globalNav){criterion.globalNav.animateOut();}}
if(criterion.navDropdowns){forEach(criterion.navDropdowns,function(_,dropdown){dropdown.animateOut();});}},animateIn:function(){this.closePanels();this.rootElement.classList.add("in");document.body.classList.add("is-expanded-panel-in");var me=this;delay(50).then(function(){me.rootElement.classList.add("is-in");});this._isIn=true;window.addEventListener("click",this._windowClickHandler);},animateOut:function(cb){this._isIn=false;this.rootElement.classList.remove("is-in");document.body.classList.remove("is-expanded-panel-in");var me=this;delay(250).then(function(){me.rootElement.classList.remove("in");cb();});},toggle:function(){if(this._isIn){this.animateOut();}
else{var segmentTracker=new criterion.SegmentAnalytics();var eventName='Cart Viewed';var eventData=JSON.parse(this.rootElement.getAttribute('data-segment-event-data'));var trackingData={event:eventName,data:eventData}
this.animateIn();}},_handleCartIconClick:function(evt){evt.preventDefault();evt.stopPropagation();this.toggle();return;},_handleWindowClick:function(evt){var target=evt.target;var isWithin=false;while(target&&!isWithin){isWithin=(target==this._clickContainer);target=target.parentNode;}
if(!isWithin){this.animateOut();}},update:function(){var me=this;firstly(function(){return me._xhrRequest(me._ROUTE);}).then(function(htmlString){return me._createDOMElement(htmlString);}).then(function(domElement){return me._appendDOMElement(domElement);}).then(function(){var count=parseInt(me.rootElement.querySelector('.item-count').textContent,10);var status=count>0?'on':'off';me._setCartIconStatus(status);if(me._ANIMATE_IN_ON_RELOAD){return me.animateIn();}
return Promise.resolve();}).catch(function(err){Logger.warn(err);});},_setCartIconStatus:function(status){if(status!="on"&&status!="off"){Logger.error("Cannot change cart icon status to :: "+status);return;}
this.cartIconElement.classList.remove("is-status-on");this.cartIconElement.classList.remove("is-status-off");this.cartIconElement.classList.add("is-status-"+status);},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var htmlString=evt.currentTarget.responseText;resolve(htmlString);}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});},_createDOMElement:function(htmlString){var div=document.createElement("div");div.classList.add("is-ajax");div.innerHTML=htmlString;return Promise.resolve(div);},_appendDOMElement:function(domElement){while(this.rootElement.firstChild){this.rootElement.removeChild(this.rootElement.firstChild);}
while(domElement.firstChild){var child=domElement.firstChild;domElement.removeChild(child);this.rootElement.appendChild(child);}
return Promise.resolve();},_handleWindowScroll:function(evt){if(this._isTicking){return;}
this._isTicking=true;var me=this;if(criterion.Constants.IS_MICROSOFT_BROWSER){setTimeout(function(){me._scrollUpdated();me._isTicking=false;},100);}
else{requestAnimationFrame(function(){me._scrollUpdated();me._isTicking=false;});}},_scrollUpdated:function(){}}
criterion.GlobalNav=function(rootElement,navIconElement,pageContentElement){this.rootElement=rootElement;this.navIconElement=navIconElement;this.pageContentElement=pageContentElement;this._navIconClickHandler=this._handleNavIconClick.bind(this);this._windowClickHandler=this._handleWindowClick.bind(this);this._isIn=false;}
criterion.GlobalNav.prototype={init:function(){this.navIconElement.addEventListener("click",this._navIconClickHandler);this._clickContainer=this.rootElement.querySelector("[data-global-nav-click-container]");},closePanels:function(){if(criterion.globalCart){criterion.globalCart.animateOut();}
if(criterion.navDropdowns){forEach(criterion.navDropdowns,function(_,dropdown){dropdown.animateOut();});}},lockBody:function(navState){navState=navState||'out';var position=navState==='in'?'fixed':'static'
var overflowY=navState==='in'?'scroll':'auto'
if(!$('body').hasClass('page__home')){this.pageContentElement.style.position=position;this.pageContentElement.style.overflowY=overflowY;}},animateIn:function(){this.lockBody('in');this._scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;this.rootElement.classList.add("in");document.body.classList.add("is-nav-in");this.dispatchEvent({type:"in"});this.closePanels();var me=this;delay(50).then(function(){me.rootElement.classList.add("is-in");});window.addEventListener("click",this._windowClickHandler);},animateOut:function(){this.lockBody('out');var pageContainer=document.querySelector(".page-contain");prefix(pageContainer,"transform","");this.rootElement.classList.remove("is-in");document.body.classList.remove("is-nav-in");var me=this;delay(500).then(function(){me.rootElement.classList.remove("in");});window.scrollTo(0,this._scrollTop);window.removeEventListener("click",this._windowClickHandler);this.dispatchEvent({type:"out"});},_initPosterImage:function(){var me=this;firstly(function(){return me._loadPosterImage();}).then(function(image){return me._animatePosterImageIn(image);}).catch(function(err){Logger.warn(err);});},_loadPosterImage:function(){var me=this;return new Promise(function(fulfill,reject){var element=me.rootElement.querySelector("[data-poster-image-path]");var path=element.getAttribute("data-poster-image-path");var image=new Image();image.onload=function(){fulfill(this);}
image.onerror=function(){reject(new Error("Failed to load poster image"));}
image.oncancel=function(){reject(new Error("Failed to load poster image"));}
image.src=path;});},_animatePosterImageIn:function(img){var container=this.rootElement.querySelector(".is-poster-image-container");container.appendChild(img);delay(50).then(function(){img.classList.add("is-in");});return Promise.resolve();},_handleNavIconClick:function(evt){evt.preventDefault();evt.stopPropagation();this.animateIn();return;},_handleWindowClick:function(evt){var target=evt.target;var isWithin=false;while(target&&!isWithin){isWithin=(target==this._clickContainer);target=target.parentNode;}
if(!isWithin){this.animateOut();}}}
Object.assign(criterion.GlobalNav.prototype,EventDispatcher.prototype);criterion.GlobalSearch=function(rootElement,searchIconElement){this.rootElement=rootElement;}
criterion.GlobalSearch.prototype={init:function(){this._userInput=this.rootElement.querySelector("[data-global-search-user-input]");this._swiftypeInput=this.rootElement.querySelector("[data-global-search-swiftype-input]");this._inputChangeHandler=this._handleInputChange.bind(this);this._userInput.addEventListener('keyup',this._inputChangeHandler);this._searchContainer=this.rootElement.querySelector("[data-global-search-container]");this._searchFooter=this.rootElement.querySelector("[data-global-search-footer]");this._searchLoadMore=this.rootElement.querySelector("[data-global-search-load-more]");this._autocompleteCounter=this.rootElement.querySelector("[data-global-search-result-autocomplete-count]");this._autocompleteHeader=this.rootElement.querySelector("[data-global-search-result-autocomplete-header]");this._resultCounter=this.rootElement.querySelector("[data-global-search-result-count]");this._resultHeader=this.rootElement.querySelector("[data-global-search-result-header]");this._swiftype={input:$(this._input)}
$(this._swiftypeInput).swiftype({engineKey:'47z2a8Ae-x_co8MUSgoe',filters:{'page':{'type':['Film','Box Set']}},searchFields:{'page':['title','director']},autocompleteContainingElement:"[data-global-search-autocomplete-results]",attachTo:"[data-global-search-autocomplete-results]",resultLimit:100,typingDelay:500,disableAutocomplete:false,dropdownStylesFunction:function(){return{};},onComplete:function(item,prefix){var segmentTracker=new criterion.SegmentAnalytics();segmentTracker.track({event:'Products Searched',data:{'query':prefix}});window.location=item['url'];},renderFunction:function(document_type,item){return '<div class="global-search__autocomplete">'+
'<h4 class="global-search__autocomplete-heading">'+
'<a href="'+item['url']+'" class="global-search__autocomplete-link">'+item['title']+'</a>'+
'</h4>'+
'<p class="global-search__autocomplete-subheading">'+item['meta']+'</p>'+
'</div>';}});$(this.rootElement).swiftypeSearch({resultContainingElement:'[data-search-results-all-films-container]',filters:{'page':{'type':['Film','Box Set']}},engineKey:'47z2a8Ae-x_co8MUSgoe',perPage:100,renderFunction:function(document_type,item){var thumbnailTemplate=function(item){return '<img class="global-search__result-image" src="'+item['image']+'" alt="'+item['title']+'" />';}
if(item['directors_display']==null){var director='';}else{var director=item['directors_display'];}
return '<div class="global-search__all-films-result" data-search-results-film-item>'+
'<a class="global-search__film-result-link" href="'+item['url']+'">'+
thumbnailTemplate(item)+
'<figcaption class="global-search__result-caption">'+
'<span class="global-search__result-title">'+item['title']+'</span>'+
'<span class="global-search__result-director">'+director+'</span>'+
'</figcaption>'+
'</a>'+
'</div>';},renderPaginationForType:function(type,currentPage,totalPages){return false;},postRenderFunction:function(data){var searchTerm=$.hashParams().stq;var searchURL="/search#stq="+encodeURI(searchTerm);var $searchTermHeader=$('[data-search-term]');var $searchTermLink=$('[data-back-to-search-link]');$searchTermHeader.text(searchTerm);$searchTermLink.attr('href',searchURL);}});$(this.rootElement).swiftypeSearch({resultContainingElement:'[data-search-results-film-container]',filters:{'page':{'type':['Film','Box Set']}},engineKey:'47z2a8Ae-x_co8MUSgoe',perPage:7,renderFunction:function(document_type,item){if($.hashParams().stp==null||$.hashParams().stp==1){$('[data-search-results-film-container]').show();$('[data-film-results-container]').show();$('[data-search-results-all-films-link]').show();}else{$('[data-search-results-film-container]').hide();$('[data-film-results-container]').hide();$('[data-search-results-all-films-link]').hide();}
var thumbnailTemplate=function(item){return '<img class="global-search__result-image" src="'+item['image']+'" alt="'+item['title']+'" />';}
var director=item['directors_display']?item['directors_display']:'';return '<div class="global-search__film-result" data-search-results-film-item>'+
'<a class="global-search__film-result-link" href="'+item['url']+'">'+
thumbnailTemplate(item)+
'<figcaption class="global-search__result-caption">'+
'<span class="global-search__result-title">'+item['title']+'</span>'+
'<span class="global-search__result-director">'+director+'</span>'+
'</figcaption>'+
'</a>'+
'</div>';},renderPaginationForType:function(type,currentPage,totalPages){var pagesTemplate='<div style="display: none;" class="global-search__pages">';return pagesTemplate;},postRenderFunction:function(data){var $filmResultsContainer=$('[data-search-results-film-container]');var $filmResultsCountContainer=$('[data-film-results-container]');var $filmResultsCount=$('[data-film-results-count]');var $filmResultsLabel=$('[data-film-results-label]');var $otherResultsLabel=$('[data-search-results-other-label]');var $viewAllFilmsLink=$('[data-view-all-films-link]');var $searchTerm="/search/films#stq="+encodeURI($.hashParams().stq);var totalResults=data.info.page.total_result_count;if(totalResults<=100){$filmResultsCount.text('('+totalResults+')')}else if(totalResults){$filmResultsCount.text('(100)')}else{$filmResultsCount.text('No films found')
$filmResultsLabel.text('');}
var $arrow='<svg class="global-search__see-all-films-svg" viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg">'+
'<g stroke-width="2" fill="none" fill-rule="evenodd">'+
'<path d="M9.143 15L16 8.077 9.143 1.286" />'+
'<path d="M14.971 8.143H1.257" stroke-linecap="square" />'+
'</g>'+
'</svg>';if(totalResults>2&&totalResults<7){$viewAllFilmsLink.attr("href",$searchTerm);$viewAllFilmsLink.addClass('pk-flex-mobile-and-smaller-only');}else if(totalResults>7){$viewAllFilmsLink.show();$viewAllFilmsLink.attr("href",$searchTerm);}else if(totalResults==0){$filmResultsContainer.css({'display':'none'});$filmResultsCountContainer.css({'display':'none'});}}});$(this.rootElement).swiftypeSearch({resultContainingElement:'[data-search-results-channel-container]',filters:{'page':{'type':['Channel']}},engineKey:'47z2a8Ae-x_co8MUSgoe',perPage:5,renderFunction:function(document_type,item){if($.hashParams().stp==null||$.hashParams().stp==1){$('[data-search-results-channel-container]').show();$('[data-film-results-container]').show();$('[data-search-results-all-films-link]').show();}else{$('[data-search-results-channel-container]').hide();$('[data-film-results-container]').hide();$('[data-search-results-all-films-link]').hide();}
var filmShortname=item['url'].split('/')[4];this.getVimeoImage(filmShortname);$image='/assets/img/png/filmcardplaceholder.png';var thumbnailTemplate=function(item){return '<img class="global-search__result-image global-search__result-channel-image" data-film-shortname="'+filmShortname+'" src="'+$image+'" alt="'+item['title']+'" />';}
var title=item['title'];title=title.replace('- The Criterion Channel','');return '<div class="global-search__channel-result" data-search-results-film-item>'+
'<a class="global-search__channel-result-link" href="'+item['url']+'?utm_source=criterion.com&utm_medium=referral&utm_campaign=search-redirect&utm_content=results">'+
thumbnailTemplate(item)+
'<figcaption class="global-search__result-caption">'+
'<span class="global-search__result-title">'+title+'</span>'+
'</figcaption>'+
'</a>'+
'</div>';},renderPaginationForType:function(type,currentPage,totalPages){var pagesTemplate='<div style="display: none;" class="global-search__pages">';return pagesTemplate;},postRenderFunction:function(data){var $channelResultsContainer=$('[data-channel-results-container]');var $searchTerm="/search/films#stq="+encodeURI($.hashParams().stq);var totalResults=data.info.page.total_result_count;var $arrow='<svg class="global-search__see-all-films-svg" viewBox="0 0 18 16" xmlns="http://www.w3.org/2000/svg">'+
'<g stroke-width="2" fill="none" fill-rule="evenodd">'+
'<path d="M9.143 15L16 8.077 9.143 1.286" />'+
'<path d="M14.971 8.143H1.257" stroke-linecap="square" />'+
'</g>'+
'</svg>'
var $allFilmsLink='<div class="global-search__film-result" data-search-results-film-item data-search-results-all-films-link>'+
'<a href="'+$searchTerm+'" class="global-search__see-all-films">'+
'<div class="global-search__see-all-films-inner">'+
'<div class="global-search__see-all-films-arrow">'+
$arrow+
'</div>'+
'<p class="global-search__see-all-films-text">'+
'See All Films'+
'</p>'+
'</div>'+
'</a>'+
'</div>';if(totalResults==0){$channelResultsContainer.css({'display':'none'});}},getVimeoImage:function(filmShortname){var url='/api/v1/channel/filmcard?video='+filmShortname;$.ajax({url:url,type:'GET',headers:{'CRITERION-API-KEY':'CleoFrom5to7-DoTheRightThing-8andAhalf-W3sAnd3rs0n','contentType':'application/json',},success:function(data,status,xhr){$('[data-film-shortname='+filmShortname+']').attr('src',data.data.thumbnail);return data.data.thumbnail;},error:function(data,status,xhr){return status;},});}});$(this.rootElement).swiftypeSearch({resultContainingElement:'[data-search-results-other-container]',engineKey:'47z2a8Ae-x_co8MUSgoe',filters:{'page':{'type':['!Film','!Box Set','!Channel']}},perPage:10,renderFunction:function(document_type,item){var thumbnailTemplate=function(item){if(item['type']=='Film'||item['type']=='Box Set'){return '<img class="global-search__result-image" src="'+item['image']+'" alt="'+item['title']+'" />';}else{return '';}}
var metaTemplate=function(item){if(item['type']){return '<p class="global-search__result-subheading">'+item['meta']+'</p>';}else{return '';}}
var truncatedDescription=function(item,n){if(item['type']=="Author"&&item['author_bio_text']){var description=item['author_bio_text'];description=description.replace(/<p[^>]*>/,'');description=description.replace('</p>','');}else if(item['type']=="Author"){var description="";}else{var description="";var description=item['description'];}
if(!description||description.length<=n){return description;}
var subString=description.substr(0,n-1);return subString.substr(0,subString.lastIndexOf(' '))+"&hellip;";}
var publishedAt=function(item){var description="";var description=item['description'].replace(/^\s+|\s+$/g,'');if(item['type']=='Post'&&description.length!==0){var date=new Date(item['published_at']);var options={month:'short',day:'numeric',year:'numeric'};return date.toLocaleDateString('en-US',options)+' &mdash; ';}else{return '';}}
var byline=function(item){if(item['author']){return '<div class="global-search__result-byline"><p class="pk-o-copy-author pk-o-copy-author--lg">By&nbsp;'+
item['author']+
'</p></div>';}else{return '';}}
return '<div class="global-search__result">'+
thumbnailTemplate(item)+
'<div class="global-search__result-content">'+
'<div class="global-search__result-header">'+
'<h3 class="global-search__result-heading">'+
'<a href="'+item['url']+'">'+item['title']+'</a>'+
'</h3>'+
metaTemplate(item)+
'</div>'+
byline(item)+
'<p class="global-search__result-copy"><span class="global-search__result-copy-date">'+publishedAt(item)+"</span>"+truncatedDescription(item,300)+'</p>'+
'<div class="global-search__result-link">'+
'<a href="'+item['url']+'">View '+item['type']+'</a>'+
'</div>'+
'</div>'+
'</div>';},renderPaginationForType:function(type,currentPage,totalPages){var pagesTemplate='<div class="global-search__pages">';var previousTemplate=function(page){return '<div class="global-search__pages-prev">'+
'<a href="#" data-hash="true" data-page="'+page+'">'+
'<span class="vh">Prev</span>'+
'<svg viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M20.59961,10 L3.81445,10 L11.707,2.10693 C11.9622537,1.85487952 12.0629256,1.48540534 11.9708151,1.1387073 C11.8787045,0.792009252 11.607928,0.521221298 11.2612339,0.429096022 C10.9145398,0.336970745 10.5450613,0.437627004 10.293,0.69287 L0.69409,10.2923 C0.304586135,10.6837093 0.304586135,11.3162907 0.69409,11.7077 L10.293,21.30664 C10.6841917,21.6929226 11.313858,21.690928 11.7025947,21.3021749 C12.0913314,20.9134217 12.0932992,20.2837553 11.707,19.89258 L3.81445,12 L20.59961,12 C21.1518947,12 21.59961,11.5522847 21.59961,11 C21.59961,10.4477153 21.1518947,10 20.59961,10 Z" fill-rule="evenodd"/></svg>'+
'</a>'+
'</div>';}
var nextTemplate=function(page){return '<div class="global-search__pages-next">'+
'<a href="#" data-hash="true" data-page="'+page+'">'+
'<span class="vh">Next</span>'+
'<svg viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg"><path d="M20.59961,10 L3.81445,10 L11.707,2.10693 C11.9622537,1.85487952 12.0629256,1.48540534 11.9708151,1.1387073 C11.8787045,0.792009252 11.607928,0.521221298 11.2612339,0.429096022 C10.9145398,0.336970745 10.5450613,0.437627004 10.293,0.69287 L0.69409,10.2923 C0.304586135,10.6837093 0.304586135,11.3162907 0.69409,11.7077 L10.293,21.30664 C10.6841917,21.6929226 11.313858,21.690928 11.7025947,21.3021749 C12.0913314,20.9134217 12.0932992,20.2837553 11.707,19.89258 L3.81445,12 L20.59961,12 C21.1518947,12 21.59961,11.5522847 21.59961,11 C21.59961,10.4477153 21.1518947,10 20.59961,10 Z" transform="rotate(-180 11 11)" fill-rule="evenodd" /></svg>'+
'</a>'+
'</div>';}
if(currentPage!=1){pagesTemplate+=previousTemplate(currentPage-1);}
pagesTemplate+='<form class="global-search__pages-current" action="/search">'+
'<label for="page" class="vh">Current Page</label>'+
'<input type="hidden" name="stq" value="'+$.hashParams().stq+'">'+
'<input class="global-search__pages-input" name="stp" type="text" value="'+currentPage+'" size="2">'+
'</form>'+
'<div> <span class="global-search__pages-text">of</span> <span class="global-search__pages-total">'+totalPages+'</span></div>';if(currentPage<totalPages){pagesTemplate+=nextTemplate(currentPage+1);}
pagesTemplate+='</div>';return pagesTemplate;},postRenderFunction:function(data){var totalResultCount=0;var query='';var $resultContainer=this.getContext().resultContainer;var spellingSuggestion=null;if(data['info']){if(data.info.page.current_page==1){var segmentTracker=new criterion.SegmentAnalytics();segmentTracker.track({event:'Products Searched',data:{'query':data.info.page.query}});}
$.each(data['info'],function(index,value){totalResultCount+=value['total_result_count'];if(value['spelling_suggestion']){spellingSuggestion=value['spelling_suggestion']['text'];}
if(value['query']){query=value['query'];}});}
$('[data-search-results-count]').text(totalResultCount);$('[data-search-input]').val(query);if(totalResultCount===0){$resultContainer.html("<div id='st-no-results' class='st-no-results'>No results found.</div>");}
if(spellingSuggestion!==null){$resultContainer.append('<div class="st-spelling-suggestion">Did you mean <a href="#" data-hash="true" data-spelling-suggestion="'+spellingSuggestion+'">'+spellingSuggestion+'</a>?</div>');}}});$(window).hashchange(function(evt){window.scrollTo(0,this._scrollTop);});},_handleInputChange:function(evt){var value=this._userInput.value.toLowerCase();var regex=/(m|z|\d)/;var isException=regex.test(value.substring(0,1));if(!value||value.length>2||isException){this._swiftypeInput.value=value;$(this._swiftypeInput).keyup();}}}
Object.assign(criterion.GlobalSearch.prototype,EventDispatcher.prototype);criterion.Home=function(rootElement){this._DELTA_THRESHOLD=25;this.rootElement=rootElement;this._windowScrollListener="wheel";this._windowResizeListener=(device.mobile()||device.tablet())?"orientationchange":"resize";this._dotClickHandler=this._handleDotClick.bind(this);this._$window=$(window);this._scrollHandler();this._scrollify();this._windowResizeHandler=this._handleWindowResize.bind(this);this._currentItemIndex=0;this._isAnimationInProgress=false;this._isMobileBackground=false;this._isBackgroundsInit=false;}
criterion.Home.prototype={init:function(){Logger.log("Home :: Init!");this._header=document.querySelector(".headerSite");this._items=this.rootElement.querySelectorAll(".home-article");this._dots=[];this._dotsContainer=this.rootElement.querySelector(".home-pagination-dots-container");var me=this;forEach(this._items,function(idx,item){var dot=document.createElement("div");dot.classList.add("dot");dot.addEventListener("click",me._dotClickHandler);me._dotsContainer.appendChild(dot);me._dots.push(dot);var a=item.querySelector("a");a.setAttribute("data-index",idx);});this._updateCurrentDot();window.addEventListener(this._windowScrollListener,this._windowScrollHandler);this._scrollHandler();window.addEventListener(this._windowResizeListener,this._windowResizeHandler);var tracking=new criterion.Analytics();tracking.trackEvent("Home","scroll",this._items[this._currentItemIndex].querySelector("a").getAttribute("href"),this._currentItemIndex);this._handleWindowResize();},_updateCurrentDot:function(){forEach(this._dots,function(idx,dot){dot.classList.remove("is-active");});this._dots[this._currentItemIndex].classList.add("is-active");return Promise.resolve();},_handleDotClick:function(evt){evt.preventDefault();evt.stopPropagation();var me=this;var idx=this._dots.indexOf(evt.target);$.scrollify.move(idx);this._updateCurrentDot();return false;},_animateToItemAtIndex:function(idx){$.scrollify.move(idx);},_scrollify:function(){var my=this;$.scrollify({section:"[data-scrollify]",sectionName:"section-name",interstitialSection:"",easing:"easeOutSine",scrollSpeed:650,offset:0,scrollbars:true,standardScrollElements:".sidebar",setHeights:false,overflowScroll:false,updateHash:false,touchScroll:true,before:function(index,sections){},after:function(index,sections){var limit=sections.length-2;if(index>=limit){$.scrollify.setOptions({overflowScroll:true});}else{$.scrollify.setOptions({overflowScroll:false});}},afterResize:function(){},afterRender:function(){}});},_scrollHandler:function(){var me=this;me._$window.scroll(function(e){me._handleWindowScroll.call(me,e);})},_updateBackgrounds:function(){Logger.log("Home :: Update Backgrounds.");var attribute=this._isMobile?"data-mobile-background-image":"data-background-image";var elements=this.rootElement.querySelectorAll("["+attribute+"]");var me=this;forEach(elements,function(_,element){var path=element.getAttribute(attribute);element.classList.add("loading");me._loadImage(path).then(function(image){element.style.backgroundImage="url("+image.src+")";element.classList.remove("loading");}).catch(function(err){Logger.warn(err);});if(element.hasAttribute("data-tout-video-info")){me._initVideoBackground(element);}})},_loadImage:function(path){return new Promise(function(fulfill,reject){var image=new Image();image.onload=function(){fulfill(this);}
image.oncancel=function(){reject(new Error("Home :: Image Failed to load ::"+path));}
image.onerror=function(e){console.log(e);reject(new Error("Home :: Image Failed to load ::"+path));}
image.src=path;});},_initVideoBackground:function(el){var json=JSON.parse(el.getAttribute("data-tout-video-info"));var video=document.createElement("video");if(json['webm']&&video.canPlayType("video/webm")){video.src=json["webm"];}
else{video.src=json["mp4"];}
var div=document.createElement("div");div.classList.add("is-home-background-video-container");video.classList.add("home-background-video");video.muted=true;div.appendChild(video);if(json["playOnHover"]===true){video.pause();el.parentNode.addEventListener("mouseover",function(){video.play();});el.parentNode.addEventListener("mouseout",function(){video.pause();});}
el.style.backgroundImage="";el.insertBefore(div,el.firstChild);},_handleWindowResize:function(){var wasMobileBackground=this._isMobileBackground;this._isMobile=window.innerWidth<1024;this._isMobileBackground=window.innerWidth<768;if(this._isMobile){document.documentElement.style.overflow="";}
var itemRects=[];forEach(this._items,function(_,item){var rect=getDimensionsForElement(item);itemRects.push(rect);});this._itemsRects=itemRects;this._handleWindowScroll();if(wasMobileBackground!=this._isMobileBackground||!this._isBackgroundsInit){this._isBackgroundsInit=true;this._updateBackgrounds();}},_handleWindowScroll:function(evt){if(this._isTicking||this._isMobile){}
this._isTicking=true;var me=this;if(criterion.Constants.IS_MICROSOFT_BROWSER){setTimeout(function(){me._scrollUpdated(evt);me._isTicking=false;},100);}
else{requestAnimationFrame(function(){me._scrollUpdated(evt);me._isTicking=false;});}},_scrollUpdated:function(evt){var me=this;var y=scrollY();var vh=viewportHeight();var currentItem=0;forEach(this._items,function(idx,item){var rect=me._itemsRects[idx];var top=(rect.top-50)-y;var bottom=(rect.bottom+50)-y;var height=rect.height;if(top<=vh&&bottom>=0){var min=vh-top;var max=vh+height;var p=min/max;me._positionLayers(item,idx,p);if(p>0.25){currentItem=idx;}}else if(top<=vh){me._positionLayers(item,idx,1);}else if(bottom>=0){me._positionLayers(item,idx,0);}});this._currentItemIndex=currentItem;var currentItem=this._items[currentItem];if(currentItem.classList.contains("dark")){this._header.classList.remove("dark");this._header.classList.add("light");this._dotsContainer.classList.remove("dark");this._dotsContainer.classList.add("light");}
else{this._header.classList.remove("light");this._header.classList.add("dark");this._dotsContainer.classList.remove("light");this._dotsContainer.classList.add("dark");}
this._updateCurrentDot();},_positionLayers:function(item,idx,p){var parallaxLevels=item.querySelectorAll("[data-parallax-level]");var bottomY=75;var topY=-75;forEach(parallaxLevels,function(_,parallaxLevel){var level=parseFloat(parallaxLevel.getAttribute("data-parallax-level"));var y=linearMap(p,0,1,bottomY,topY)*level;if(!$('body').hasClass('is-nav-in')){prefix(parallaxLevel,"transform","translate3d(0,"+y+"px,0)");}});}}
criterion.InventoryStatusUpdater=function(rootElement){this.rootElement=rootElement;this._purchaseOptionChangeHandler=this._handlePurchaseOptionChange.bind(this);}
criterion.InventoryStatusUpdater.prototype={init:function(){this._options=JSON.parse(this.rootElement.getAttribute("data-inventory-status-updater"));this._statusElement=document.querySelector(this._options.target);this._button=document.querySelector("[data-add-to-cart-submit]");this._addToMyCollection=document.querySelector("[data-add-to-my-collection]");if(this._addToMyCollection){this._addToMyCollectionButton=this._addToMyCollection.querySelector("button");}
this._inMyCollectionStatus=document.querySelector("[data-in-my-collection-status]");this.rootElement.addEventListener(this._options.event,this._purchaseOptionChangeHandler);this._checkMyCollectionStatus();this._setInitialPurchaseOptionStatus();},_handlePurchaseOptionChange:function(evt){var target;if(this._options.event==="click"){target=evt.target;}
else{target=this.rootElement.querySelector("[value=\""+this.rootElement.value+"\"]");}
if(target&&target.hasAttribute("data-inventory")){var json=JSON.parse(target.getAttribute("data-inventory"));this._statusElement.classList.remove('preorder');this._statusElement.classList.remove('out-of-stock');this._statusElement.classList.remove('preorderText');this._statusElement.classList.remove('new-release');if(json["status"]=="out-of-stock"){this._statusElement.classList.add("out-of-stock");this._statusElement.classList.add('preorderText');this._statusElement.innerText=json["available"];this._button.innerText=json["button_text"];}else if(json["status"]=="preorder"){this._statusElement.classList.add("preorder");this._statusElement.classList.add('preorderText');this._statusElement.innerText=json["available"];this._button.innerText=json["button_text"];}else if(json["new_release"]){this._statusElement.innerText="New Release";this._statusElement.classList.add('new-release');this._statusElement.classList.add('preorderText');this._button.innerText="Add to Cart";}else if(json['status']=="in-stock"){this._statusElement.classList.add('preorderText');this._statusElement.classList.add('new-release');this._statusElement.innerText="Now Available";if(json["button_text"]!=null){this._button.innerText=json["button_text"];}else{this._button.innerText="Add to Cart";}}}
this._toggleMyCollectionStatus(target);this._addReleaseIdToAddToMyCollectionButton(target);},_setInitialPurchaseOptionStatus:function(){var target;if(this.rootElement.checked){target=this.rootElement;}
if(target){if(target.hasAttribute("data-inventory")){var json=JSON.parse(target.getAttribute("data-inventory"));if(json["status"]=="out-of-stock"){this._statusElement.classList.add("out-of-stock");this._statusElement.classList.add('preorderText');this._statusElement.innerText=json["available"];this._button.innerText=json["button_text"];}else if(json["status"]=="preorder"){this._statusElement.classList.add("preorder");this._statusElement.classList.add('preorderText');this._statusElement.innerText=json["available"];this._button.innerText=json["button_text"];}else if(json["new_release"]){this._statusElement.innerText="New Release";this._statusElement.classList.add('new-release');this._statusElement.classList.add('preorderText');this._button.innerText="Add to Cart";}else if(json['status']=="in-stock"){this._statusElement.classList.add('preorderText');this._statusElement.classList.add('new-release');this._statusElement.innerText="Now Available";if(json["button_text"]!=null){this._button.innerText=json["button_text"];}else{this._button.innerText="Add to Cart";}}}}},_checkMyCollectionStatus:function(){var inputButton=document.querySelector("[data-collection-info]");if(inputButton){this._toggleMyCollectionStatus(inputButton);this._addReleaseIdToAddToMyCollectionButton(inputButton);}},_toggleMyCollectionStatus:function(domElement){if(this._addToMyCollection&&this._inMyCollectionStatus){if(domElement.hasAttribute("data-in-my-collection")){this._addToMyCollection.style.display='none';this._inMyCollectionStatus.style.display='flex';}else{this._addToMyCollection.style.display='block';this._inMyCollectionStatus.style.display='none';}}},_addReleaseIdToAddToMyCollectionButton:function(domElement){if(domElement){var releaseId=domElement.getAttribute("data-release-id");if(this._addToMyCollectionButton){this._addToMyCollectionButton.setAttribute('data-add-release-id',releaseId);}}}}
criterion.LineClampedText=function(rootElement){this.rootElement=rootElement;this._windowResizeListener=device.mobile()||device.tablet()?"orientationchange":"resize";this._windowResizeHandler=this._handleWindowResize.bind(this);}
criterion.LineClampedText.prototype={init:function(){this.options=JSON.parse(this.rootElement.getAttribute("data-clamp-lines"));this._clonedElement=this.rootElement.cloneNode(true);this._clonedElement.removeAttribute("data-clamp-lines");this._clonedElement.classList.add("is-clamped-line-clone");this.rootElement.parentNode.insertBefore(this._clonedElement,this.rootElement);var lines=this.options["lines"]?this.options["lines"]:"auto";$clamp(this._clonedElement,{clamp:lines});window.addEventListener(this._windowResizeListener,this._windowResizeHandler);this._handleWindowResize();},_handleWindowResize:function(){var vw=viewportWidth();if(vw<this.options["disable_at"]||device.mobile()){this.rootElement.style.visibility="collapse";this.rootElement.style.margin=0;this.rootElement.style.height=0;this._clonedElement.style.visibility="visible";this._clonedElement.style.removeProperty('margin');this._clonedElement.style.height="auto";}else{this._clonedElement.style.visibility="collapse";this._clonedElement.style.margin=0;this._clonedElement.style.height=0;this.rootElement.style.visibility="visible";this.rootElement.style.removeProperty('margin');;this.rootElement.style.height="auto";}}}
criterion.ListViewRollover=function(rootElement,idx,options){this.rootElement=rootElement;this.idx=idx;this.options=options;this.mouseOutHandler=this._handleMouseOut.bind(this);this.mouseOverHandler=this._handleMouseOver.bind(this);}
criterion.ListViewRollover.prototype={init:function(){this.isChannel=(document.querySelector('.criterion-channel')?true:false);var rolloverClass=(this.isChannel?'criterion-channel__rollover':'gridFilm__rollover')
this.rootElement.addEventListener("mouseout",this.mouseOutHandler);this.rootElement.addEventListener("mouseover",this.mouseOverHandler);this._rolloverElement=document.createElement("div");this._rolloverElement.classList.add(rolloverClass);this.rootElement.appendChild(this._rolloverElement);},_handleMouseOut:function(evt){this._rolloverElement.style.opacity=0;},_handleMouseOver:function(){if(device.mobile()||device.tablet()||viewportWidth()<=768){return;}
var rect=getDimensionsForElement(this.rootElement);if(!this.isChannel){this._rolloverElement.style.width=(rect.width+48)+"px";this._rolloverElement.style.height=(rect.height)+48+"px";}else{this._rolloverElement.style.width=(rect.width+20)+"px";this._rolloverElement.style.height=(rect.height)-14+"px";}
this._rolloverElement.style.opacity=1;}}
criterion.LoadMore=function(rootElement){this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);this._isLoading=false;this._currentPage=0;}
criterion.LoadMore.prototype={init:function(){var json=JSON.parse(this.rootElement.getAttribute("data-load-more-button"));this._totalPages=json["totalPages"];this._route=json["route"];this._isArticleList=json["isArticleList"]||false;this._target=document.querySelector(json["target"]);if(this._isArticleList=='true'||this._isArticleList){var lastArticleElement=this._target.querySelector("[data-article-id]:last-child");this._lastArticleId=lastArticleElement.getAttribute("data-article-id");this._lastArticleType=lastArticleElement.getAttribute("data-article-type");this._lastArticleAppend=json["appendWith"]?json["appendWith"]:"?";}
else{this._append=json["appendWith"]+json["appendParam"]+"=";}
this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();this._nextPage();return;},_nextPage:function(){if(this._isLoading||this._currentPage>=this._totalPages-1){return;}
var me=this;firstly(function(){return me._incrementPageCount();}).then(function(){if(me._isArticleList=='true'||me._isArticleList){return me._xhrRequest(me._route+me._lastArticleAppend+"articleId="+me._lastArticleId+"&articleType="+me._lastArticleType);}
else{return me._xhrRequest(me._route+me._append+me._currentPage);}}).then(function(htmlString){return me._appendHTMLString(htmlString)}).then(function(){return me._animateContentIn()}).then(function(){return me._completePageLoad();}).catch(function(err){Logger.warn(err);});},_incrementPageCount:function(){this._currentPage++;return Promise.resolve();},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var htmlString=evt.currentTarget.responseText;resolve(htmlString);}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});},_appendHTMLString:function(htmlString){if(this._target.nodeName=="TBODY"){this._target.innerHTML+=htmlString;forEach(this._target.querySelectorAll(".gridFilm"),function(_,el){el.classList.add("is-newly-loaded");});return Promise.resolve();}
var div=document.createElement("div");div.innerHTML=htmlString;while(div.firstChild){var child=div.firstChild;div.removeChild(child);if(child.classList){child.classList.add("is-newly-loaded");this._target.appendChild(child);}}
if(this._isArticleList){var articleElements=this._target.querySelectorAll('[data-article-id]');var lastArticleElement=articleElements[articleElements.length-1];this._lastArticleId=lastArticleElement.getAttribute("data-article-id");this._lastArticleType=lastArticleElement.getAttribute("data-article-type");}
return Promise.resolve();},_animateContentIn:function(){var newElements=this._target.querySelectorAll(".is-newly-loaded");forEach(newElements,function(_,newElement){newElement.classList.add("is-ready-to-animate-in");});delay(50).then(function(){forEach(newElements,function(_,newElement){newElement.classList.add("is-in");});});return Promise.resolve();},_completePageLoad:function(){this._isLoading=false;this.dispatchEvent({type:"update"});if(this._currentPage>=this._totalPages-1){this.rootElement.style.display="none";}
var tracking=new criterion.Analytics();tracking.trackEvent("Page","Load More","loaded",this._currentPage);this._initializeEditorialTouts();return Promise.resolve();},_initializeEditorialTouts:function(){var largeTouts=document.querySelectorAll('[data-tout-size="large"]');if(largeTouts){largeTouts.forEach(function(element,index){if((index+1)%2==0){element.classList.add('c-tout--large-even');}});}},}
Object.assign(criterion.LoadMore.prototype,EventDispatcher.prototype);criterion.Main=function(){this._modalClosedHandler=this._handleModalClosed.bind(this);this._modalRequestedHandler=this._handleModalRequested.bind(this);this._modalCompleteHandler=this._handleModalComplete.bind(this);this._modalInHandler=this._handleModalIn.bind(this);this._modalOutHandler=this._handleModalOut.bind(this);this._loadMoreUpdateHandler=this._handleLoadMoreUpdate.bind(this);this._cartUpdatedHandler=this._handleCartUpdated.bind(this);this._wishlistRequestedHandler=this._handleWishListRequest.bind(this);this._stickyNavClickHandler=this._handleStickyNavClick.bind(this);this._gridViewIndex=-1;}
criterion.Main.prototype={init:function(){Logger.useDefaults();Logger.setLevel(window.CRITERON_LOGGING_ENABLED?Logger[window.CRITERON_DEBUG_LEVEL]:Logger.OFF);Logger.log("Welcome to the Criterion Collection.");this._initializeHome();this._initializeCrossFradeGalleries();this._initializeGalleries();this._initializeCustomAnchorLinks();this._initializeClickTracking();this._initializeInventoryStatusUpdaters();this._initializeToggles();this._initializeStickyNav();this._initializeLineClampedText();this._initializeVideoPlayer();this._initializeNewsletterSignup();this._initializeShareButtons();this._initializeCollectionPublicizeToggle();this._initializeRemoveFromWishlistButtons();this._initializeSelectDependancies();this._initializeModalRequestButtons();this._initializeBreakpoints();this._initializeQuickShopButtons();this._initializeNotesButtons();this._initializeResponsiveVideos();this._initializeEditorialControls();this._initializeEditorialTouts();this._initializeTriggers();this._initializeLoadMoreSections();this._initializeStoreFilters();this._initializeStoreSorting();this._initializeStoreDirection();this._initializeChannelGeo();this._initializeAddToCartButtons();this._initializeAddToWishlistButtons();this._initializeSidebars();this._initializeListViewRollovers();this._initializeGlobalCart();this._initializeNavDropdowns();this._initializeGlobalSearch();this._initializeArticleTracking();this._initializeFlashSaleCountdowns();this._initializeGiftCertificate();this._initializeVideoOverlayHide();this._initializeRemoveShippingAddressButtons();this._initializeRemoveCreditCardButtons();this._initializeRemoveMyCollectionFilmButtons();this._initializeAddMyCollectionFilmButtons();this._initializeAddMyCollectionFilmNoteButtons();this._initializeProcessingButton();this._initializeCartQuantityLimit();this._initTextAreaLimit();this._initAnimateOnScroll();this._initializeShowFootnote();this._initializeStickyColumns();if(typeof analytics!=='undefined'){this._initializeSegmentAnalytics();}
forEach(document.querySelectorAll("header .but-close"),function(_,el){el.addEventListener("click",function(evt){evt.preventDefault();});});},_appendHTMLString:function(parentElement,htmlString,selectInput){if(!parentElement){Logger.warn("Main :: Cannot find the appendable element to add this to.");return;}
var div=document.createElement("div");div.innerHTML=htmlString;if(selectInput){var input=div.querySelector("input");if(input){input.checked=true;}}
while(div.firstChild){var child=div.firstChild;div.removeChild(child);parentElement.appendChild(child);}},_handleModalRequested:function(evt){Logger.log("Main :: Handling Modal Request.");var me=this;firstly(function(){if(me._modal){return me._animateModalOut();}
return Promise.resolve();}).then(function(){me._createModal(evt.modalType,evt.options);}).then(function(){me._animateModalIn();}).catch(function(err){Logger.warn(err);});},_handleModalClosed:function(){this._animateModalOut();},_handleModalComplete:function(evt){var type=this._modal.type;if(type=="shipping"||type=="cc"){var el=document.querySelector(".is-appendable-"+type);if(!el){el=document.querySelector(".is-appendable");}
this._appendHTMLString(el,evt.data,true);if(type=="shipping"){this._initializeRemoveShippingAddressButtons();}
if(type=="cc"){this._initializeRemoveCreditCardButtons();}}},_createModal:function(type,options){var m;if(type=="shipping"){var options={template:criterion.Constants.ROUTES.SHIPPING_ADDRESS_MODAL_TEMPLATE,endpoint:criterion.Constants.ROUTES.ADD_SHIPPING_ADDRESS,fields:criterion.Constants.SHIPPING_FIELDS};m=new criterion.modals.FormModal(type,"center",options);}
else if(type=="cc"){var options={template:criterion.Constants.ROUTES.CREDIT_CARD_MODAL_TEMPLATE,endpoint:criterion.Constants.ROUTES.ADD_CREDIT_CARD,fields:criterion.Constants.CREDIT_CARD_FIELDS};m=new criterion.modals.FormModal(type,"center",options);}
else if(type=="edit_account_info"){var options={template:criterion.Constants.ROUTES.EDIT_ACCOUNT_MODAL_TEMPLATE,};m=new criterion.modals.EditAccountModal(type,"right",options);}
else if(type=="quickshop"){options.template=criterion.Constants.ROUTES.QUICKSHOP_MODAL_TEMPLATE;m=new criterion.modals.QuickShopModal(type,"center",options);}
else if(type=="video"){options.template=criterion.Constants.ROUTES.VIDEO_MODAL_TEMPLATE;m=new criterion.modals.VideoModal(type,"center",options);}
else if(type=="comments"){options.template=criterion.Constants.ROUTES.COMMENTS_MODAL_TEMPLATE;m=new criterion.modals.CommentsModal(type,"right",options);}
else if(type=="wishlist"){options.template=criterion.Constants.ROUTES.WISHLIST_MODAL_TEMPLATE;m=new criterion.modals.WishlistModal(type,"right",options);}
else if(type=="notes"){options.template=criterion.Constants.ROUTES.NOTES_MODAL_TEMPLATE;m=new criterion.modals.NotesModal(type,"center",options);}
else{Logger.warn("Main :: Unknown Modal Type, exiting :: "+type);return;}
this._modal=m;this._modal.init();this._modal.addEventListener("in",this._modalInHandler);this._modal.addEventListener("out",this._modalOutHandler);this._modal.addEventListener("close",this._modalClosedHandler);this._modal.addEventListener("complete",this._modalCompleteHandler);this._modal.addEventListener("cart-updated",this._cartUpdatedHandler);return Promise.resolve();},_animateModalIn:function(){return this._modal.animateIn();},_animateModalOut:function(){Logger.log("Main :: Closing Modal.");var me=this;return new Promise(function(fulfill,reject){firstly(function(){return me._modal.animateOut();}).then(function(){me._modal.removeEventListener("in",me._modalInHandler);me._modal.removeEventListener("out",me._modalOutHandler);me._modal.removeEventListener("close",me._modalClosedHandler);me._modal.addEventListener("complete",me._modalCompleteHandler);me._modal.addEventListener("cart-updated",me._cartUpdatedHandler);me._modal.destroy();me._modal=null;fulfill();}).catch(function(err){reject(err);});});},_handleModalIn:function(evt){},_handleModalOut:function(evt){},_handleCartUpdated:function(evt){var tracking=new criterion.Analytics();tracking.trackProduct(evt.modal?"Quick Shop":"Shop","add",evt.analytics);if(evt.modal){this._animateModalOut();var me=this;delay(500).then(function(){return me._globalCart.update();});return;}
var me=this;this._stickyNav.animateIn().then(function(){me._globalCart.update();});},_handleLoadMoreUpdate:function(evt){forEach(this._quickShopButtons,function(_,quickShopButtons){quickShopButtons.update();});this._initializeListViewRollovers();},_handleWishListRequest:function(evt){this._handleModalRequested({modalType:"wishlist",options:{ppid:evt.ppid}});},_handleStickyNavClick:function(evt){if(evt.state=="nav"){this._globalNav.animateIn();}
else if(evt.state=="search"){this._globalSearch.animateIn();}
else if(evt.state=="cart"){this._globalCart.toggle();}},_initializeCustomAnchorLinks:function(){var domElement=domElement||document;var elements=domElement.querySelectorAll("[data-href]");forEach(elements,function(_,element){var href=element.getAttribute("data-href");element.addEventListener("click",function(evt){if(evt.metaKey||element.hasAttribute('data-new-window')){window.open(href,"_blank").focus();return false;}
document.location=href;})})},_initializeListViewRollovers:function(){var gridView=document.getElementById("gridview");if(gridView){var elements=document.querySelectorAll(" [data-role=grid-film]:not(.is-initialized)");var options={containerElement:gridview.parentNode};var me=this;forEach(elements,function(_,element){me._gridViewIndex++;element.classList.add("is-initialized");var rollover=new criterion.ListViewRollover(element,me._gridViewIndex,options);rollover.init();});}},_initializeLineClampedText:function(domElement){var domElement=domElement||document;var elements=domElement.querySelectorAll("[data-clamp-lines]");forEach(elements,function(_,element){var lct=new criterion.LineClampedText(element);lct.init();});},_initializeInventoryStatusUpdaters:function(){var els=document.querySelectorAll("[data-inventory-status-updater]");forEach(els,function(_,el){var inventoryStatusUpdater=new criterion.InventoryStatusUpdater(el);inventoryStatusUpdater.init();});},_initializeToggles:function(){var faqs=document.querySelectorAll(".faq-block dl");forEach(faqs,function(_,faq){var question=$(faq).children().first()[0];var options={targetElement:faq};var toggle=new criterion.Toggle(question,options);toggle.init();});},_initializeStickyNav:function(){var el=document.querySelector(".headerSite");this._stickyNav=new criterion.StickyNav(el);this._stickyNav.init();this._stickyNav.addEventListener("click",this._stickyNavClickHandler);},_initializeVideoPlayer:function(){forEach(document.querySelectorAll("[data-video-player]"),function(_,el){var videoGallery=new criterion.VideoPlayer(el);videoGallery.init();});},_initializeNewsletterSignup:function(){forEach(document.querySelectorAll("[data-newsletter-signup]"),function(_,el){var newsletterSignup=new criterion.NewsletterSignup(el);newsletterSignup.init();});},_initializeShareButtons:function(domElement){var domElement=domElement||document;forEach(domElement.querySelectorAll("[data-share-link]"),function(_,el){var shareButtons=new criterion.ShareButtons(el);shareButtons.init();});},_initializeCollectionPublicizeToggle:function(){forEach(document.querySelectorAll("[data-collection-publicize-toggle]"),function(_,el){var toggle=new criterion.CollectionPublicizeToggle(el);toggle.init();});},_initializeRemoveFromWishlistButtons:function(){forEach(document.querySelectorAll("[data-wishlist-remove-id]"),function(_,el){var button=new criterion.RemoveFromWishlistButton(el);button.init();});},_initializeSelectDependancies:function(){forEach(document.querySelectorAll("[data-select-dependancy]"),function(_,el){var selectDependancy=new criterion.SelectDependancy(el);selectDependancy.init();});},_initializeClickTracking:function(){forEach(document.querySelectorAll("[data-click-tracking]"),function(_,el){var tracker=new criterion.ClickTracker(el);tracker.init();});},_initializeArticleTracking:function(){var rootElement=document.querySelector("[data-article-metadata]");if(rootElement){var articleData=JSON.parse(rootElement.getAttribute("data-article-metadata"));var tracking=new criterion.Analytics();tracking.trackArticle(articleData);}},_initializeHome:function(){var rootElement=document.querySelector("[data-home]");if(rootElement){var home=new criterion.Home(rootElement);home.init();}},_initializeGiftCertificate:function(){var rootElement=document.querySelector("[data-gift-certificate]");if(rootElement){var giftCertificate=new criterion.GiftCertificate(rootElement);giftCertificate.init();}},_initializeFlashSaleCountdowns:function(){forEach(document.querySelectorAll("[data-countdown]"),function(_,el){var countdown=new criterion.Countdown(el);countdown.init();});},_initializeGlobalNav:function(){},_initializeGlobalSearch:function(){var rootElement=document.querySelector("[data-global-search]");if(rootElement){var searchIconElement=document.querySelector(".headerSite .but-search");this._globalSearch=new criterion.GlobalSearch(rootElement,searchIconElement);this._globalSearch.addEventListener("in",this._modalInHandler);this._globalSearch.addEventListener("out",this._modalOutHandler);this._globalSearch.init();}},_initializeGlobalCart:function(){var rootElement=document.querySelector("[data-expanded-cart]");var cartIconElement=document.querySelector(".headerSite .but-cart");criterion.globalCart=this._globalCart=new criterion.GlobalCart(rootElement,cartIconElement);this._globalCart.init();},_initializeNavDropdowns:function(){var rootElements=document.querySelectorAll("[data-nav-dropdown-container]");criterion.navDropdowns=[];forEach(rootElements,function(_,element){var dropdown=new criterion.NavDropdown(element);criterion.navDropdowns.push(dropdown);dropdown.init();});},_initializeSidebars:function(){var rootElements=document.querySelectorAll("[data-sidebar]");criterion.sidebars=[];var me=this;forEach(rootElements,function(_,element){var sidebar=new criterion.Sidebar(element);sidebar.addEventListener("in",me._modalInHandler);sidebar.addEventListener("out",me._modalOutHandler);criterion.sidebars.push(sidebar);sidebar.init();});},_initializeAddToCartButtons:function(){var elements=document.querySelectorAll("[data-add-to-cart-submit]");var me=this;forEach(elements,function(_,element){var button=new criterion.AddToCartButton(element);button.init();button.addEventListener("cart-updated",me._cartUpdatedHandler);});},_initializeAddToWishlistButtons:function(){var elements=document.querySelectorAll("[data-add-to-wishlist-submit]");var me=this;forEach(elements,function(_,element){var button=new criterion.AddToWishlistButton(element);button.init();});},_initializeStoreFilters:function(){var element=document.querySelector("[data-store-filters]");var trigger=document.querySelector("[data-filter-trigger]");if(element&&trigger){var storeFilters=new criterion.StoreFilters(element,trigger);storeFilters.init();}},_initializeStoreSorting:function(){var element=document.querySelector("[data-store-sorting]");if(element){var storeSorting=new criterion.StoreSorting(element);storeSorting.init();}},_initializeStoreDirection:function(){var element=document.querySelector("[data-store-direction]");if(element){var storeDirection=new criterion.StoreDirection(element);storeDirection.init();}},_initializeChannelGeo:function(){var element=document.querySelector("[data-channel-geo-filter]");if(element){var channelGeo=new criterion.ChannelGeo(element);channelGeo.init();}},_initializeLoadMoreSections:function(){var elements=document.querySelectorAll("[data-load-more-button]");var me=this;forEach(elements,function(_,element){var loadMore=new criterion.LoadMore(element);loadMore.init();loadMore.addEventListener("update",me._loadMoreUpdateHandler);});},_initializeModalRequestButtons:function(domElement){var domElement=domElement||document;var elements=domElement.querySelectorAll("[data-form-modal]");var me=this;forEach(elements,function(_,element){var button=new criterion.ModalRequestButton(element);button.init();button.addEventListener("modal",me._modalRequestedHandler);});},_initializeStickyColumns:function(){window.addEventListener('load',function(){var stickyColumnElements=document.querySelectorAll("[data-sticky-columns]");this._stickyColumns=[];var me=this;forEach(stickyColumnElements,function(_,stickyColumnElement){var stickyColumns=new criterion.StickyColumns(stickyColumnElement);stickyColumns.init();me._stickyColumns.push(stickyColumns);});});},_initializeQuickShopButtons:function(){var elements=document.querySelectorAll('[data-is-quickshop]');this._quickShopButtons=[];var me=this;forEach(elements,function(_,element){var quickShopButtons=new criterion.QuickShopButtons(element);quickShopButtons.init();quickShopButtons.addEventListener('modal',me._modalRequestedHandler);me._quickShopButtons.push(quickShopButtons);});},_initializeNotesButtons:function(){var elements=document.querySelectorAll("[data-notes-buttons]");this._notesButtons=[];var me=this;forEach(elements,function(_,element){var notesButtons=new criterion.NotesButtons(element);notesButtons.init();notesButtons.addEventListener("modal",me._modalRequestedHandler);me._notesButtons.push(notesButtons);});},_initializeCrossFradeGalleries:function(){var elements=document.querySelectorAll("[data-current-crossfade-gallery]");for(var i=0;i<elements.length;i++){var gallery=new criterion.CurrentCrossfadeGallery(elements[i]);gallery.init();}
var elements=document.querySelectorAll(".is-fancy-crossfade-gallery");for(var i=0;i<elements.length;i++){var gallery=new criterion.FancyCrossfadeGallery(elements[i]);gallery.init();}},_initializeGalleries:function(domElement){window.addEventListener('load',function(){var domElement=domElement||document;var options={prevNextButtons:true,pageDots:false,adaptiveHeight:false,setGallerySize:true,groupCells:true,imagesLoaded:true,cellAlign:'left',cellSelector:'[data-video-player-thumbnail]',count:'[data-video-player-video-count]',parentComponent:'[data-video-player]'}
var elements=domElement.querySelectorAll("[data-video-player-thumbnails]");forEach(elements,function(_,element){var gallery=new criterion.SimpleGallery(element,options);gallery.init();});var options={prevNextButtons:false,pageDots:false,adaptiveHeight:false,imagesLoaded:true,cellAlign:'left',cellSelector:'.more-article',statusSelector:'.more-index',groupCells:true,};var elements=domElement.querySelectorAll("[data-enable-gallery]");forEach(elements,function(_,element){var gallery=new criterion.SimpleGallery(element,options);gallery.init();});var options={prevNextButtons:false,pageDots:false,adaptiveHeight:false,imagesLoaded:true,cellAlign:'left',statusSelector:'.more-index',groupCells:true};var elements=domElement.querySelectorAll("[data-editorial-aside-carousel]");forEach(elements,function(_,element){var gallery=new criterion.SimpleGallery(element,options);gallery.init();});var options={prevNextButtons:true,pageDots:false,adaptiveHeight:false,imagesLoaded:true,cellSelector:'.gallery-cell',statusSelector:'.blockgallery-index',draggable:">1",arrowShape:{x0:10,x1:60,y1:50,x2:65,y2:45,x3:20}}
var elements=domElement.querySelectorAll(".gallery-block");forEach(elements,function(_,element){var gallery=new criterion.SimpleGallery(element,options);gallery.init();});var options={cellSelector:'.gallery-cell',imagesLoaded:true,groupCells:false,adaptiveHeight:false,pageDots:false,percentPosition:false,centerPrevNextToSelector:".flickity-viewport",centerPrevNextOffset:{"mobile":25,"desktop":80},arrowShape:{x0:10,x1:60,y1:50,x2:60,y2:40,x3:20}};var elements=domElement.querySelectorAll("[data-film-detail-gallery]");forEach(elements,function(_,element){var closest=$(element).closest(".content-left, .content-right");options.cellAlign=(closest.length>0)?"left":"center";options.contain=(closest.length>0);options.contain=false;var gallery=new criterion.SimpleGallery(element,options);gallery.init();});var options={cellAlign:'center',groupCells:'90%',imagesLoaded:true,prevNextButtons:false,pageDots:false};var elements=domElement.querySelectorAll(".list__slide");forEach(elements,function(_,element){var gallery=new criterion.SimpleGallery(element,options);gallery.init();});});},_initializeBreakpoints:function(){$(window).setBreakpoints({distinct:true,breakpoints:[1,768,1280]});$(window).bind('enterBreakpoint1280',function(){$('#editorial-links').attr('aria-hidden','false');});$(window).bind('exitBreakpoint1280',function(){$('#editorial-links').attr('aria-hidden','true');});},_initializeEditorialControls:function(){var self=this;var edControl='[data-editorial-links-control]';var edContain='[data-editorial-links-contain]';var edLinks='[data-editorial-links]';var edClose='[data-editorial-links-close]';var edDaily='[data-current-landing-daily]';var active='is-active';$(edContain).click(function(event){event.preventDefault();self._scroll(false);$(edControl).toggleClass('off');$(edContain).attr('aria-expanded','true');$(edLinks).toggleClass('on').attr('aria-hidden','false');});$(edClose).click(function(event){self._scroll(true);$(edControl).toggleClass('off');$(edContain).attr('aria-expanded','false');$(edLinks).toggleClass('on').attr('aria-hidden','true');});$(edClose).keydown(function(event){if(event.keyCode==13){$(edClose).trigger('click');}});$(window).on('scroll',function(){if($(edDaily).length){if($(this).scrollTop()>=$(edDaily).position().top&&!$(edLinks).hasClass(active)){$(edControl).addClass(active);}}});},_scroll:function(state){var $body=$('body');var $window=$(window);if(!state){var scrollDistance=$window.scrollTop();$body.addClass('u-no-scroll');$body.css('top',scrollDistance*-1);return;}
if(state){var scrollDistance=parseInt($body.css('top'))*-1;$body.removeClass('u-no-scroll');$window.scrollTop(scrollDistance);return;}},_initializeEditorialTouts:function(){var largeTouts=document.querySelectorAll('[data-tout-size="large"]');if(largeTouts){largeTouts.forEach(function(element,index){if((index+1)%2==0){element.classList.add('c-tout--large-even');}});}},_initializeTriggers:function(){$('.trigger').click(function(event){event.preventDefault();$(this).toggleClass('on').attr('aria-expanded','true');$(this).next('.trigger-target').toggleClass('on').attr('aria-hidden','false');});},_initializeResponsiveVideos:function(){$('[data-video-player-wrap]').fitVids();},_initializeVideoOverlayHide:function(){if($('.is-youtube-embed'.length>0)){$.each($('.is-youtube-embed'),function(index,value){var $video=$(value).find('iframe');var $target=$video.next('p');$target.hide();});}},_initializeRemoveShippingAddressButtons:function(){forEach(document.querySelectorAll("[data-address-remove-id]"),function(_,el){var button=new criterion.RemoveShippingAddressButton(el);button.init();});},_initializeRemoveCreditCardButtons:function(){forEach(document.querySelectorAll("[data-card-remove-id]"),function(_,el){var button=new criterion.RemoveCreditCardButton(el);button.init();});},_initializeRemoveMyCollectionFilmButtons:function(){forEach(document.querySelectorAll("[data-remove-film-from-my-collection-submit]"),function(_,el){var button=new criterion.RemoveMyCollectionFilmButton(el);button.init();});},_initializeAddMyCollectionFilmButtons:function(){forEach(document.querySelectorAll("[data-add-film-to-my-collection-submit]"),function(_,el){var button=new criterion.AddMyCollectionFilmButton(el);button.init();});},_initializeAddMyCollectionFilmNoteButtons:function(){forEach(document.querySelectorAll("[data-add-note-submit]"),function(_,el){var button=new criterion.AddMyCollectionFilmNoteButton(el);button.init();});},_initializeProcessingButton:function(){forEach(document.querySelectorAll("[data-processing-button]"),function(_,el){var button=new criterion.ProcessingButton(el);button.init();});},_initializeCartQuantityLimit:function(){forEach(document.querySelectorAll(".cart-quantity"),function(_,el){var input=new criterion.CartQuantityLimit(el);input.init();});},_initTextAreaLimit:function(){var giftCertTextArea=document.querySelector('[data-gift-certificate-content]');var giftCertCharCount=document.querySelector('[data-gift-certificate-char-count]');if(giftCertTextArea){var giftCertMaxLength=giftCertTextArea.getAttribute('maxlength');giftCertCharCount.textContent=giftCertMaxLength-giftCertTextArea.value.length;giftCertTextArea.addEventListener('keyup',function(){giftCertCharCount.textContent=giftCertMaxLength-giftCertTextArea.value.length;});}},_initAnimateOnScroll:function(){AOS.init();},_initializeSegmentAnalytics:function(){var segmentEvent='[data-segment-event-name]';var segmentTracker=new criterion.SegmentAnalytics();window.addEventListener('load',function(){var events=document.querySelectorAll(segmentEvent);events.forEach(function(el){var eventName=el.getAttribute('data-segment-event-name');var eventData=JSON.parse(el.getAttribute('data-segment-event-data'));var trackingData={event:eventName,data:eventData}
segmentTracker.track(trackingData);});});},_initializeShowFootnote:function(){var elements=document.querySelectorAll('sup');var me=this;forEach(elements,function(_,element){var button=new criterion.ShowFootnote(element);button.init();});},}
criterion.Modal=function(type,position,request){this.type=type;this.request=request;this.position=position;this._windowClickHandler=this._handleWindowClick.bind(this);this._closeClickHandler=this._handleCloseClick.bind(this);}
criterion.Modal.prototype={init:function(){},destroy:function(){this._rootElement=null;},animateIn:function(){var me=this;return new Promise(function(fulfill,reject){firstly(function(){return me._xhrRequest(me.request.route);}).then(function(htmlString){return me._createDOM(htmlString);}).then(function(rootElement){return me._willAnimateIn(rootElement);}).then(function(){return me._animateIn();}).then(function(){fulfill();}).catch(function(err){reject(err);});});},_willAnimateIn:function(rootElement){this._rootElement=rootElement;this._rootElement.classList.remove("is-center-position");this._rootElement.classList.remove("is-right-position");this._rootElement.classList.remove("is-left-position");this._rootElement.classList.add("is-"+this.position+"-position");this._scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;var pageContainer=document.querySelector(".page-contain");prefix(pageContainer,"transform","translateY("+(this._scrollTop*-1)+"px)");document.body.classList.add("modal");this.dispatchEvent({type:"in"});window.scrollTo(0,0);this._rootElement.querySelector(".closePop").addEventListener("click",this._closeClickHandler);window.addEventListener("click",this._windowClickHandler);return Promise.resolve();},_animateIn:function(){this._rootElement.classList.add("is-in");return delay(500);},animateOut:function(){var me=this;return new Promise(function(fulfill,reject){firstly(function(){return me._willAnimateOut();}).then(function(){return me._animateOut();}).then(function(){fulfill();}).catch(function(err){Logger.error(err);reject(err);});});},_willAnimateOut:function(){window.removeEventListener("click",this._windowClickHandler);return Promise.resolve();},_animateOut:function(){var me=this;return new Promise(function(fulfill,reject){me._rootElement.classList.add("is-out");delay(50).then(function(){me._rootElement.classList.add("no-really-go-away")
return delay(500);}).then(function(){var pageContainer=document.querySelector(".page-contain");prefix(pageContainer,"transform","");document.body.classList.remove("modal");window.scrollTo(0,me._scrollTop);me.dispatchEvent({type:"out"});me._rootElement.parentNode.removeChild(me._rootElement);me._rootElement=null;fulfill();}).catch(function(err){reject(err);});});},_createDOM:function(htmlString){var rootElement=document.createElement("div");rootElement.classList.add("is-ajax");rootElement.classList.add("is-modal");var div=document.createElement("div");div.classList.add("is-modal-centerer");div.innerHTML=htmlString;rootElement.appendChild(div);document.body.appendChild(rootElement);return Promise.resolve(rootElement);},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var htmlString=evt.currentTarget.responseText;resolve(htmlString);}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});},_handleCloseClick:function(evt){this.dispatchEvent({type:"close"});},_handleWindowClick:function(evt){var target=evt.target;var withinModal=false;while(target&&!withinModal){target=target.parentNode;if(target&&target.classList){withinModal=target.classList.contains("is-modal-root");}}
if(!withinModal){this.dispatchEvent({type:"close"});}},}
Object.assign(criterion.Modal.prototype,EventDispatcher.prototype);criterion.ModalRequestButton=function(rootElement){this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);}
criterion.ModalRequestButton.prototype={init:function(){this._type=this.rootElement.getAttribute("data-form-modal");this._options=this.rootElement.hasAttribute("data-form-modal-options")?JSON.parse(this.rootElement.getAttribute("data-form-modal-options")):{};this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();this.dispatchEvent({type:"modal",modalType:this._type,options:this._options});return;}}
Object.assign(criterion.ModalRequestButton.prototype,EventDispatcher.prototype);criterion.NavDropdown=function(rootElement){this.dropdownElement=rootElement.querySelector('[data-nav-dropdown]');this.accountIconElement=rootElement.querySelector('[data-nav-dropdown-toggle]');this._isIn=false;this._windowScrollListener="scroll";this._windowScrollHandler=this._handleWindowScroll.bind(this);this._windowClickHandler=this._handleWindowClick.bind(this);this._accountIconClickHandler=this._handleAccountIconClick.bind(this);}
criterion.NavDropdown.prototype={init:function(){this.accountIconElement.addEventListener("click",this._accountIconClickHandler);if(!device.mobile()){window.addEventListener(this._windowScrollListener,this._windowScrollHandler);}},closePanels:function(){if(criterion.globalCart){criterion.globalCart.animateOut();}
if($('body').hasClass('is-nav-in')){if(criterion.globalNav){criterion.globalNav.animateOut();}}},animateIn:function(){this.closePanels();this.dropdownElement.classList.add("in");this.accountIconElement.setAttribute('aria-expanded','true');document.body.classList.add("is-expanded-panel-in");var me=this;delay(50).then(function(){me.dropdownElement.classList.add("is-in");});this._isIn=true;window.addEventListener("click",this._windowClickHandler);},animateOut:function(cb){this._isIn=false;this.accountIconElement.setAttribute('aria-expanded','false');this.dropdownElement.classList.remove("is-in");document.body.classList.remove("is-expanded-panel-in");var me=this;delay(250).then(function(){me.dropdownElement.classList.remove("in");cb();});},toggle:function(){if(this._isIn){this.animateOut();}
else{this.animateIn();}},_handleAccountIconClick:function(evt){evt.preventDefault();evt.stopPropagation();this.toggle();return;},_handleWindowClick:function(evt){var target=evt.target;var isWithin=false;while(target&&!isWithin){isWithin=(target==this._clickContainer);target=target.parentNode;}
if(!isWithin){this.animateOut();}},_handleWindowScroll:function(evt){if(this._isTicking){return;}
this._isTicking=true;var me=this;if(criterion.Constants.IS_MICROSOFT_BROWSER){setTimeout(function(){me._scrollUpdated();me._isTicking=false;},100);}
else{requestAnimationFrame(function(){me._scrollUpdated();me._isTicking=false;});}},_scrollUpdated:function(){this.animateOut();}}
criterion.NewsletterSignup=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.NEWSLETTER_SIGNUP;this.rootElement=rootElement;this._submitButtonClickHandler=this._handleSubmitButtonClick.bind(this);this._inputKeyDownHandler=this._handleInputKeydown.bind(this);}
criterion.NewsletterSignup.prototype={init:function(){Logger.log("Newsletter Signup :: Init.");this.rootElement.querySelector("[data-newsletter-signup-submit-button]").addEventListener("click",this._submitButtonClickHandler);this._inputElement=this.rootElement.querySelector("[data-newsletter-signup-input]");this._inputElement.addEventListener("keydown",this._inputKeyDownHandler);},_animateOut:function(){var tracking=new criterion.Analytics();tracking.trackEvent("Newsletter","signup","Footer");this.rootElement.classList.add("white");this.rootElement.innerHTML='Thank you for signing up!';},_handleSubmitButtonClick:function(evt){evt.preventDefault();this._submitForm();},_handleInputKeydown:function(evt){Logger.log("!");this._clearInputErrors();},_clearInputErrors:function(){this.rootElement.classList.remove("error");},_submitForm:function(){this._clearInputErrors();var email=this._inputElement.value.trim();var errors=validate.single(email,{presence:true,email:true});if(errors){this.rootElement.classList.add("error");}else{var me=this;me._animateOut();var trackingData={event:'Newsletter Subscribed',data:{email:email,origin:'footer'}}
var segmentTracker=new criterion.SegmentAnalytics();segmentTracker.track(trackingData);me._xhrRequest(me._ROUTE+"?email="+email);}},_xhrRequest:function(endpoint){var me=this;return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});}}
criterion.NotesButtons=function(rootElement){this.rootElement=rootElement;this._productClickHandler=this._handleProductClick.bind(this);}
criterion.NotesButtons.prototype={init:function(){var me=this;$(me.rootElement).on('click','[data-list-item-id]',me._productClickHandler);},_handleProductClick:function(evt){evt.preventDefault();evt.stopPropagation();var target=evt.target;var listItemId=target.getAttribute("data-list-item-id");var productId=target.getAttribute("data-product-id");var newNote=target.hasAttribute("data-add-note-to-my-collection-submit");if(target&&!listItemId){target=target.parentNode;listItemId=target.getAttribute("data-list-item-id");}
if(!listItemId){Logger.error("Clicked a List Item that didn't have a List Item ID. Ignoring.");return;}
this.dispatchEvent({type:"modal",modalType:"notes",options:{listItemId:listItemId,productId:productId,newNote:newNote}});return;},update:function(){var newElements=this.rootElement.querySelectorAll(".is-newly-loaded");var me=this;forEach(newElements,function(_,newElement){newElement.classList.remove("is-newly-loaded");var listItem=newElement.querySelector("[data-list-item-id]");listItem.addEventListener("click",me._productClickHandler);});}}
Object.assign(criterion.NotesButtons.prototype,EventDispatcher.prototype);criterion.ProcessingButton=function(rootElement){this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);};criterion.ProcessingButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){var processingButton=this.rootElement.nextElementSibling;this.rootElement.style.display='none';processingButton.style.display='block';var self=this;setTimeout(function(){self._reactiveButton();},1000);},_reactiveButton:function(){var processingButton=this.rootElement.nextElementSibling;this.rootElement.style.display='block';processingButton.style.display='none';}}
criterion.QuickShopButtons=function(rootElement){this.rootElement=rootElement;this._productClickHandler=this._handleProductClick.bind(this);}
criterion.QuickShopButtons.prototype={init:function(){var products=this.rootElement.querySelectorAll("[data-product-id]");var me=this;forEach(products,function(_,product){product.removeEventListener('click',me._productClickHandler);product.addEventListener('click',me._productClickHandler);});},_handleProductClick:function(evt){evt.preventDefault();evt.stopPropagation();var target=evt.target;var productId=target.getAttribute("data-product-id");var productType=target.getAttribute("data-product-type");while(target&&!productId){target=target.parentNode;productId=target.getAttribute("data-product-id");}
if(!productId){Logger.error("Clicked a Product that didn't have a Product ID. Ignoring.");return;}
this.dispatchEvent({type:"modal",modalType:"quickshop",options:{productId:productId,productType:productType}});return;},update:function(){this.init();}}
Object.assign(criterion.QuickShopButtons.prototype,EventDispatcher.prototype);criterion.RemoveCreditCardButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.REMOVE_CREDIT_CARD;this._CARD_ATTRIBUTE="data-card-remove-id";this._ITEM_ROOT_ATTRIBUTE="data-card-root";this._CONFIRM_MESSAGE="data-confirm";this._DELAY_BEFORE_REMOVAL=300;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);this._CARD_ID=this.rootElement.getAttribute(this._CARD_ATTRIBUTE);};criterion.RemoveCreditCardButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var self=this;self._showConfirmDialog(function(confirmed){if(confirmed){self._removeCard();self._deleteNode();}});},_showConfirmDialog:function(callback){var message=this.rootElement.getAttribute(this._CONFIRM_MESSAGE);var result=window.confirm(message);callback(result);},_removeCard:function(){if(!this._CARD_ID){Logger.warn("RemoveCreditCardButton :: Failed to locate Card ID. Ignoring.");return;}
this._xhrRequest(this._ROUTE+"?id="+this._CARD_ID);},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content"));xhr.send({xhr:true});});},_deleteNode:function(){var selector="["+this._ITEM_ROOT_ATTRIBUTE+'="'+this._CARD_ID+'"]';var roots=document.querySelectorAll(selector);for(var i=0;i<roots.length;i++){var el=roots[i];var me=this;firstly(function(){return delay(50);}).then(function(){return delay(me._DELAY_BEFORE_REMOVAL);}).then(function(){if(el.parentNode){el.parentNode.removeChild(el);}
return Promise.resolve();}).catch(function(err){Logger.warn(err);});}}};criterion.RemoveFromWishlistButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.REMOVE_FROM_WISHLIST;this._WISHLIST_ATTRIBUTE="data-wishlist-id";this._ITEM_ROOT_ATTRIBUTE="data-wishlist-item-root";this._DELAY_BEFORE_REMOVAL=1;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);}
criterion.RemoveFromWishlistButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();this._updateWishlist();this._animateOut();},_queryForAncestor:function(selector){var pointer=this.rootElement;var target=false;while(pointer&&!target){if(pointer.hasAttribute(selector)||(pointer.classList&&pointer.classList.contains(selector))){target=pointer;break;}
pointer=pointer.parentNode;}
return target;},_updateWishlist:function(){var ancestor=this._queryForAncestor(this._WISHLIST_ATTRIBUTE);if(!ancestor){Logger.warn("RemoveFromWishlistButton :: Failed to locate Wishlist ID. Ignoring.");return;}
var wishlistId=ancestor.getAttribute(this._WISHLIST_ATTRIBUTE);var id=this.rootElement.getAttribute("data-wishlist-remove-id");return this._xhrRequest(this._ROUTE+"?wishlistId="+wishlistId+"&id="+id).then(function(response){var trackingData={event:'Product Removed from Wishlist',data:response.segmentItem}
var segmentTracker=new criterion.SegmentAnalytics();segmentTracker.track(trackingData);});},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});},_animateOut:function(){var ancestor=this._queryForAncestor(this._ITEM_ROOT_ATTRIBUTE);ancestor.classList.add("out");var me=this;firstly(function(){return delay(50);}).then(function(){return delay(me._DELAY_BEFORE_REMOVAL)}).then(function(){ancestor.classList.add("is-out");return Promise.resolve();}).catch(function(err){Logger.warn(err);});}}
criterion.RemoveMyCollectionFilmButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.REMOVE_MY_COLLECTION_FILM;this._MY_COLLECTION_FILM_ATTRIBUTE="data-my-collection-film-remove-id";this._ITEM_ROOT_ATTRIBUTE="data-my-collection-film-root";this._CONFIRM_MESSAGE="data-confirm";this._DELAY_BEFORE_REMOVAL=300;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);this._MY_COLLECTION_FILM_ID=this.rootElement.getAttribute(this._MY_COLLECTION_FILM_ATTRIBUTE);};criterion.RemoveMyCollectionFilmButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var self=this;self._showConfirmDialog(function(confirmed){if(confirmed){self._removeMyCollectionFilm();setTimeout(function(){location.reload();},800);}});},_showConfirmDialog:function(callback){var message=this.rootElement.getAttribute(this._CONFIRM_MESSAGE);var result=window.confirm(message);callback(result);},_removeMyCollectionFilm:function(){if(!this._MY_COLLECTION_FILM_ID){Logger.warn("RemoveMyCollectionFilmButton :: Failed to locate Address ID. Ignoring.");return;}
this._xhrRequest(this._ROUTE+"?id="+this._MY_COLLECTION_FILM_ID);},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content"));xhr.send({xhr:true});});}};criterion.RemoveMyCollectionFilmNoteButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.ADD_NOTE_TO_MY_COLLECTION_FILM;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);};criterion.RemoveMyCollectionFilmNoteButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var dataListItem=this.rootElement.closest('form').querySelector('[data-list-item-id]');var listItemId=dataListItem.getAttribute('data-list-item-id');var form=this.rootElement.closest('article').querySelector('form textarea');var maxLength=form.getAttribute('maxlength');var charCount=form.nextElementSibling;charCount.textContent=maxLength;form.value='';this._removeMyCollectionFilmNote(listItemId);},_removeMyCollectionFilmNote:function(listItemId){this._xhrRequest(this._ROUTE+"?id="+listItemId+"&note=");this._userFeedback(listItemId);this._updateMyCollectionPageLinkAndIcon(listItemId);},_userFeedback:function(listItemId){var feedbackContainer=this.rootElement.closest('.notesModal__descrip').querySelector('.notesModal__user-feedback p');feedbackContainer.innerText='Your note has been removed';feedbackContainer.style.visibility='visible';},_updateMyCollectionPageLinkAndIcon:function(listItemId){var myCollection=document.querySelector('.my-collection');var buttons=myCollection.querySelector('[data-list-item-id-for-icon="'+listItemId+'"] [data-notes-buttons]')
var noteIcon=buttons.querySelector('[data-my-collection-note-icon]');if(noteIcon){buttons.removeChild(noteIcon);}
var dataListItem=myCollection.querySelector('[data-list-item-id="'+listItemId+'"]');dataListItem.innerText='Add Note';},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content"));xhr.send({xhr:true});});},};criterion.RemoveShippingAddressButton=function(rootElement){this._ROUTE=criterion.Constants.ROUTES.REMOVE_SHIPPING_ADDRESS;this._ADDRESS_ATTRIBUTE="data-address-remove-id";this._ITEM_ROOT_ATTRIBUTE="data-address-root";this._CONFIRM_MESSAGE="data-confirm";this._DELAY_BEFORE_REMOVAL=300;this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);this._ADDRESS_ID=this.rootElement.getAttribute(this._ADDRESS_ATTRIBUTE);};criterion.RemoveShippingAddressButton.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var self=this;self._showConfirmDialog(function(confirmed){if(confirmed){self._removeAddress();self._animateOut();}});},_showConfirmDialog:function(callback){var message=this.rootElement.getAttribute(this._CONFIRM_MESSAGE);var result=window.confirm(message);callback(result);},_removeAddress:function(){if(!this._ADDRESS_ID){Logger.warn("RemoveShippingAddressButton :: Failed to locate Address ID. Ignoring.");return;}
this._xhrRequest(this._ROUTE+"?id="+this._ADDRESS_ID);},_xhrRequest:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content"));xhr.send({xhr:true});});},_animateOut:function(){var selector="["+this._ITEM_ROOT_ATTRIBUTE+'="'+this._ADDRESS_ID+'"]';var roots=document.querySelectorAll(selector);for(var i=0;i<roots.length;i++){var el=roots[i];var me=this;firstly(function(){return delay(50);}).then(function(){return delay(me._DELAY_BEFORE_REMOVAL);}).then(function(){el.parentNode.removeChild(el);return Promise.resolve();}).catch(function(err){Logger.warn(err);});}}};criterion.ResizableGallery=function(rootElement,options){this.rootElement=rootElement;this.options=options;this._windowResizeListener=device.mobile()||device.tablet()?"orientationchange":"resize";this._windowResizeHandler=this._handleWindowResize.bind(this);this._isResized=false;};criterion.ResizableGallery.prototype={init:function(){this._galleryItems=this.rootElement.querySelectorAll(".gallery-item");var me=this;firstly(function(){return me._detectAllImageDimensions();}).then(function(allDimensions){me._allDimensions=allDimensions;return Promise.resolve();}).then(function(){return me._resizeGalleryItems();}).then(function(){return me._initSlider();}).then(function(){return me._animateIn();}).catch(function(err){Logger.error("ResizableGallery :: Failed to initialize.");Logger.error(err);});},_detectAllImageDimensions:function(){var me=this;return new Promise(function(fulfill,reject){var chained=Promise.resolve({w:0,h:0});var allDimensions=[];forEach(me._galleryItems,function(_,galleryItem){chained=chained.then(function(dimensions){allDimensions.push(dimensions);return me._detectImageDimensions(galleryItem);})});chained=chained.then(function(dimensions){allDimensions.push(dimensions);allDimensions.shift();fulfill(allDimensions);}).catch(function(err){reject(err);});});},_detectImageDimensions:function(galleryItem){return new Promise(function(fulfill,reject){var path=galleryItem.style.backgroundImage.slice(4,-1).replace(/"/g,"");var image=new Image();image.onerror=function(){reject(new Error("Failed to load image :: "+imagePath));}
image.onload=function(){fulfill({w:this.width,h:this.height});}
image.src=path;});},_resizeGalleryItems:function(){this._handleWindowResize();return Promise.resolve();},_initSlider:function(){this._carousel=new criterion.SimpleGallery(this.rootElement,this.options);this._carousel.init();window.addEventListener(this._windowResizeListener,this._windowResizeHandler);return delay(250);},_animateIn:function(){var me=this;return new Promise(function(fulfill,reject){firstly(function(){return me._animateLoaderOut();}).then(function(){return me._animateGalleryIn();}).then(function(){fulfill();}).catch(function(err){reject(err)});});},_animateLoaderOut:function(){var me=this;return new Promise(function(fulfill,reject){me.rootElement.classList.add("is-gallery-loaded");delay(1000).then(function(){fulfill();});});},_animateGalleryIn:function(){var me=this;return new Promise(function(fulfill,reject){me.rootElement.classList.add("is-gallery-in");delay(1000).then(function(){fulfill();});});},_handleWindowResize:function(){if(window.innerWidth<=768){forEach(this._galleryItems,function(_,galleryItem){galleryItem.parentNode.style.width="";galleryItem.style.height="";});this._isResized=false;}
else if(!this._isResized){this._isResized=true;var smallestDimensions=this._allDimensions[0];forEach(this._allDimensions,function(_,dimensions){if(dimensions.h<smallestDimensions.h){smallestDimensions=dimensions;}});var me=this;forEach(this._galleryItems,function(idx,galleryItem){var dimensions=me._allDimensions[idx];var scale=smallestDimensions.h/dimensions.h;var width=dimensions.w*scale;var height=dimensions.h*scale;galleryItem.parentNode.style.width=width+"px";galleryItem.style.height=height+"px";});}}};criterion.SegmentAnalytics=function(){this.analytics=analytics;};criterion.SegmentAnalytics.prototype={identify:function(trackingObj){if(trackingObj.id){this.analytics.identify(trackingObj.id,trackingObj.data);}else{this.analytics.identify(trackingObj.data);}},track:function(trackingObj){this.analytics.track(trackingObj.event,trackingObj.data);}};criterion.SelectDependancy=function(rootElement){this.rootElement=rootElement;this._changeHandler=this._handleChange.bind(this);}
criterion.SelectDependancy.prototype={init:function(){this._dependancyElement=document.querySelector(this.rootElement.getAttribute("data-select-dependancy"));this.rootElement.addEventListener("change",this._changeHandler);},_handleChange:function(evt){var option=this.rootElement.querySelector("option[value="+this.rootElement.value+"]");var options=JSON.parse(option.getAttribute("data-select-dependancy-options"));emptyElement(this._dependancyElement);Logger.log("SelectDependancy :: Changed.");var me=this;forEach(options,function(_,option){var optionEl=document.createElement("option");optionEl.setAttribute("value",option["value"]);optionEl.setAttribute("data-inventory",JSON.stringify(option));optionEl.innerHTML=option["title"];if(option["status"]=="out-of-stock"){optionEl.innerHTML=optionEl.innerHTML+" - out of stock";optionEl.setAttribute("disabled","disabled");}
me._dependancyElement.appendChild(optionEl);fireNativeEvent(me._dependancyElement,"change");});}}
criterion.ShareButtons=function(rootElement){this._FACEBOOK_URL="https://www.facebook.com/sharer/sharer.php?u=";this._TWITTER_URL="https://twitter.com/intent/tweet?text=&via=criterion&url=";this._GOOGLE_URL="https://plus.google.com/share?url=";this._TUMBLR_URL="http://www.tumblr.com/share/link?url=";this._EMAIL_URL="mailto:?subject=A Criterion Collection Link for you&body=";this.rootElement=rootElement;this._shareClickHandler=this._handleShareClick.bind(this);this._clipboardTextRequestHandler=this._handleClipboardTextRequest.bind(this);}
criterion.ShareButtons.prototype={init:function(){var me=this;forEach(this.rootElement.querySelectorAll("[data-share-type]"),function(_,el){if(el.getAttribute("data-share-type")=="clipboard"){el.addEventListener("click",function(e){e.preventDefault();});me._initializeClipboard(el);}
else{el.addEventListener("click",me._shareClickHandler);}})},_queryForAncestor:function(pointer,attributeOrClass){var target=false;while(pointer&&!target){if((pointer.hasAttribute&&pointer.hasAttribute(attributeOrClass))||(pointer.classList&&pointer.classList.contains(attributeOrClass))){target=pointer;break;}
pointer=pointer.parentNode;}
return target;},_handleShareClick:function(evt){evt.preventDefault();var shareType=this._queryForAncestor(evt.target,"data-share-type").getAttribute("data-share-type");var shareElement=this._queryForAncestor(this.rootElement,"data-share-link");var shareAttribute=shareElement.hasAttribute("data-mobile-share-link")?"data-mobile-share-link":"data-share-link";var shareURL=shareElement.getAttribute(shareAttribute);var windowURL=this["_"+shareType.toUpperCase()+"_URL"]+shareURL;var segmentTracker=new criterion.SegmentAnalytics();var analyticsObject=this._createAnalyticsObject(shareType,shareURL);if(analyticsObject){segmentTracker.track({event:'Product Shared',data:analyticsObject});}
if(shareType=="email"){window.location=windowURL;return;}
window.open(windowURL,"criterion-share-popup","width=700,height=475,resizable=no,scrollbars=yes,toolbars=no,menubar=no,location=no");},_initializeClipboard:function(element){var me=this;var shareUrl=this._clipboardTextRequestHandler();this._clipboard=new Clipboard(element,{text:this._clipboardTextRequestHandler});this._clipboard.on('success',function(e){var segmentTracker=new criterion.SegmentAnalytics();var analyticsObject=me._createAnalyticsObject("clipboard",shareUrl);if(analyticsObject){segmentTracker.track({event:'Product Shared',data:analyticsObject});}
$(element).replaceWith('<p class="header_lvl2 quillgray">Copied</p>');});},_handleClipboardTextRequest:function(trigger){var shareElement=this._queryForAncestor(this.rootElement,"data-share-link");var shareAttribute=shareElement.hasAttribute("data-mobile-share-link")?"data-mobile-share-link":"data-share-link";var shareURL=shareElement.getAttribute(shareAttribute);return shareURL;},_createAnalyticsObject:function(shareType,shareURL){var segmentDataElement=document.querySelector("[data-segment-analtyics-tracking]");if(segmentDataElement){var dataProductId=segmentDataElement.getAttribute("data-product-id");var dataProductName=segmentDataElement.getAttribute("data-product-name");var dataProductImageURL=segmentDataElement.getAttribute("data-product-image-url");var analyticsObject={"share_via":shareType,"url":shareURL,"product_id":dataProductId,"name":dataProductName,"image_url":dataProductImageURL};return analyticsObject;}else{return null;}}}
criterion.ShowFootnote=function(rootElement){this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);},criterion.ShowFootnote.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);var closeButton=document.querySelector('[data-footnote-container-close]');closeButton.addEventListener("click",this._handleClose);},_handleClick:function(evt){evt.preventDefault();evt.stopPropagation();var footnoteText=this.rootElement.nextElementSibling.innerHTML;var footnoteContainer=document.querySelector('[data-footnote-container]');var footnoteContainerText=document.querySelector('[data-footnote-container-text]');var yPosition=evt.pageY+20;var rowClasses=this.rootElement.parentElement.parentElement.parentElement.classList;var mediumSizedWindow=(1280>window.innerWidth)&&(window.innerWidth>960);if(rowClasses.contains('pk-o-related-row--tout-right')&&mediumSizedWindow){footnoteContainer.style="display: block; position: absolute; top: "+yPosition+"px; right: 46vw;";}else if(rowClasses.contains('pk-o-related-row--tout-left')&&mediumSizedWindow){footnoteContainer.style="display: block; position: absolute; top: "+yPosition+"px; right: 16vw;";}else{footnoteContainer.style="display: block; position: absolute; top: "+yPosition+"px";}
footnoteContainerText.innerHTML=footnoteText;},_handleClose:function(evt){var footnoteContainer=document.querySelector('[data-footnote-container]');footnoteContainer.style="display: none";}}
criterion.Sidebar=function(rootElement){this.rootElement=rootElement;this.pageContentElement=document.querySelector("body");this.globalLinksElement=document.querySelector('.c-global-links');this.sidebarType=this.rootElement.getAttribute('data-sidebar')||'';this.toggleElements=document.querySelectorAll('[data-sidebar-toggle='+this.sidebarType+']');this.closeElements=document.querySelectorAll('[data-sidebar-close='+this.sidebarType+']');this._toggleElementClickHandler=this._handleToggleElementClick.bind(this);this._closeElementClickHandler=this._handleCloseElementClick.bind(this);this._windowClickHandler=this._handleWindowClick.bind(this);this._isIn=false;}
criterion.Sidebar.prototype={init:function(){var me=this;forEach(this.toggleElements,function(index,toggle){toggle.addEventListener("click",me._toggleElementClickHandler);})
if(this.closeElements){forEach(this.closeElements,function(index,close){close.addEventListener("click",me._closeElementClickHandler);})}
this._clickContainer=this.rootElement.querySelector("[data-sidebar-click-container]");},hideGlobalLinks:function(){this.globalLinksElement.classList.add('linksFadeOut');this.globalLinksElement.classList.remove('linksFadeIn');},showGlobalLinks:function(){this.globalLinksElement.classList.add('linksFadeIn');this.globalLinksElement.classList.remove('linksFadeOut');},closePanels:function(cb){var cartClosed=new $.Deferred();var dropdownsClosed=new $.Deferred();var sidebarsClosed=new $.Deferred();var $body=$(this.pageContentElement);if($body.hasClass('is-expanded-panel-in')){criterion.globalCart.animateOut(function(){cartClosed.resolve();});forEach(criterion.navDropdowns,function(index,dropdown){dropdown.animateOut(function(){if((index+1)>=criterion.navDropdowns.length){dropdownsClosed.resolve();}});});}else{cartClosed.resolve();dropdownsClosed.resolve();}
if($body.is('.is-search-in, .is-nav-in')){forEach(criterion.sidebars,function(index,sidebar){sidebar.animateOut(function(){if((index+1)>=criterion.sidebars.length){sidebarsClosed.resolve();}});});}else{sidebarsClosed.resolve();}
$.when(cartClosed,dropdownsClosed,sidebarsClosed).done(function(){return cb();});},lockBody:function(sidebarState){sidebarState=sidebarState||'out';var position=sidebarState==='in'?'fixed':'static';var overflowY=sidebarState==='in'?'scroll':'auto';if(!$(this.pageContentElement).hasClass('page__home')){this.pageContentElement.style.position=position;this.pageContentElement.style.overflowY=overflowY;}},animateIn:function(){this.hideGlobalLinks();var me=this;this.closePanels(function(){me.lockBody('in');me.rootElement.classList.add("in");document.body.classList.add("is-"+me.sidebarType+"-in");me.dispatchEvent({type:"in"});delay(50).then(function(){me.rootElement.classList.add("is-in");});window.addEventListener("click",me._windowClickHandler);});var $body=$(this.pageContentElement);if($body.is('.is-search-in')){$('[data-global-search-user-input]').focus();}},animateOut:function(cb){this.showGlobalLinks();this.lockBody('out');var pageContainer=document.querySelector(".page-contain");prefix(pageContainer,"transform","");this.rootElement.classList.remove("is-in");document.body.classList.remove("is-"+this.sidebarType+"-in");window.scrollTo(0,this._scrollTop);window.removeEventListener("click",this._windowClickHandler);this.dispatchEvent({type:"out"});var me=this;delay(500).then(function(){me.rootElement.classList.remove("in");cb();});},_handleToggleElementClick:function(evt){evt.preventDefault();evt.stopPropagation();this.animateIn();return;},_handleCloseElementClick:function(evt){evt.preventDefault();evt.stopPropagation();this.animateOut();return;},_handleWindowClick:function(evt){var target=evt.target;var isWithin=false;while(target&&!isWithin){isWithin=(target==this._clickContainer);target=target.parentNode;}
if(!isWithin){this.animateOut();}}}
Object.assign(criterion.Sidebar.prototype,EventDispatcher.prototype);criterion.SimpleGallery=function(rootElement,options){this._CAPTION_MAX_WIDTH=800;this.rootElement=rootElement;this.options=options;this._slideUpdatedHandler=this._handleSlideUpdated.bind(this);this._slideCellChangedHandler=this._handleSlideCellChanged.bind(this);this._windowResizeListener=device.mobile()||device.tablet()?"orientationchange":"resize";this._windowResizeHandler=this._handleWindowResize.bind(this);}
criterion.SimpleGallery.prototype={init:function(){if(this.options.parentComponent&&this.options.count){this._parent=this.rootElement.closest(this.options.parentComponent);this._count=this._parent.querySelector(this.options.count);}
if(this.options.statusSelector){this._status=this.rootElement.querySelector(this.options.statusSelector);}
if(this.rootElement.hasAttribute("data-flickity-enable-at")){this._initializeAt=parseInt(this.rootElement.getAttribute("data-flickity-enable-at"));}
else{this._initializeAt=0;}
if(this.rootElement.hasAttribute("data-flickity-disable-at")){this._disableAt=parseInt(this.rootElement.getAttribute("data-flickity-disable-at"));}
else{this._disableAt=0;}
window.addEventListener(this._windowResizeListener,this._windowResizeHandler);this._handleWindowResize();this._initVideos();},_handleWindowResize:function(evt){var me=this;var enabled=true;if(this._initializeAt>0){enabled=window.innerWidth>this._initializeAt;}
else if(this._disableAt>0){enabled=window.innerWidth<=this._disableAt;}
if(!enabled){if(this._slider){this._slider.destroy();this._slider=null;}}
else{if(!this._slider){var options=Object.assign({},this.options);this._slider=new Flickity(this.rootElement,options);this._slider.on("select",this._slideUpdatedHandler);this._slider.on("cellChange",this._slideCellChangedHandler);this._slideUpdatedHandler();}}
var slides=this.rootElement.querySelectorAll(this.options.cellSelector);var slideCount=slides.length;forEach(slides,function(idx,slide){me._resizeCaptionForSlide(idx,slide);});},_handleSlideCellChanged:function(idx){if(this._slider){this._resizeCaptionForSlide(idx,this._slider.cells[idx].element);}},_handleSlideUpdated:function(){var cellNumber=this._slider.selectedIndex+1;var text=cellNumber+' / '+this._slider.cells.length;if(this._status){this._status.innerText=text;}
if(this._count){this._count.innerText=text;}
var tracking=new criterion.Analytics();tracking.trackEvent("Carousel","swipe",document.title,this._slider.selectedIndex);},_resizeCaptionForSlide:function(idx,slideElement){var caption=slideElement.querySelector(".gallery-caption");var tools=slideElement.querySelector(".gallery-tools");var targetElement=slideElement.querySelector(".gallery-item video");if(!targetElement){targetElement=slideElement.querySelector(".gallery-item img");}
if(!targetElement){targetElement=slideElement.querySelector(".gallery-item iframe");}
if(caption&&targetElement){var w=Math.min(targetElement.clientWidth,viewportWidth());w=Math.min(this._CAPTION_MAX_WIDTH,w);w=Math.min(this._slider.element.clientWidth,w);if(viewportWidth()<768){w=targetElement.clientWidth;}
caption.style.width=w+"px";tools.style.width=w+"px";}
if(idx==0&&targetElement){this._repositionArrows(targetElement.clientHeight);}},_initVideos:function(){if(device.mobile()||device.tablet()){return;}
Logger.log("SimpleGallery :: Checking for any videos to initialize...");var me=this;var videoItems=this.rootElement.querySelectorAll("[data-video-info]")
forEach(videoItems,function(_,item){me._initVideo(item);});if(videoItems.length>0){delay(500).then(function(){if(me._slider){me._slider.reposition();}});}},_initVideo:function(el){Logger.log("SimpleGallery :: Initializing Video.");var json=JSON.parse(el.getAttribute("data-video-info"));var video=document.createElement("video");if(video.canPlayType("video/webm")){video.src=json["webm"];}
else{video.src=json["mp4"];}
video.setAttribute("autoplay",true);video.setAttribute("loop",true);video.setAttribute("preload","auto");video.setAttribute("muted",true);video.setAttribute("width",320);video.setAttribute("height",240);video.classList.add("gallery-video");el.parentNode.appendChild(video);el.style.display="none";var slideElement=$(el).closest(this.options.cellSelector)[0];var slideObject=this._slider.cells.map(function(cell,idx){return{idx:idx,slide:cell.element};}).filter(function(obj){return obj.slide===slideElement;})[0];if(slideObject){this._resizeCaptionForSlide(slideObject.idx,slideObject.slide);}},_repositionArrows:function(imageHeight){if(this.options.centerPrevNextToSelector){var centerer=this.rootElement.querySelector(this.options.centerPrevNextToSelector);if(centerer){var padding=viewportWidth()<=768?this.options.centerPrevNextOffset["mobile"]:this.options.centerPrevNextOffset["desktop"];var height=(imageHeight/2)+padding;var buttons=this.rootElement.querySelectorAll(".flickity-prev-next-button");forEach(buttons,function(_,button){if(!button.hasAttribute("data-is-centered-by-simple-gallery")){button.setAttribute("data-is-centered-by-simple-gallery",true);}
button.style.top=height+"px";});}}}};criterion.StickyColumns=function(rootElement){this._MINIMUM_WIDTH_TO_ENABLE=768;this._ACTIVE_CLASS_NAME="is-sticky-active";this._FINISH_CLASS_NAME="is-sticky-finished";this._SHIM_CLASS_NAME="is-sticky-clone-shim";this.rootElement=rootElement;this._windowResizeListener=device.mobile()||device.tablet()?"orientationchange":"resize";this._windowResizeHandler=this._handleWindowResize.bind(this);this._windowScrollListener="scroll";this._windowScrollHandler=this._handleWindowScroll.bind(this);}
criterion.StickyColumns.prototype={init:function(){this._leftEnd=this.rootElement.querySelector("[data-sticky-left-end]");this._rightEnd=this.rootElement.querySelector("[data-sticky-right-end]");this._leftColumn=this.rootElement.querySelector("[data-sticky-column-left]");this._rightColumn=this.rootElement.querySelector("[data-sticky-column-right]");this._leftContentEnd=this.rootElement.querySelector("[data-sticky-left-content-end]");this._rightContentEnd=this.rootElement.querySelector("[data-sticky-right-content-end]");window.addEventListener(this._windowScrollListener,this._windowScrollHandler);window.addEventListener(this._windowResizeListener,this._windowResizeHandler);this.enable();this._handleWindowResize();},enable:function(){this._isEnabled=true;if(this._wasResized){this._wasResized=false;this._handleWindowResize();}},disable:function(){this._isEnabled=false;},_handleWindowResize:function(evt){if(!this._isEnabled){this._wasResized=true;return;}
this._setToStartPosition({side:"left"});this._setToStartPosition({side:"right"});if(window.innerWidth<this._MINIMUM_WIDTH_TO_ENABLE){return;}
this._leftEndRect=getDimensionsForElement(this._leftEnd);this._leftColumnRect=getDimensionsForElement(this._leftColumn);this._leftContentEndRect=getDimensionsForElement(this._leftContentEnd);this._rightEndRect=getDimensionsForElement(this._rightEnd);this._rightColumnRect=getDimensionsForElement(this._rightColumn);this._rightContentEndRect=getDimensionsForElement(this._rightContentEnd);var leftEndPos=this._leftContentEndRect.top+this._leftContentEndRect.height;var rightEndPos=this._rightContentEndRect.top+this._rightContentEndRect.height;if(leftEndPos===rightEndPos){this._stickySide="neither";this._nonStickySide="neither";}
else{this._stickySide=(leftEndPos<rightEndPos)?"left":"right";this._nonStickySide=(this._stickySide=="left")?"right":"left";}
this._wasResized=true;this._handleWindowScroll();},_handleWindowScroll:function(evt){if(window.innerWidth<=768){return;}
if(this._isTicking){return;}
this._isTicking=true;var me=this;if(criterion.Constants.IS_MICROSOFT_BROWSER){setTimeout(function(){me._scrollUpdated();me._isTicking=false;},100);}
else{requestAnimationFrame(function(){me._scrollUpdated();me._isTicking=false;});}},_scrollUpdated:function(){if(!this._isEnabled){return;}
if(this._stickySide!="left"&&this._stickySide!="right"){return;}
var y=scrollY();var vh=viewportHeight();var endRect=this["_"+this._stickySide+"EndRect"];var columnRect=this["_"+this._stickySide+"ColumnRect"];var nonStickyEndRect=this["_"+this._nonStickySide+"EndRect"];var nonStickyColumnRect=this["_"+this._nonStickySide+"ColumnRect"];var triggerY=endRect.bottom-y-vh;var effectEndY=(nonStickyColumnRect.bottom-y-vh);if(triggerY<=0){if(effectEndY<=0){this._finishedSticking();return;}
this._stickInPlace();}
else if(triggerY>0){this._setToStartPosition();}
if(this._wasResized&&this._isEnabled){this._wasResized=false;this._resizeStickyColumn();}},_createShimElement:function(){this._killShimElement();var columnElement=this["_"+this._stickySide+"Column"];this._clonedColumn=columnElement.cloneNode(false);this._clonedColumn.style.position="";this._clonedColumn.style.width="";this._clonedColumn.style.top="";this._clonedColumn.classList.add(this._SHIM_CLASS_NAME);var parentNode=columnElement.parentNode;parentNode.insertBefore(this._clonedColumn,columnElement);parentNode.removeChild(columnElement);this._clonedColumn.appendChild(columnElement);},_killShimElement:function(){if(this._clonedColumn){var c=this._clonedColumn.firstChild;this._clonedColumn.removeChild(c);var parentNode=this._clonedColumn.parentNode;parentNode.insertBefore(c,this._clonedColumn);parentNode.removeChild(this._clonedColumn);this._clonedColumn=null;}},_setToStartPosition:function(options){var stickySide=this._stickySide;if(options&&options.side){stickySide=options.side;}
if(stickySide!="left"&&stickySide!="right"){return;}
var columnElement=this["_"+stickySide+"Column"];if(columnElement.classList.contains(this._FINISH_CLASS_NAME)||columnElement.classList.contains(this._ACTIVE_CLASS_NAME)){this._killShimElement();columnElement.classList.remove(this._ACTIVE_CLASS_NAME);columnElement.classList.remove(this._FINISH_CLASS_NAME);columnElement.style.position="";columnElement.style.width="";columnElement.style.top="";}},_stickInPlace:function(){var columnElement=this["_"+this._stickySide+"Column"];if(columnElement.classList.contains(this._FINISH_CLASS_NAME)){columnElement.classList.remove(this._FINISH_CLASS_NAME);columnElement.classList.remove(this._ACTIVE_CLASS_NAME);}
if(!columnElement.classList.contains(this._ACTIVE_CLASS_NAME)){this._createShimElement();var endRect=this["_"+this._stickySide+"EndRect"];var columnRect=this["_"+this._stickySide+"ColumnRect"];var contentEndRect=this["_"+this._stickySide+"ContentEndRect"];columnElement.classList.add(this._ACTIVE_CLASS_NAME);columnElement.style.position="fixed";var vh=viewportHeight();var y=(columnRect.top-columnRect.marginTop)-(endRect.bottom-vh);columnElement.style.top=y+"px";this._resizeStickyColumn();}},_finishedSticking:function(){var columnElement=this["_"+this._stickySide+"Column"];if(!columnElement.classList.contains(this._FINISH_CLASS_NAME)){this._createShimElement();var columnRect=this["_"+this._stickySide+"ColumnRect"];var contentEndRect=this["_"+this._stickySide+"ContentEndRect"];var endRect=this["_"+this._stickySide+"EndRect"];var nonStickyRect=this["_"+this._nonStickySide+"ColumnRect"];var nonStickyEndRect=this["_"+this._nonStickySide+"EndRect"];var nonStickyContentEndRect=this["_"+this._nonStickySide+"ContentEndRect"];var offset=columnElement.getAttribute("data-sticky-offset")||0;var y=Number(offset)+(nonStickyEndRect.bottom-endRect.bottom)+endRect.marginBottom;columnElement.classList.add(this._FINISH_CLASS_NAME);columnElement.style.position="absolute";columnElement.style.top=y+"px";this._resizeStickyColumn();}},_resizeStickyColumn:function(){var columnElement=this["_"+this._stickySide+"Column"];if(columnElement.classList.contains(this._ACTIVE_CLASS_NAME)||columnElement.classList.contains(this._FINISH_CLASS_NAME)){if(!this._clonedColumn){Logger.warn("Trying to resize Sticky Element but it's not in a clone? Ignoring.");Logger.log(columnElement);Logger.log(this._stickySide);return;}
columnElement.style.width=this._clonedColumn.offsetWidth+"px";}}}
criterion.StickyNav=function(originalElement){this.originalElement=originalElement;this._lastScrollY=0;this._isTicking=false;this._windowScrollListener="scroll";this._windowScrollHandler=this._handleWindowScroll.bind(this);this._navClickHandler=this._handleNavClick.bind(this);this._searchClickHandler=this._handleSearchClick.bind(this);this._cartClickHandler=this._handleCartClick.bind(this);}
criterion.StickyNav.prototype={init:function(){if(document.querySelector(".page__home")||document.querySelector('.criterion-channel')){return;}
this.rootElement=this.originalElement.cloneNode(true);this.rootElement.classList.add("is-sticky-nav");this.rootElement.classList.remove("dark");this.originalElement.parentNode.appendChild(this.rootElement);this.rootElement.querySelector(".but-search").addEventListener("click",this._searchClickHandler);this.rootElement.querySelector(".but-cart").addEventListener("click",this._cartClickHandler);this.rootElement.querySelector(".but-mobi").addEventListener("click",this._navClickHandler);window.addEventListener(this._windowScrollListener,this._windowScrollHandler);},_handleNavClick:function(evt){evt.preventDefault();evt.stopPropagation();this.dispatchEvent({type:"click",state:"nav"});this.animateOut();return false;},_handleSearchClick:function(evt){evt.preventDefault();evt.stopPropagation();this.dispatchEvent({type:"click",state:"search"});this.animateOut();return false;},_handleCartClick:function(evt){evt.preventDefault();evt.stopPropagation();this.dispatchEvent({type:"click",state:"cart"});return false;},_handleWindowScroll:function(evt){if(this._isTicking){return;}
this._isTicking=true;var me=this;setTimeout(function(){me._scrollUpdated();me._isTicking=false;},500);},_scrollUpdated:function(){var y=scrollY();var vh=viewportHeight();var scrollDelta=y-this._lastScrollY;if(scrollDelta>0||this._isAtTopOfScreen()){this._animateOut();}
else if(scrollDelta<-200){this._animateIn();}
this._lastScrollY=y;},_isAtTopOfScreen:function(){var y=scrollY();return y<this.rootElement.offsetHeight+130;},animateIn:function(){if(this._isAtTopOfScreen()||this.rootElement.classList.contains("is-in")){return Promise.resolve();}
return this._animateIn();},_animateIn:function(){var me=this;return new Promise(function(fulfill,reject){if(!me.rootElement.classList.contains("is-in")){me.rootElement.classList.add("is-in");}
delay(1).then(function(){fulfill();});});},animateOut:function(){return this._animateOut();},_animateOut:function(){var me=this;return new Promise(function(fulfill,reject){if(me.rootElement.classList.contains("is-in")){setTimeout(function(){me.rootElement.classList.remove("is-in");},300);}
delay(1).then(function(){fulfill();});});}},Object.assign(criterion.StickyNav.prototype,EventDispatcher.prototype);criterion.StoreDirection=function(rootElement){this.rootElement=rootElement;this._clickHandler=this._handleClick.bind(this);}
criterion.StoreDirection.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);},_isOn:function(){return true;},_handleClick:function(evt){var direction=this.rootElement.getAttribute('data-store-direction');var oppositeDirection=(direction=='asc')?'desc':'asc';var regex=/direction=([a-zA-Z0-9-_]*)/;var location=document.location.href;var isOnParamString='&isOn=true';var paramString='direction='+direction;evt.preventDefault();if(!this._isOn()){paramString+=isOnParamString;}else{location=location.replace(isOnParamString,'');}
if(direction){if(regex.test(location)){document.location=location.replace(regex,paramString);}
else if(location.indexOf("?")>-1){document.location=location+"&"+paramString;}
else{document.location=location+"?"+paramString;}
this.rootElement.setAttribute('data-store-direction',oppositeDirection);}}}
criterion.StoreFilters=function(rootElement,openElement){this._ROUTE=criterion.Constants.ROUTES.STORE_FILTER_RESULTS;this._DELAY_BEFORE_UPDATING_TOTAL_RESULTS=250;this.rootElement=rootElement;this.openElement=openElement;this._openClickHandler=this._handleOpenClick.bind(this);this._closeClickHandler=this._handleCloseClick.bind(this);this._resetClickHandler=this._handleResetClick.bind(this);this._applyClickHandler=this._handleApplyClick.bind(this);this._filterClickHandler=this._handleFilterClick.bind(this);this._mobileBackButtonClickHandler=this._handleMobileBackButtonClick.bind(this);this._mobileGroupClickHandler=this._handleMobileGroupClick.bind(this);this._viewAllDirectorsCLickHandler=this._handleViewAllDirectorsClick.bind(this);this._windowResizeListener=device.mobile()||device.tablet()?"orientationchange":"resize";this._windowResizeHandler=this._handleWindowResize.bind(this);this._scrollListener="scroll";this._scrollHandler=this._handleScroll.bind(this);}
criterion.StoreFilters.prototype={init:function(){var me=this;this._filterCheckboxes=this.rootElement.querySelectorAll(".filter-group-option input[type=checkbox]");this._menuItems=this.rootElement.querySelectorAll(".filter-title");forEach(this._filterCheckboxes,function(_,filterCheckbox){filterCheckbox.addEventListener("click",me._filterClickHandler);});var queries=this._convertQuerystringToJSON();if(queries!=={}){var keys=Object.keys(queries);forEach(keys,function(_,key){if(typeof queries[key]==='string'){var element=me.rootElement.querySelector('.filter-group-option input[value="'+queries[key]+'"][name="'+key+'"]');if(element){element.checked=true;}}else if(queries[key].length){forEach(queries[key],function(_,value){var element=me.rootElement.querySelector('.filter-group-option input[value="'+value+'"][name="'+key+'"]')
if(element){element.checked=true;}});}});}
this._initialFilters=this._getActiveFilters();this._activeFilters=this._getActiveFilters();this._results=this.rootElement.querySelectorAll(".is-results-total");this._trough=this.rootElement.querySelector(".filter-trough");this._troughGroups=[];this._rightHeadEl=this.rootElement.querySelector(".filter-right-head");var me=this;forEach(this.rootElement.querySelectorAll("[data-filter-anchor]"),function(idx,anchorElement){var group={};group.name=anchorElement.getAttribute("data-filter-anchor");group.index=idx;group.anchorElement=anchorElement;group.groupElement=me.rootElement.querySelector("[data-filter-group="+group.name+"]");group.anchorElement.addEventListener("click",me._mobileGroupClickHandler);me._troughGroups.push(group);});this.openElement.addEventListener("click",this._openClickHandler);this.rootElement.querySelector("[data-filter-close-button]").addEventListener("click",this._closeClickHandler);this.rootElement.querySelector("[data-is-apply-button]").addEventListener("click",this._applyClickHandler);this.rootElement.querySelector("[data-is-reset-button]").addEventListener("click",this._resetClickHandler);if(!document.querySelector(".criterion-channel")){if(this.rootElement.querySelector("[data-is-view-all-directors-button]")){this.rootElement.querySelector("[data-is-view-all-directors-button]").addEventListener("click",this._viewAllDirectorsCLickHandler);}}
var me=this;forEach(this.rootElement.querySelectorAll("[data-filter-group-back-button]"),function(_,button){button.addEventListener("click",me._mobileBackButtonClickHandler);});this._updateMenuDots();},_animateIn:function(){if(this.rootElement.classList.contains("off")){this.rootElement.classList.remove("off");}
if(!this.rootElement.classList.contains("on")){this.rootElement.classList.add("on");}
this._lastScrollY=scrollY();document.body.classList.add("modal-on");document.body.classList.add("modal");document.body.style.top=this._lastScrollY+"px";var me=this;delay(100).then(function(){me.rootElement.querySelector(".left").classList.add("is-in");});delay(500+(100*this._troughGroups.length)).then(function(){me.rootElement.classList.add("is-in");});this.rootElement.addEventListener(this._scrollListener,this._scrollHandler);window.addEventListener(this._windowResizeListener,this._windowResizeHandler);this._handleWindowResize();},_animateOut:function(){this.rootElement.removeEventListener(this._scrollListener,this._scrollHandler);window.removeEventListener(this._windowResizeListener,this._windowResizeHandler);this.rootElement.classList.add("is-out");var me=this;delay(250).then(function(){me.rootElement.classList.add("is-really-out");});delay(500).then(function(){me._animateOutCompleted();})},_animateOutCompleted:function(){if(!this.rootElement.classList.contains("off")){this.rootElement.classList.add("off");}
if(this.rootElement.classList.contains("on")){this.rootElement.classList.remove("on");}
document.body.style.position="";document.body.style.top="";document.body.style.overflow="";window.scrollTo(0,this._lastScrollY);document.body.classList.remove("modal-on");document.body.classList.remove("modal");this.rootElement.classList.remove("is-in");this.rootElement.classList.remove("is-out");this.rootElement.classList.remove("is-really-out");this.rootElement.querySelector(".left").classList.remove("is-in");},_requestUpdatedTotalResults:function(){var me=this;firstly(function(){return me._xhrRequest(me._ROUTE+me._getActiveFiltersAsQueryString());}).then(function(json){return me._updateTotalResults(json);}).catch(function(err){Logger.warn(err);});},_convertQuerystringToJSON:function(){if(location.search){var pairs=location.search.slice(1).split('&');var result={};pairs.forEach(function(pair){pair=pair.split('=');if(pair[1].split(',').length>1){result[pair[0]]=pair[1].split(',')}else{result[pair[0]]=decodeURIComponent(pair[1]||'');}});return JSON.parse(JSON.stringify(result));}else{return{};}},_xhrRequest:function(endpoint){var me=this;return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});},_updateTotalResults:function(json){if(json["code"]!=200){return Promise.reject(new Error(json));}
var total=json["data"]["total"];forEach(this._results,function(_,el){var totalEl=el.querySelector(".filter-total");var textEl=el.querySelector(".filter-result-txt");if(total==0){totalEl.innerText="";textEl.innerText="No Results";}
else if(total==1){totalEl.innerText=total;textEl.innerText="Result";}
else{totalEl.innerText=total;textEl.innerText="Results";}});return Promise.resolve();},_getActiveFilters:function(){var filters={};forEach(this._filterCheckboxes,function(_,filterCheckbox){if(filterCheckbox.checked===true){var name=filterCheckbox.getAttribute("name");var value=filterCheckbox.getAttribute("value");if(!filters[name]){filters[name]=[];}
filters[name].push(value);}});return filters;},_getActiveFiltersAsQueryString:function(){var filters=this._activeFilters;var query="?";for(var key in filters){if(filters[key]&&filters[key].length>0){query+=key+"="+filters[key].join(",")+"&";}}
var url_string=window.location.href;var url=new URL(url_string);var geo=url.searchParams.get('geo_availability');if(geo){query=query+'geo_availability='+geo+'&';}
query=query.slice(0,-1);return query;},_resetFilters:function(){var initialFilters=this._initialFilters;var updated=false;var me=this;forEach(this._filterCheckboxes,function(_,filterCheckbox){filterCheckbox.checked=false;});this._activeFilters=this._getActiveFilters();this._filtersUpdated();},_handleFilterClick:function(evt){var filterCheckbox=evt.target;var name=filterCheckbox.getAttribute("name");var value=filterCheckbox.getAttribute("value");if(!this._activeFilters[name]){this._activeFilters[name]=[];}
if(filterCheckbox.checked==true){if(this._activeFilters[name].indexOf(value)===-1){this._activeFilters[name].push(value);}}
else{var idx=this._activeFilters[name].indexOf(value);if(idx>-1){this._activeFilters[name].splice(idx,1);}}
if(!evt.skipUpdate){this._filtersUpdated();}},_filtersUpdated:function(){Logger.log(this._activeFilters);this._updateMenuDots();if(this._delayedRequestForUpdatedTotals){this._delayedRequestForUpdatedTotals.cancel();}
this._delayedRequestForUpdatedTotals=delay(this._DELAY_BEFORE_UPDATING_TOTAL_RESULTS);var me=this;firstly(function(){return me._delayedRequestForUpdatedTotals;}).then(function(){return me._requestUpdatedTotalResults();}).catch(function(err){Logger.log("Store Filters :: Delayed Request for Updated Totals Cancelled.");});},_updateMenuDots:function(){var filters=this._activeFilters;forEach(this._menuItems,function(_,menuItem){var key=menuItem.getAttribute("data-filter-anchor");var a=menuItem.querySelector("a");if(filters[key]&&filters[key].length>0){if(!a.classList.contains("on")){a.classList.add("on");}}
else if(a.classList.contains("on")){a.classList.remove("on");}});},_handleViewAllDirectorsClick:function(evt){evt.preventDefault();evt.stopPropagation();this.rootElement.querySelector(".is-full-director-list").classList.toggle("hide");this._handleWindowResize();return;},_handleWindowResize:function(){this._rightHeadRect=getDimensionsForElement(this._rightHeadEl);var me=this;forEach(this._troughGroups,function(_,group){group.anchorRect=getDimensionsForElement(group.anchorElement);group.groupRect=getDimensionsForElement(group.groupElement);group.groupRect.top+=me.rootElement.scrollTop;group.groupRect.bottom+=me.rootElement.scrollTop;});this._handleScroll();},_handleScroll:function(evt){if(this._isTicking){return;}
this._isTicking=true;var me=this;if(criterion.Constants.IS_MICROSOFT_BROWSER){setTimeout(function(){me._scrollUpdated();me._isTicking=false;},100);}
else{requestAnimationFrame(function(){me._scrollUpdated();me._isTicking=false;});}},_scrollUpdated:function(){var y=this.rootElement.scrollTop+this._rightHeadRect.height;var vh=viewportHeight();var firstIndex=-1;var lastIndex=-1;Logger.log(this._troughGroups[3].groupRect.bottom);forEach(this._troughGroups,function(idx,group){var top=group.groupRect.top-y;var bottom=group.groupRect.bottom-y;var isWithinViewport=(top>0&&top<vh)||(bottom<vh&&bottom>0)||(top<0&&bottom>vh)
if(isWithinViewport&&firstIndex==-1){firstIndex=idx;}
if(isWithinViewport&&(lastIndex==-1||lastIndex<idx)){lastIndex=idx;}});if(firstIndex==-1){Logger.warn("StoreFilters :: Nothing is within the viewport.");firstIndex=0;}
if(lastIndex==-1){lastIndex=0;}
var yStart=this._troughGroups[firstIndex].anchorRect.top;var yEnd=this._troughGroups[lastIndex].anchorRect.bottom;var height=yEnd-yStart;var yScale=height/vh;this._trough.style.height=height+"px";this._trough.style.top=yStart+"px";},_handleMobileGroupClick:function(evt){if(!device.mobile()){return;}
evt.preventDefault();evt.stopPropagation();var target=evt.target;var group=false;while(target&&group==false){if(target.hasAttribute("data-filter-anchor")){group=target.getAttribute("data-filter-anchor");};target=target.parentNode;}
this.rootElement.querySelector(".filter-titles").classList.add("is-filter-group-in");this.rootElement.querySelector(".filter-group[data-filter-group="+group+"]").classList.add("is-in");return;},_handleMobileBackButtonClick:function(evt){evt.preventDefault();evt.stopPropagation();this.rootElement.querySelector(".filter-group.is-in").classList.remove("is-in");this.rootElement.querySelector(".filter-titles").classList.remove("is-filter-group-in");return;},_handleOpenClick:function(evt){evt.preventDefault();evt.stopPropagation();this._animateIn();return;},_handleCloseClick:function(evt){evt.preventDefault();evt.stopPropagation();this._animateOut();return;},_handleApplyClick:function(evt){evt.preventDefault();evt.stopPropagation();var url=this.rootElement.getAttribute("data-store-filters");var query=this._getActiveFiltersAsQueryString();if(url.indexOf("?")>-1){query=query.replace("?","&");}
document.location=url+query;return;},_handleResetClick:function(evt){evt.preventDefault();evt.stopPropagation();this._resetFilters();return;}}
criterion.StoreSorting=function(rootElement){this.rootElement=rootElement;this._changeHandler=this._handleChange.bind(this);}
criterion.StoreSorting.prototype={init:function(){this.rootElement.addEventListener("change",this._changeHandler);},_handleChange:function(evt){var sortOption=this.rootElement.value;var regex=/sort=([a-zA-Z0-9-_]*)/;var location=document.location.href;if(sortOption){if(regex.test(location)){document.location=location.replace(regex,"sort="+sortOption);}
else if(location.indexOf("?")>-1){document.location=location+"&sort="+sortOption;}
else{document.location=location+"?sort="+sortOption;}}}}
criterion.Toggle=function(rootElement,options){this.rootElement=rootElement
this.options=options||{};this._clickHandler=this._handleClick.bind(this);}
criterion.Toggle.prototype={init:function(){this.rootElement.addEventListener("click",this._clickHandler);this.targetElement=this.options.targetElement||this.rootElement;this.toggleClass=this.options.toggleClass||"on";this.targetElement.classList.toggle(this.toggleClass);},_handleClick:function(evt){evt.preventDefault();this.targetElement.classList.toggle(this.toggleClass);}}
criterion.VideoPlayer=function(rootElement){this.rootElement=rootElement;this._videoOptionClickHandler=this._handleVideoOptionClick.bind(this);this._videoPlayerReadyHandler=this._handleVideoPlayerReady.bind(this);this._players={};}
criterion.VideoPlayer.prototype={init:function(){this._containerElement=this.rootElement.querySelector("[data-video-player-container]");this._videoOptionElements=this.rootElement.querySelectorAll("[data-video-player-options]");Logger.log("VideoPlayer :: Init.");var me=this;forEach(this._videoOptionElements,function(_,videoOptionElement){videoOptionElement.addEventListener("click",me._videoOptionClickHandler);});},_queryForAncestor:function(pointer,selector){var target=false;while(pointer&&!target){if((pointer.hasAttribute&&pointer.hasAttribute(selector))||(pointer.classList&&pointer.classList.contains(selector))){target=pointer;break;}
pointer=pointer.parentNode;}
return target;},_handleVideoOptionClick:function(evt){var mobileFlag=document.querySelector('[data-mobile-flag]');var mobileFlagStyle=getComputedStyle(mobileFlag).display;if(mobileFlagStyle==='none'){evt.preventDefault();var videoOptionElement=this._queryForAncestor(evt.target,"data-video-player-options");var selectedIndex=-1;forEach(this._videoOptionElements,function(idx,element){if(videoOptionElement==element){selectedIndex=idx;}});if(selectedIndex==-1){Logger.warn("VideoPlayer :: Failed to find video element. Ignoring.");return;}
this._playVideo(selectedIndex,true);this._selectVideoOptionElement(selectedIndex);}},_playVideoInPlayer:function(type,videoId,autoplay){var player=this._players[type];if(!player){player=this._createPlayer(type);}
forEach(this._containerElement.querySelectorAll(".player"),function(_,playerDiv){playerDiv.style.display="none";});if(autoplay){if(type=="vimeo"){player.loadVideo(videoId).then(function(){player.play();});}
else if(type=="youtube"){player.loadVideoById(videoId);player.playVideo();}}
this._containerElement.querySelector("."+type).style.display="block";},_createPlayer:function(type,videoId,autoplay){var div=document.createElement("div");div.classList.add("player");div.classList.add(type);div.style.display="none";this._containerElement.appendChild(div);var player;if(type=="vimeo"){var params={id:videoId,width:640,loop:false,autoplay:autoplay};player=new Vimeo.Player(div,params);}
else if(type=="youtube"){var params={videoId:videoId,width:640,playerVars:{autoplay:autoplay?1:0},events:{"onReady":this._videoPlayerReadyHandler}}
player=new YT.Player(div,params);}
this._players[type]=player;return player;},_playVideo:function(idx,autoplay){var player=this._containerElement.querySelector(".fluid-width-video-wrapper");var videoContainer=this.rootElement.querySelector("[data-video-player-container]");var videoImageOverlay=this.rootElement.querySelector("[data-video-player-image-overlay]");videoImageOverlay.style.display='none';videoContainer.style.display='block';emptyElement(player);var options=JSON.parse(this._videoOptionElements[idx].getAttribute("data-video-player-options"));if(options["embedCode"]){var html=stringDecodeHTMLEntities(options["embedCode"]);player.innerHTML=html;playerIframe=player.querySelector("iframe");var vimeoPlayer=new Vimeo.Player(playerIframe);vimeoPlayer.on('ended',function(){videoContainer.style.display='none';videoImageOverlay.style.display='block';});}
else{var iframe=document.createElement("iframe");iframe.setAttribute("frameborder","0");iframe.setAttribute("webkitallowfullscreen",true);iframe.setAttribute("mozallowfullscreen",true);iframe.setAttribute("allowfullscreen",true);if(options["type"]=="vimeo"){iframe.setAttribute("src","https://player.vimeo.com/video/"+options["id"]+"?autoplay=1");}
else if(options["type"]=="youtube"){iframe.setAttribute("src","https://www.youtube.com/embed/"+options["id"]+"?autoplay=1");}
player.appendChild(iframe);}
var tracking=new criterion.Analytics();tracking.trackEvent("Editorial Landing","video",options.id);},_selectVideoOptionElement:function(idx){forEach(this._videoOptionElements,function(idx,element){element.parentNode.classList.remove("is-currently-playing");});this._videoOptionElements[idx].parentNode.classList.add("is-currently-playing");},_handleVideoPlayerReady:function(){$(this._containerElement).fitVids();}}
criterion.modals.CommentsModal=function(type,position,options){criterion.Modal.call(this,type,position,{route:options.template+"?articleId="+options.id+"&articleType="+options.articleType});this._super=criterion.Modal.prototype;this.options=options;}
criterion.modals.CommentsModal.prototype=Object.assign(Object.create(criterion.Modal.prototype),{constructor:criterion.modals.CommentsModal,});criterion.modals.EditAccountModal=function(type,position,options){this._CHANGE_EMAIL_ROUTE=criterion.Constants.ROUTES.CHANGE_EMAIL_ROUTE;this._CHANGE_PASSWORD_ROUTE=criterion.Constants.ROUTES.CHANGE_PASSWORD_ROUTE;this._CHANGE_NAME_ROUTE=criterion.Constants.ROUTES.CHANGE_NAME_ROUTE;criterion.Modal.call(this,type,position,{route:options.template+"?articleId="+options.id});this._super=criterion.Modal.prototype;this.options=options;this._inputKeyDownHandler=this._handleInputKeydown.bind(this);this._emailSubmitClickHandler=this._handleEmailSubmitClick.bind(this);this._passwordSubmitClickHandler=this._handlePasswordSubmitClick.bind(this);this._nameSubmitClickHandler=this._handleNameSubmitClick.bind(this);}
criterion.modals.EditAccountModal.prototype=Object.assign(Object.create(criterion.Modal.prototype),{constructor:criterion.modals.EditAccountModal,_willAnimateIn:function(rootElement){this._super._willAnimateIn.call(this,rootElement);this._rootElement.querySelector("[data-change-email-form] .is-submit-button").addEventListener("click",this._emailSubmitClickHandler);this._rootElement.querySelector("[data-change-password-form] .is-submit-button").addEventListener("click",this._passwordSubmitClickHandler);this._rootElement.querySelector("[data-change-name-form] .is-submit-button").addEventListener("click",this._nameSubmitClickHandler);var me=this;forEach(this._rootElement.querySelectorAll("input"),function(_,input){input.addEventListener("keydown",me._inputKeyDownHandler);});},_handleInputKeydown:function(evt){this._clearError(evt.target);},_addError:function(rootElement,selector,errors){element=rootElement.querySelector(selector);element.parentNode.classList.add("error");var errorContainer=rootElement.querySelector("[data-error-container]");errorContainer.innerHTML="<p class='error'>"+errors+"</p>";},_clearError:function(element){element.parentNode.classList.remove("error");},_handleEmailSubmitClick:function(evt){evt.preventDefault();var rootElement=this._rootElement.querySelector("[data-change-email-form]");var email=rootElement.querySelector("[data-email-address]").value.trim();var emailVerify=rootElement.querySelector("[data-email-address-2]").value.trim();if(email!=emailVerify){this._addError(rootElement,"[data-email-address-2]","Email addresses don't match");return;}
var errors=validate.single(email,{presence:true,email:true});if(errors){this._addError(rootElement,"[data-email-address]",errors);return;}
var me=this;firstly(function(){return me._submitForm(me._CHANGE_EMAIL_ROUTE+"?email="+encodeURIComponent(email)+"&email_confirmation="+encodeURIComponent(emailVerify))}).then(function(json){if(json["code"]==200){var c=rootElement.querySelector("[data-error-container]");c.innerHTML="<p class='success'>Email Address Updated!</p>";var emailTag=document.querySelector("[data-users-email]");emailTag.innerHTML=email;}
else{var c=rootElement.querySelector("[data-error-container]");c.innerHTML="<p class='error'>"+json["data"]["message"]["error"]+"</p>";Logger.error(new Error("Error with changing email address for user :: "+json["data"]["message"]));}}).catch(function(err){Logger.warn(err);});},_handlePasswordSubmitClick:function(evt){evt.preventDefault();var rootElement=this._rootElement.querySelector("[data-change-password-form]");var pw=rootElement.querySelector("[data-password]").value.trim();var pwVerify=rootElement.querySelector("[data-password-2]").value.trim();if(pw!=pwVerify){this._addError(rootElement,"[data-password-2]","Passwords don't match");return;}
var errors=validate.single(pw,{presence:true,length:{minimum:8}});if(errors){this._addError(rootElement,"[data-password]","Password must have at least 8 characters");return;}
var me=this;firstly(function(){return me._submitForm(me._CHANGE_PASSWORD_ROUTE+"?password="+encodeURIComponent(pw)+"&password_confirmation="+encodeURIComponent(pwVerify))}).then(function(json){if(json["code"]==200){var c=rootElement.querySelector("[data-error-container]");c.innerHTML="<p class='success'>Password Updated!</p>";}
else{var c=rootElement.querySelector("[data-error-container]");c.innerHTML="<p class='error'>Password must have at least 8 characters</p>";Logger.error(new Error("Error with changing password for user :: "+json["data"]["message"]));}}).catch(function(err){Logger.warn(err);});},_handleNameSubmitClick:function(evt){evt.preventDefault();var rootElement=this._rootElement.querySelector("[data-change-name-form]");var firstName=rootElement.querySelector("[data-first-name]").value.trim();var lastName=rootElement.querySelector("[data-last-name]").value.trim();var firstNameError=validate.single(firstName,{presence:true,length:{minimum:2}});var lastNameError=validate.single(lastName,{presence:true,length:{minimum:2}});if(firstNameError){this._addError(rootElement,"[data-first-name]",firstNameError);return;}
if(lastNameError){this._addError(rootElement,"[data-last-name]",lastNameError);return;}
var me=this;firstly(function(){return me._submitForm(me._CHANGE_NAME_ROUTE+"?first_name="+encodeURIComponent(firstName)+"&last_name="+encodeURIComponent(lastName))}).then(function(json){if(json["code"]==200){var c=rootElement.querySelector("[data-error-container]");c.innerHTML="<p class='success'>Name Updated!</p>";var usersFullNameTag=document.querySelector("[data-users-full-name]");usersFullNameTag.innerHTML=firstName+" "+lastName;}
else{var c=rootElement.querySelector("[data-error-container]");c.innerHTML="<p class='error'>There was an error changing your name.</p>";Logger.error(new Error("Error with changing name for user :: "+json["data"]["message"]));}}).catch(function(err){Logger.warn(err);});},_submitForm:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("POST",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});}});criterion.modals.FormModal=function(type,position,options){criterion.Modal.call(this,type,position,{route:options.template});this._super=criterion.Modal.prototype;this.options=options;this._submitHandler=this._handleSubmit.bind(this);this._cancelHandler=this._handleCancel.bind(this);this._inputChangeHandler=this._handleInputChange.bind(this);this._isSubmitting=false;this._submitButton=false;this._contraints={};for(var key in this.options.fields){if(this.options.fields[key]["validates"]){this._contraints[key]=this.options.fields[key]["validates"];}}}
criterion.modals.FormModal.prototype=Object.assign(Object.create(criterion.Modal.prototype),{constructor:criterion.modals.FormModal,_willAnimateIn:function(rootElement){this._super._willAnimateIn.call(this,rootElement);this._form=this._rootElement.querySelector("[data-add-cc-form]");this._resetButton=this._rootElement.querySelector("[data-cc-reset-button]");this._error=this._rootElement.querySelector('.error');this._errorMessage=this._rootElement.querySelector('.message');this._rootElement.querySelector(".is-submit-button").addEventListener("click",this._submitHandler);this._rootElement.querySelector(".is-cancel-button").addEventListener("click",this._cancelHandler);for(var key in this.options.fields){this._rootElement.querySelector(this.options.fields[key]["selector"]).addEventListener("change",this._inputChangeHandler);this._rootElement.querySelector(this.options.fields[key]["selector"]).addEventListener("keydown",this._inputChangeHandler);}
if(this.type=='cc'){this._mountStripeElements();this._mountReCaptcha();}},_mountReCaptcha:function(){var creditCardSubmitButton=document.querySelector('[data-submit-button]');creditCardSubmitButton.classList.add('g-recaptcha');creditCardSubmitButton.setAttribute('data-sitekey','6LdTYr8UAAAAAOMe1qTz2_KxgBNXAPlrHxbhZK8D');creditCardSubmitButton.setAttribute('data-callback','onSubmit');},_mountStripeElements:function(){var publicKey=document.querySelector('[data-stripe-public-key]').getAttribute('data-stripe-public-key');this._stripe=Stripe(publicKey);this._elements=this._stripe.elements({fonts:[{cssSrc:location.origin+'/assets/fonts/658583/98F279B88AB07E41E.css',},],});var elementStyles={base:{fontWeight:700,fontFamily:'Gotham Narrow A, Gotham Narrow B',fontSmoothing:'antialiased',fontSize:'13px',fontStyle:'normal',letterSpacing:'0.5px',color:'#A0A0A0','::placeholder':{textTransform:'uppercase',},':-webkit-autofill':{color:'#e39f48',},},invalid:{color:'#E25950','::placeholder':{color:'#FFCCA5',},},};var elementClasses={focus:'focused',empty:'empty',invalid:'invalid',};this._cardNumber=this._elements.create('cardNumber',{style:elementStyles,classes:elementClasses,placeholder:'Card number',});this._cardNumber.mount('#card-number');this._cardExpiry=this._elements.create('cardExpiry',{style:elementStyles,classes:elementClasses,});this._cardExpiry.mount('#card-expiry');this._cardCvc=this._elements.create('cardCvc',{style:elementStyles,classes:elementClasses,});this._cardCvc.mount('#card-cvc');},_handleSubmit:function(evt){evt.preventDefault();evt.stopPropagation();this._submitButton=evt.target;this._submit();},_handleCancel:function(evt){evt.preventDefault();evt.stopPropagation();this._handleCloseClick();},_handleInputChange:function(evt){if(evt.target.parentNode.classList.contains("error")){evt.target.parentNode.removeAttribute("data-error-message");evt.target.parentNode.classList.remove("error");if(this._submitButton){this._submitButton.removeAttribute("disabled");}}},_submit:function(){var me=this;this._isSubmitting=true;firstly(function(){return me._validate();}).then(function(params){if(me._submitButton){me._submitButton.setAttribute("disabled",true);}
return Promise.resolve(params);}).then(function(params){if(params){if(me.type==="cc"){return me._checkReCAPTCHA(params);}
return Promise.resolve(params);}
return Promise.reject(new Error("Form Validation Error."));}).then(function(params){if(params){if(me.type==="cc"){return me._tokenizeCreditCard(params);}
return Promise.resolve(params);}
return Promise.reject(new Error("Form Validation Error."));}).then(function(params){if(params){return me._postFormData(me.options.endpoint,params).catch(function(err){me._displayError(null,"Something went wrong! Please try again later.");});}
return Promise.reject(new Error("Form Validation Error."));}).then(function(json){if(json){return me._handleFormSubmissionComplete(json);}
me._displayError(null,'Your card is not valid. Please check that your information is correct.');return Promise.reject(new Error("Form Validation Error."));}).catch(function(err){if(me._submitButton){me._submitButton.removeAttribute("disabled");}
Logger.warn(err);}).finally(function(){me._isSubmitting=false;});},_validate:function(){var params={};for(var key in this.options.fields){params[key]=this._rootElement.querySelector(this.options.fields[key]["selector"]).value;}
var errors=validate(params,this._contraints);if(errors){for(var key in errors){this._displayError(key,errors[key][0]);}
return Promise.reject(new Error("Failed to validate."));}
if(this.type==="shipping"&&params['country']==='CA'){var phone=params['phone'];var moreErrors=validate.single(phone,{presence:{message:'Canadian shipping addresses must include a phone number'}});if(moreErrors){this._displayError('phone',moreErrors[0]);return Promise.reject(new Error("Failed to validate."));}
return Promise.resolve(params);}
return Promise.resolve(params);},_checkReCAPTCHA:function(params){var me=this;return new Promise(function(resolve,reject){grecaptcha.ready(function(){grecaptcha.execute('6LeKgsAUAAAAANf6TgbyPoJsEJUHYM5Wx4OdAGyY').then(function(token){me._postFormData('/api/account/recaptcha',{token:token}).then(function(result){if(result.code===200){console.log(result.data.message);resolve(params);}else{console.log(result.data.message);me._displayError(null,result.data.message);reject(result.data.message);}});});});});},_tokenizeCreditCard:function(params){var me=this;return new Promise(function(resolve,reject){me._stripe.createToken(me._cardNumber).then(function(result){console.log(result.error);if(result.error){Logger.debug(result);me._displayError(null,result.error.message);reject(result.error.message);return;}
params['stripetoken']=result.token.id;params['last4']=result.token.card.last4;params['cctype']=result.token.card.brand;params['ccexpmonth']=result.token.card.exp_month;params['ccexpyear']=result.token.card.exp_year;resolve(params);});});},_postFormData:function(endpoint,params){var me=this;return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("POST",endpoint);xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));params["xhr"]=true;xhr.send(serialize(params));});},_displayError:function(field,errorMessage){if(field){console.log(field);var el=this._rootElement.querySelector(this.options.fields[field]["selector"]).parentNode;el.setAttribute("data-error-message",errorMessage);el.classList.add("error");}else{var el=this._rootElement.querySelector('#card-number');el.setAttribute("data-error-message",errorMessage);el.classList.add("error");}},_handleFormSubmissionComplete:function(json){var tracking;if(this.type=="shipping"){tracking="Shipping Address";}else if(this.type=="cc"){tracking="Credit Card";}else{tracking="Unknown Modal";}
var tracking=new criterion.Analytics();tracking.trackEvent(tracking,"added");if(json["code"]==200){this.dispatchEvent({type:"complete",data:json["data"]["template"]});this._handleCloseClick();}else{for(var key in json["data"]["message"]){var value=json["data"]["message"][key];this._displayError(key,value);}}
return Promise.resolve();}});criterion.modals.NotesModal=function(type,position,options){criterion.Modal.call(this,type,position,{route:options.template+"?listItemId="+options.listItemId+"&productId="+options.productId+"&newNote="+options.newNote});this._super=criterion.Modal.prototype;this.options=options;}
criterion.modals.NotesModal.prototype=Object.assign(Object.create(criterion.Modal.prototype),{constructor:criterion.modals.NotesModal,_willAnimateIn:function(rootElement){this._super._willAnimateIn.call(this,rootElement);this._initializeUpdateNoteButton();this._initializeRemoveNoteButton();this._initializeEditNoteButton();this._initializeTextArea();if(this.options.newNote){this._toggleOnNotesForm();}},_initializeUpdateNoteButton:function(){var elements=this._rootElement.querySelectorAll("[data-add-note-submit]");var me=this;forEach(elements,function(_,element){var button=new criterion.AddMyCollectionFilmNoteButton(element);button.init();});},_initializeRemoveNoteButton:function(){var elements=this._rootElement.querySelectorAll("[data-remove-note-submit]");var me=this;forEach(elements,function(_,element){var button=new criterion.RemoveMyCollectionFilmNoteButton(element);button.init();});},_initializeEditNoteButton:function(){var elements=this._rootElement.querySelectorAll("[data-edit-note]");var me=this;forEach(elements,function(_,element){var button=new criterion.EditMyCollectionFilmNoteButton(element);button.init();});},_initializeTextArea:function(){var listItemId=this.options.listItemId;var noteForm=this._rootElement.querySelector('[data-note-form]');var noteTextArea=this._rootElement.querySelector('[data-note-content]');var noteCharCount=this._rootElement.querySelector('[data-note-char-count]');if(noteTextArea){var noteMaxLength=noteTextArea.getAttribute('maxlength');noteCharCount.textContent=noteMaxLength-noteTextArea.value.length;noteTextArea.addEventListener('keyup',function(){noteCharCount.textContent=noteMaxLength-noteTextArea.value.length;});}
noteForm.querySelector('[data-list-item-id]').setAttribute('data-list-item-id',listItemId);},_toggleOnNotesForm:function(){var noteForm=this._rootElement.querySelector('[data-note-form]');var noteArea=noteForm.closest('article').querySelector('[data-note-read-only]');noteArea.style.display='none';var form=noteForm.closest('article').querySelector('form');form.style.display='block';form.querySelector('textarea').focus();}});criterion.modals.QuickShopModal=function(type,position,options){criterion.Modal.call(this,type,position,{route:options.template+"?productId="+options.productId+"&productType="+options.productType});this._super=criterion.Modal.prototype;this.options=options;this._cartUpdatedHandler=this._handleCartUpdated.bind(this);}
criterion.modals.QuickShopModal.prototype=Object.assign(Object.create(criterion.Modal.prototype),{constructor:criterion.modals.QuickShopModal,_willAnimateIn:function(rootElement){this._super._willAnimateIn.call(this,rootElement);this._initializeInventoryStatusUpdaters();this._initializeSelectDependancies();this._initializeAddToCartButtons();},_initializeAddToCartButtons:function(){var elements=this._rootElement.querySelectorAll("[data-add-to-cart-submit]");var me=this;forEach(elements,function(_,element){var button=new criterion.AddToCartButton(element);button.init();button.addEventListener("cart-updated",me._cartUpdatedHandler);});},_initializeSelectDependancies:function(){var elements=this._rootElement.querySelectorAll("[data-select-dependancy]");forEach(elements,function(_,el){var selectDependancy=new criterion.SelectDependancy(el);selectDependancy.init();});},_initializeInventoryStatusUpdaters:function(){var els=this._rootElement.querySelectorAll("[data-inventory-status-updater]");forEach(els,function(_,el){var inventoryStatusUpdater=new criterion.InventoryStatusUpdater(el);inventoryStatusUpdater.init();});},_handleCartUpdated:function(evt){this.dispatchEvent({type:"cart-updated",modal:true,ppid:evt.ppid,analytics:evt.analytics});}});criterion.modals.VideoModal=function(type,position,options){criterion.Modal.call(this,type,position,{route:options.template});this._super=criterion.Modal.prototype;this.options=options;}
criterion.modals.VideoModal.prototype=Object.assign(Object.create(criterion.Modal.prototype),{constructor:criterion.modals.VideoModal,_willAnimateIn:function(rootElement){this._super._willAnimateIn.call(this,rootElement);var videoContainerEl=rootElement.querySelector("[data-video-container]");if(this.options.type=="vimeo"){var params={id:this.options.id,width:640,loop:false};var player=new Vimeo.Player(videoContainerEl,params);delay(1500).then(function(){player.play();})}
else{Logger.warn("VideoModal :: Trying to load a video modal with an invalid type.");Logger.warn(this.options);}}});criterion.modals.WishlistModal=function(type,position,options){this._ADD_TO_WISHLIST_ROUTE=criterion.Constants.ROUTES.ADD_TO_WISHLIST;this._CREATE_WISHLIST_ROUTE=criterion.Constants.ROUTES.CREATE_WISHLIST;this._DELAY_BEFORE_WISHLIST_AUTOCLOSES=1000;criterion.Modal.call(this,type,position,{route:options.template+"?ppid="+options.ppid});this._super=criterion.Modal.prototype;this.options=options;this._submitClickHandler=this._handleSubmitClick.bind(this);this._inputKeyDownHandler=this._handleInputKeyDown.bind(this);}
criterion.modals.WishlistModal.prototype=Object.assign(Object.create(criterion.Modal.prototype),{constructor:criterion.modals.WishlistModal,_willAnimateIn:function(rootElement){this._super._willAnimateIn.call(this,rootElement);var me=this;forEach(rootElement.querySelectorAll("[data-submit-button]"),function(_,el){el.addEventListener("click",me._submitClickHandler);});this._rootElement.querySelector("#create-wishlist").addEventListener("keydown",this._inputKeyDownHandler);},_handleSubmitClick:function(evt){evt.preventDefault();var wishlistId;if(evt.target.hasAttribute("data-wishlist-id")){wishlistId=evt.target.getAttribute("data-wishlist-id");}
else{wishlistId=this._rootElement.querySelector("input[name=wishlist]:checked").value;}
if(wishlistId==-1){Logger.log("WishlistModal :: No ID is set. Create a new wishlist.");this._createWishlist();return;}
Logger.log("WishlistModal :: Adding an item to a wishlist.");var me=this;firstly(function(){return me._addItemToWishlist(wishlistId)}).then(function(json){if(json["code"]==200){return me._wishlistSuccessfullyAdded();}
else{Logger.warn(json["data"]["message"]);return Promise.reject(new Error("Failed to create wishlist."));}}).catch(function(err){var c=me._rootElement.querySelector(".errorContainer");c.innerHTML="<p class='error'>Sorry, we couldnt add to that wishlist. Try again later!</p>";Logger.warn(err);})},_handleInputKeyDown:function(evt){evt.target.parentNode.classList.remove("error");},_createWishlist:function(){var input=this._rootElement.querySelector("#create-wishlist");var wishlistName=input.value.trim();if(wishlistName==""){input.parentNode.classList.add("error");return;}
var me=this;firstly(function(){return me._submitForm(me._CREATE_WISHLIST_ROUTE+"?name="+wishlistName)}).then(function(json){if(json["code"]==200){var tracking=new criterion.Analytics();tracking.trackEvent("Wishlist","create");return me._addItemToWishlist(json["data"]["id"])}
else{Logger.error(json["data"]["message"]);return Promise.reject(new Error("Failed to create wishlist."));}}).then(function(json){if(json["code"]==200){return me._wishlistSuccessfullyAdded();}
else{Logger.error(json["data"]["message"]);return Promise.reject(new Error("Failed to create wishlist."));}}).catch(function(err){var c=me._rootElement.querySelector(".errorContainer");c.innerHTML="<p class='error'>Sorry, we couldnt create that wishlist. Try again later!</p>";});},_addItemToWishlist:function(wishlistId){var ppid=this.options.ppid;return this._submitForm(this._ADD_TO_WISHLIST_ROUTE+"?wishlistId="+wishlistId+"&ppid="+ppid);},_wishlistSuccessfullyAdded:function(){var c=this._rootElement.querySelector(".errorContainer");c.innerHTML="<p class='success'>Wishlist updated!</p>";var me=this;delay(this._DELAY_BEFORE_WISHLIST_AUTOCLOSES).then(function(){me._handleCloseClick();});var tracking=new criterion.Analytics();tracking.trackEvent("Wishlist","add",this.options.ppid);return Promise.resolve();},_submitForm:function(endpoint){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(evt){var req=evt.currentTarget;if(req.readyState===4){if(req.status===200){var jsonString=evt.currentTarget.responseText;try{resolve(JSON.parse(jsonString));}
catch(err){reject(err);}}else{reject(new Error("Could not load page :: "+endpoint));}}};xhr.open("GET",endpoint);xhr.setRequestHeader('X-CSRF-TOKEN',document.querySelector('meta[name="csrf-token"]').getAttribute('content'));xhr.send({xhr:true});});}});